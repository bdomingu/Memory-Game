{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nexport function useNewMessageNotification(messages, currentUserId, hasMoreNewer) {\n  var _a = useState(false),\n      newMessagesNotification = _a[0],\n      setNewMessagesNotification = _a[1];\n\n  var _b = useState(true),\n      isMessageListScrolledToBottom = _b[0],\n      setIsMessageListScrolledToBottom = _b[1];\n  /**\n   * use the flag to avoid the initial \"new messages\" quick blink\n   */\n\n\n  var didMount = useRef(false);\n  var lastMessageId = useRef('');\n  var atBottom = useRef(false);\n  useEffect(function () {\n    var _a;\n\n    if (hasMoreNewer) {\n      setNewMessagesNotification(true);\n      return;\n    }\n    /* handle scrolling behavior for new messages */\n\n\n    if (!(messages === null || messages === void 0 ? void 0 : messages.length)) return;\n    var lastMessage = messages[messages.length - 1];\n    var prevMessageId = lastMessageId.current;\n    lastMessageId.current = lastMessage.id || ''; // update last message id\n\n    /* do nothing if new messages are loaded from top(loadMore)  */\n\n    if (lastMessage.id === prevMessageId) return;\n    /* if list is already at the bottom return, followOutput will do the job */\n\n    if (atBottom.current) return;\n    /* if the new message belongs to current user scroll to bottom */\n\n    if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) !== currentUserId && didMount.current) {\n      /* otherwise just show newMessage notification  */\n      setNewMessagesNotification(true);\n    }\n\n    didMount.current = true;\n  }, [currentUserId, messages, hasMoreNewer]);\n  return {\n    atBottom: atBottom,\n    isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n    newMessagesNotification: newMessagesNotification,\n    setIsMessageListScrolledToBottom: setIsMessageListScrolledToBottom,\n    setNewMessagesNotification: setNewMessagesNotification\n  };\n}","map":{"version":3,"names":["useEffect","useRef","useState","useNewMessageNotification","messages","currentUserId","hasMoreNewer","_a","newMessagesNotification","setNewMessagesNotification","_b","isMessageListScrolledToBottom","setIsMessageListScrolledToBottom","didMount","lastMessageId","atBottom","length","lastMessage","prevMessageId","current","id","user"],"sources":["/home/betty/web-app-practice/memory-game/client/node_modules/stream-chat-react/dist/components/MessageList/hooks/useNewMessageNotification.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nexport function useNewMessageNotification(messages, currentUserId, hasMoreNewer) {\n    var _a = useState(false), newMessagesNotification = _a[0], setNewMessagesNotification = _a[1];\n    var _b = useState(true), isMessageListScrolledToBottom = _b[0], setIsMessageListScrolledToBottom = _b[1];\n    /**\n     * use the flag to avoid the initial \"new messages\" quick blink\n     */\n    var didMount = useRef(false);\n    var lastMessageId = useRef('');\n    var atBottom = useRef(false);\n    useEffect(function () {\n        var _a;\n        if (hasMoreNewer) {\n            setNewMessagesNotification(true);\n            return;\n        }\n        /* handle scrolling behavior for new messages */\n        if (!(messages === null || messages === void 0 ? void 0 : messages.length))\n            return;\n        var lastMessage = messages[messages.length - 1];\n        var prevMessageId = lastMessageId.current;\n        lastMessageId.current = lastMessage.id || ''; // update last message id\n        /* do nothing if new messages are loaded from top(loadMore)  */\n        if (lastMessage.id === prevMessageId)\n            return;\n        /* if list is already at the bottom return, followOutput will do the job */\n        if (atBottom.current)\n            return;\n        /* if the new message belongs to current user scroll to bottom */\n        if (((_a = lastMessage.user) === null || _a === void 0 ? void 0 : _a.id) !== currentUserId && didMount.current) {\n            /* otherwise just show newMessage notification  */\n            setNewMessagesNotification(true);\n        }\n        didMount.current = true;\n    }, [currentUserId, messages, hasMoreNewer]);\n    return {\n        atBottom: atBottom,\n        isMessageListScrolledToBottom: isMessageListScrolledToBottom,\n        newMessagesNotification: newMessagesNotification,\n        setIsMessageListScrolledToBottom: setIsMessageListScrolledToBottom,\n        setNewMessagesNotification: setNewMessagesNotification,\n    };\n}\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,OAAO,SAASC,yBAAT,CAAmCC,QAAnC,EAA6CC,aAA7C,EAA4DC,YAA5D,EAA0E;EAC7E,IAAIC,EAAE,GAAGL,QAAQ,CAAC,KAAD,CAAjB;EAAA,IAA0BM,uBAAuB,GAAGD,EAAE,CAAC,CAAD,CAAtD;EAAA,IAA2DE,0BAA0B,GAAGF,EAAE,CAAC,CAAD,CAA1F;;EACA,IAAIG,EAAE,GAAGR,QAAQ,CAAC,IAAD,CAAjB;EAAA,IAAyBS,6BAA6B,GAAGD,EAAE,CAAC,CAAD,CAA3D;EAAA,IAAgEE,gCAAgC,GAAGF,EAAE,CAAC,CAAD,CAArG;EACA;AACJ;AACA;;;EACI,IAAIG,QAAQ,GAAGZ,MAAM,CAAC,KAAD,CAArB;EACA,IAAIa,aAAa,GAAGb,MAAM,CAAC,EAAD,CAA1B;EACA,IAAIc,QAAQ,GAAGd,MAAM,CAAC,KAAD,CAArB;EACAD,SAAS,CAAC,YAAY;IAClB,IAAIO,EAAJ;;IACA,IAAID,YAAJ,EAAkB;MACdG,0BAA0B,CAAC,IAAD,CAA1B;MACA;IACH;IACD;;;IACA,IAAI,EAAEL,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,QAAQ,CAACY,MAA/D,CAAJ,EACI;IACJ,IAAIC,WAAW,GAAGb,QAAQ,CAACA,QAAQ,CAACY,MAAT,GAAkB,CAAnB,CAA1B;IACA,IAAIE,aAAa,GAAGJ,aAAa,CAACK,OAAlC;IACAL,aAAa,CAACK,OAAd,GAAwBF,WAAW,CAACG,EAAZ,IAAkB,EAA1C,CAXkB,CAW4B;;IAC9C;;IACA,IAAIH,WAAW,CAACG,EAAZ,KAAmBF,aAAvB,EACI;IACJ;;IACA,IAAIH,QAAQ,CAACI,OAAb,EACI;IACJ;;IACA,IAAI,CAAC,CAACZ,EAAE,GAAGU,WAAW,CAACI,IAAlB,MAA4B,IAA5B,IAAoCd,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACa,EAAjE,MAAyEf,aAAzE,IAA0FQ,QAAQ,CAACM,OAAvG,EAAgH;MAC5G;MACAV,0BAA0B,CAAC,IAAD,CAA1B;IACH;;IACDI,QAAQ,CAACM,OAAT,GAAmB,IAAnB;EACH,CAxBQ,EAwBN,CAACd,aAAD,EAAgBD,QAAhB,EAA0BE,YAA1B,CAxBM,CAAT;EAyBA,OAAO;IACHS,QAAQ,EAAEA,QADP;IAEHJ,6BAA6B,EAAEA,6BAF5B;IAGHH,uBAAuB,EAAEA,uBAHtB;IAIHI,gCAAgC,EAAEA,gCAJ/B;IAKHH,0BAA0B,EAAEA;EALzB,CAAP;AAOH"},"metadata":{},"sourceType":"module"}