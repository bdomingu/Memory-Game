{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'mdast-util-find-and-replace';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport uniqBy from 'lodash.uniqby';\nexport var isOnlyEmojis = function (text) {\n  if (!text) return false;\n  var noEmojis = text.replace(emojiRegex(), '');\n  var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\nvar allowedMarkups = ['html', // @ts-expect-error\n'root', 'text', 'break', 'paragraph', 'emphasis', 'strong', 'link', 'list', 'listItem', 'code', 'inlineCode', 'blockquote', 'delete'];\nexport var matchMarkdownLinks = function (message) {\n  var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    var i = singleMatch.exec(match);\n    return i && [i[1], i[2]];\n  }) : [];\n  return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n  var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  var matches = message.match(codeRegex);\n  return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\n\nfunction formatUrlForDisplay(url) {\n  try {\n    return decodeURIComponent(url).replace(detectHttp, '');\n  } catch (e) {\n    return url;\n  }\n}\n\nfunction encodeDecode(url) {\n  try {\n    return encodeURI(decodeURIComponent(url));\n  } catch (error) {\n    return url;\n  }\n}\n\nexport var markDownRenderers = {\n  // eslint-disable-next-line react/display-name\n  link: function (props) {\n    var children = props.children,\n        href = props.href;\n    var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n    var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n\n    if (!href || !isEmail && !isUrl) {\n      return children;\n    }\n\n    return React.createElement(\"a\", {\n      className: \"\".concat(isUrl ? 'str-chat__message-url-link' : ''),\n      href: href,\n      rel: 'nofollow noreferrer noopener',\n      target: '_blank'\n    }, children);\n  },\n  span: 'span'\n};\nexport var emojiMarkdownPlugin = function () {\n  function replace(match) {\n    return {\n      children: [{\n        type: 'text',\n        value: match\n      }],\n      className: 'inline-text-emoji',\n      type: 'span'\n    };\n  }\n\n  var transform = function (markdownAST) {\n    findAndReplace(markdownAST, emojiRegex(), replace);\n    return markdownAST;\n  };\n\n  return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) {\n  return function () {\n    var mentioned_usernames = mentioned_users.map(function (user) {\n      return user.name || user.id;\n    }).filter(Boolean).map(escapeRegExp);\n\n    function replace(match) {\n      var usernameOrId = match.replace('@', '');\n      var user = mentioned_users.find(function (_a) {\n        var id = _a.id,\n            name = _a.name;\n        return name === usernameOrId || id === usernameOrId;\n      });\n      return {\n        children: [{\n          type: 'text',\n          value: match\n        }],\n        mentioned_user: user,\n        type: 'mention'\n      };\n    }\n\n    var transform = function (markdownAST) {\n      if (!mentioned_usernames.length) {\n        return markdownAST;\n      }\n\n      var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) {\n        return \"@\".concat(username);\n      }).join('|'), 'g');\n      findAndReplace(markdownAST, mentionedUsersRegex, replace);\n      return markdownAST;\n    };\n\n    return transform;\n  };\n};\n\nvar Mention = function (props) {\n  return React.createElement(\"span\", {\n    className: 'str-chat__message-mention'\n  }, props.children);\n};\n\nexport var renderText = function (text, mentioned_users, options) {\n  if (options === void 0) {\n    options = {};\n  } // take the @ mentions and turn them into markdown?\n  // translate links\n\n\n  if (!text) return null;\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText);\n  var codeBlocks = messageCodeBlocks(newText); // extract all valid links/emails within text and replace it with proper markup\n\n  uniqBy(linkify.find(newText), 'value').forEach(function (_a) {\n    var href = _a.href,\n        type = _a.type,\n        value = _a.value;\n    var linkIsInBlock = codeBlocks.some(function (block) {\n      return block === null || block === void 0 ? void 0 : block.includes(value);\n    }); // check if message is already  markdown\n\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n      var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n      if (!strippedHref || !strippedText) return false;\n      return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n    });\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n\n    try {\n      // special case for mentions:\n      // it could happen that a user's name matches with an e-mail format pattern.\n      // in that case, we check whether the found e-mail is actually a mention\n      // by naively checking for an existence of @ sign in front of it.\n      if (type === 'email' && mentioned_users) {\n        var emailMatchesWithName = mentioned_users.some(function (u) {\n          return u.name === value;\n        });\n\n        if (emailMatchesWithName) {\n          newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n            var isMention = newText.charAt(position - 1) === '@'; // in case of mention, we leave the match in its original form,\n            // and we let `mentionsMarkdownPlugin` to do its job\n\n            return isMention ? match : \"[\".concat(match, \"](\").concat(encodeDecode(href), \")\");\n          });\n          return;\n        }\n      }\n\n      var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n      newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\".concat(displayLink, \"](\").concat(encodeDecode(href), \")\"));\n    } catch (e) {\n      void e;\n    }\n  });\n  var plugins = [emojiMarkdownPlugin];\n\n  if (mentioned_users === null || mentioned_users === void 0 ? void 0 : mentioned_users.length) {\n    plugins.push(mentionsMarkdownPlugin(mentioned_users));\n  }\n\n  var renderers = __assign(__assign({\n    mention: Mention\n  }, markDownRenderers), options.customMarkDownRenderers);\n\n  return React.createElement(ReactMarkdown, {\n    allowedTypes: allowedMarkups,\n    escapeHtml: true,\n    plugins: plugins,\n    renderers: renderers,\n    source: newText,\n    transformLinkUri: function (uri) {\n      return uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri);\n    },\n    unwrapDisallowed: true\n  });\n};\nexport function escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\n\nexport var generateRandomId = nanoid; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\n\nexport var getWholeChar = function (str, i) {\n  var code = str.charCodeAt(i);\n  if (Number.isNaN(code)) return '';\n  if (code < 0xd800 || code > 0xdfff) return str.charAt(i);\n\n  if (0xd800 <= code && code <= 0xdbff) {\n    if (str.length <= i + 1) {\n      throw 'High surrogate without following low surrogate';\n    }\n\n    var next = str.charCodeAt(i + 1);\n\n    if (0xdc00 > next || next > 0xdfff) {\n      throw 'High surrogate without following low surrogate';\n    }\n\n    return str.charAt(i) + str.charAt(i + 1);\n  }\n\n  if (i === 0) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n\n  var prev = str.charCodeAt(i - 1);\n\n  if (0xd800 > prev || prev > 0xdbff) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n\n  return '';\n};","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","React","emojiRegex","linkify","nanoid","findAndReplace","RootReactMarkdown","ReactMarkdown","uniqBy","isOnlyEmojis","text","noEmojis","replace","noSpace","allowedMarkups","matchMarkdownLinks","message","regexMdLinks","matches","match","singleMatch","links","map","exec","flat","messageCodeBlocks","codeRegex","detectHttp","formatUrlForDisplay","url","decodeURIComponent","e","encodeDecode","encodeURI","error","markDownRenderers","link","props","children","href","isEmail","startsWith","isUrl","createElement","className","concat","rel","target","span","emojiMarkdownPlugin","type","value","transform","markdownAST","mentionsMarkdownPlugin","mentioned_users","mentioned_usernames","user","name","id","filter","Boolean","escapeRegExp","usernameOrId","find","_a","mentioned_user","mentionedUsersRegex","RegExp","username","join","Mention","renderText","options","newText","markdownLinks","codeBlocks","forEach","linkIsInBlock","some","block","includes","noParsingNeeded","strippedHref","strippedText","emailMatchesWithName","u","position","isMention","charAt","displayLink","plugins","push","renderers","mention","customMarkDownRenderers","allowedTypes","escapeHtml","source","transformLinkUri","uri","uriTransformer","unwrapDisallowed","generateRandomId","getWholeChar","str","code","charCodeAt","Number","isNaN","next","prev"],"sources":["/home/betty/web-app-practice/memory-game/client/node_modules/stream-chat-react/dist/utils.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport * as linkify from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'mdast-util-find-and-replace';\nimport RootReactMarkdown from 'react-markdown';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport uniqBy from 'lodash.uniqby';\nexport var isOnlyEmojis = function (text) {\n    if (!text)\n        return false;\n    var noEmojis = text.replace(emojiRegex(), '');\n    var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n    return !noSpace;\n};\nvar allowedMarkups = [\n    'html',\n    // @ts-expect-error\n    'root',\n    'text',\n    'break',\n    'paragraph',\n    'emphasis',\n    'strong',\n    'link',\n    'list',\n    'listItem',\n    'code',\n    'inlineCode',\n    'blockquote',\n    'delete',\n];\nexport var matchMarkdownLinks = function (message) {\n    var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n    var matches = message.match(regexMdLinks);\n    var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n    var links = matches\n        ? matches.map(function (match) {\n            var i = singleMatch.exec(match);\n            return i && [i[1], i[2]];\n        })\n        : [];\n    return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n    var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n    var matches = message.match(codeRegex);\n    return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\nfunction formatUrlForDisplay(url) {\n    try {\n        return decodeURIComponent(url).replace(detectHttp, '');\n    }\n    catch (e) {\n        return url;\n    }\n}\nfunction encodeDecode(url) {\n    try {\n        return encodeURI(decodeURIComponent(url));\n    }\n    catch (error) {\n        return url;\n    }\n}\nexport var markDownRenderers = {\n    // eslint-disable-next-line react/display-name\n    link: function (props) {\n        var children = props.children, href = props.href;\n        var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n        var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n        if (!href || (!isEmail && !isUrl)) {\n            return children;\n        }\n        return (React.createElement(\"a\", { className: \"\".concat(isUrl ? 'str-chat__message-url-link' : ''), href: href, rel: 'nofollow noreferrer noopener', target: '_blank' }, children));\n    },\n    span: 'span',\n};\nexport var emojiMarkdownPlugin = function () {\n    function replace(match) {\n        return {\n            children: [{ type: 'text', value: match }],\n            className: 'inline-text-emoji',\n            type: 'span',\n        };\n    }\n    var transform = function (markdownAST) {\n        findAndReplace(markdownAST, emojiRegex(), replace);\n        return markdownAST;\n    };\n    return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) { return function () {\n    var mentioned_usernames = mentioned_users\n        .map(function (user) { return user.name || user.id; })\n        .filter(Boolean)\n        .map(escapeRegExp);\n    function replace(match) {\n        var usernameOrId = match.replace('@', '');\n        var user = mentioned_users.find(function (_a) {\n            var id = _a.id, name = _a.name;\n            return name === usernameOrId || id === usernameOrId;\n        });\n        return {\n            children: [{ type: 'text', value: match }],\n            mentioned_user: user,\n            type: 'mention',\n        };\n    }\n    var transform = function (markdownAST) {\n        if (!mentioned_usernames.length) {\n            return markdownAST;\n        }\n        var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) { return \"@\".concat(username); }).join('|'), 'g');\n        findAndReplace(markdownAST, mentionedUsersRegex, replace);\n        return markdownAST;\n    };\n    return transform;\n}; };\nvar Mention = function (props) { return React.createElement(\"span\", { className: 'str-chat__message-mention' }, props.children); };\nexport var renderText = function (text, mentioned_users, options) {\n    if (options === void 0) { options = {}; }\n    // take the @ mentions and turn them into markdown?\n    // translate links\n    if (!text)\n        return null;\n    var newText = text;\n    var markdownLinks = matchMarkdownLinks(newText);\n    var codeBlocks = messageCodeBlocks(newText);\n    // extract all valid links/emails within text and replace it with proper markup\n    uniqBy(linkify.find(newText), 'value').forEach(function (_a) {\n        var href = _a.href, type = _a.type, value = _a.value;\n        var linkIsInBlock = codeBlocks.some(function (block) { return block === null || block === void 0 ? void 0 : block.includes(value); });\n        // check if message is already  markdown\n        var noParsingNeeded = markdownLinks &&\n            markdownLinks.filter(function (text) {\n                var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n                var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n                if (!strippedHref || !strippedText)\n                    return false;\n                return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n            });\n        if (noParsingNeeded.length > 0 || linkIsInBlock)\n            return;\n        try {\n            // special case for mentions:\n            // it could happen that a user's name matches with an e-mail format pattern.\n            // in that case, we check whether the found e-mail is actually a mention\n            // by naively checking for an existence of @ sign in front of it.\n            if (type === 'email' && mentioned_users) {\n                var emailMatchesWithName = mentioned_users.some(function (u) { return u.name === value; });\n                if (emailMatchesWithName) {\n                    newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n                        var isMention = newText.charAt(position - 1) === '@';\n                        // in case of mention, we leave the match in its original form,\n                        // and we let `mentionsMarkdownPlugin` to do its job\n                        return isMention ? match : \"[\".concat(match, \"](\").concat(encodeDecode(href), \")\");\n                    });\n                    return;\n                }\n            }\n            var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n            newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\".concat(displayLink, \"](\").concat(encodeDecode(href), \")\"));\n        }\n        catch (e) {\n            void e;\n        }\n    });\n    var plugins = [emojiMarkdownPlugin];\n    if (mentioned_users === null || mentioned_users === void 0 ? void 0 : mentioned_users.length) {\n        plugins.push(mentionsMarkdownPlugin(mentioned_users));\n    }\n    var renderers = __assign(__assign({ mention: Mention }, markDownRenderers), options.customMarkDownRenderers);\n    return (React.createElement(ReactMarkdown, { allowedTypes: allowedMarkups, escapeHtml: true, plugins: plugins, renderers: renderers, source: newText, transformLinkUri: function (uri) {\n            return uri.startsWith('app://') ? uri : RootReactMarkdown.uriTransformer(uri);\n        }, unwrapDisallowed: true }));\n};\nexport function escapeRegExp(text) {\n    return text.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\nexport var generateRandomId = nanoid;\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\nexport var getWholeChar = function (str, i) {\n    var code = str.charCodeAt(i);\n    if (Number.isNaN(code))\n        return '';\n    if (code < 0xd800 || code > 0xdfff)\n        return str.charAt(i);\n    if (0xd800 <= code && code <= 0xdbff) {\n        if (str.length <= i + 1) {\n            throw 'High surrogate without following low surrogate';\n        }\n        var next = str.charCodeAt(i + 1);\n        if (0xdc00 > next || next > 0xdfff) {\n            throw 'High surrogate without following low surrogate';\n        }\n        return str.charAt(i) + str.charAt(i + 1);\n    }\n    if (i === 0) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n    if (0xd800 > prev || prev > 0xdbff) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    return '';\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}