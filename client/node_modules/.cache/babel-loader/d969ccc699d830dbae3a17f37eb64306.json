{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport { isValidElementType } from 'react-is';\nimport clsx from 'clsx';\nimport { List as DefaultSuggestionList } from './List';\nimport { DEFAULT_CARET_POSITION, defaultScrollToItem, errorMessage, triggerPropsCheck } from './utils';\nimport { CommandItem } from '../CommandItem/CommandItem';\nimport { UserItem } from '../UserItem/UserItem';\n\nvar ReactTextareaAutocomplete =\n/** @class */\nfunction (_super) {\n  __extends(ReactTextareaAutocomplete, _super);\n\n  function ReactTextareaAutocomplete(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.getSelectionPosition = function () {\n      if (!_this.textareaRef) return null;\n      return {\n        selectionEnd: _this.textareaRef.selectionEnd,\n        selectionStart: _this.textareaRef.selectionStart\n      };\n    };\n\n    _this.getSelectedText = function () {\n      if (!_this.textareaRef) return null;\n      var _a = _this.textareaRef,\n          selectionEnd = _a.selectionEnd,\n          selectionStart = _a.selectionStart;\n      if (selectionStart === selectionEnd) return null;\n      return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n    };\n\n    _this.setCaretPosition = function (position) {\n      if (position === void 0) {\n        position = 0;\n      }\n\n      if (!_this.textareaRef) return;\n\n      _this.textareaRef.focus();\n\n      _this.textareaRef.setSelectionRange(position, position);\n    };\n\n    _this.getCaretPosition = function () {\n      if (!_this.textareaRef) return 0;\n      return _this.textareaRef.selectionEnd;\n    };\n    /**\n     * isComposing prevents double submissions in Korean and other languages.\n     * starting point for a read:\n     * https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/isComposing\n     * In the long term, the fix should happen by handling keypress, but changing this has unknown implications.\n     * @param event React.KeyboardEvent\n     */\n\n\n    _this._defaultShouldSubmit = function (event) {\n      return event.key === 'Enter' && !event.shiftKey && !event.nativeEvent.isComposing;\n    };\n\n    _this._handleKeyDown = function (event) {\n      var _a = _this.props.shouldSubmit,\n          shouldSubmit = _a === void 0 ? _this._defaultShouldSubmit : _a; // prevent default behaviour when the selection list is rendered\n\n      if ((event.key === 'ArrowUp' || event.key === 'ArrowDown') && _this.dropdownRef) event.preventDefault();\n      if (shouldSubmit === null || shouldSubmit === void 0 ? void 0 : shouldSubmit(event)) return _this._onEnter(event);\n      if (event.key === ' ') return _this._onSpace(event);\n      if (event.key === 'Escape') return _this._closeAutocomplete();\n    };\n\n    _this._onEnter = function (event) {\n      if (!_this.textareaRef) return;\n      var trigger = _this.state.currentTrigger;\n\n      if (!trigger || !_this.state.data) {\n        // trigger a submit\n        _this._replaceWord();\n\n        if (_this.textareaRef) {\n          _this.textareaRef.selectionEnd = 0;\n        }\n\n        _this.props.handleSubmit(event);\n\n        _this._closeAutocomplete();\n      }\n    };\n\n    _this._onSpace = function () {\n      if (!_this.props.replaceWord || !_this.textareaRef) return; // don't change characters if the element doesn't have focus\n\n      var hasFocus = _this.textareaRef.matches(':focus');\n\n      if (!hasFocus) return;\n\n      _this._replaceWord();\n    };\n\n    _this._replaceWord = function () {\n      var value = _this.state.value;\n      var lastWordRegex = /([^\\s]+)(\\s*)$/;\n      var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n      var lastWord = match && match[1];\n      if (!lastWord) return;\n      var spaces = match[2];\n\n      var newWord = _this.props.replaceWord(lastWord);\n\n      if (newWord == null) return;\n      var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n      var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n      var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n\n      _this.setState({\n        value: newText\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (_this.props.onChange) _this.props.onChange(e);\n      });\n    };\n\n    _this._onSelect = function (newToken) {\n      var _a = _this.props,\n          closeCommandsList = _a.closeCommandsList,\n          closeMentionsList = _a.closeMentionsList,\n          onChange = _a.onChange,\n          showCommandsList = _a.showCommandsList,\n          showMentionsList = _a.showMentionsList;\n      var _b = _this.state,\n          stateTrigger = _b.currentTrigger,\n          selectionEnd = _b.selectionEnd,\n          textareaValue = _b.value;\n      var currentTrigger = showCommandsList ? '/' : showMentionsList ? '@' : stateTrigger;\n      if (!currentTrigger) return;\n\n      var computeCaretPosition = function (position, token, startToken) {\n        switch (position) {\n          case 'start':\n            return startToken;\n\n          case 'next':\n          case 'end':\n            return startToken + token.length;\n\n          default:\n            if (!Number.isInteger(position)) {\n              throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n            }\n\n            return position;\n        }\n      };\n\n      var textToModify = showCommandsList ? '/' : showMentionsList ? '@' : textareaValue.slice(0, selectionEnd);\n      var startOfTokenPosition = textToModify.lastIndexOf(currentTrigger); // we add space after emoji is selected if a caret position is next\n\n      var newTokenString = newToken.caretPosition === 'next' ? \"\".concat(newToken.text, \" \") : newToken.text;\n      var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n      var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString;\n      var valueToReplace = textareaValue.replace(textToModify, modifiedText); // set the new textarea value and after that set the caret back to its position\n\n      _this.setState({\n        dataLoading: false,\n        value: valueToReplace\n      }, function () {\n        // fire onChange event after successful selection\n        var e = new CustomEvent('change', {\n          bubbles: true\n        });\n\n        _this.textareaRef.dispatchEvent(e);\n\n        if (onChange) onChange(e);\n\n        _this.setCaretPosition(newCaretPosition);\n      });\n\n      _this._closeAutocomplete();\n\n      if (showCommandsList) closeCommandsList();\n      if (showMentionsList) closeMentionsList();\n    };\n\n    _this._getItemOnSelect = function (paramTrigger) {\n      var stateTrigger = _this.state.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !triggerSettings) return null;\n      var callback = triggerSettings.callback;\n      if (!callback) return null;\n      return function (item) {\n        if (typeof callback !== 'function') {\n          throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (callback) {\n          return callback(item, currentTrigger);\n        }\n\n        return null;\n      };\n    };\n\n    _this._getTextToReplace = function (paramTrigger) {\n      var _a = _this.state,\n          actualToken = _a.actualToken,\n          stateTrigger = _a.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !triggerSettings) return null;\n      var output = triggerSettings.output;\n      return function (item) {\n        if (typeof item === 'object' && (!output || typeof output !== 'function')) {\n          throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n        }\n\n        if (output) {\n          var textToReplace = output(item, currentTrigger);\n\n          if (!textToReplace || typeof textToReplace === 'number') {\n            throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\".concat(String(textToReplace), \"\\\". Check the implementation for trigger \\\"\").concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\"));\n          }\n\n          if (typeof textToReplace === 'string') {\n            return {\n              caretPosition: DEFAULT_CARET_POSITION,\n              text: textToReplace\n            };\n          }\n\n          if (!textToReplace.text && currentTrigger !== ':') {\n            throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          if (!textToReplace.caretPosition) {\n            throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n          }\n\n          return textToReplace;\n        }\n\n        if (typeof item !== 'string') {\n          throw new Error('Output item should be string\\n');\n        }\n\n        return {\n          caretPosition: DEFAULT_CARET_POSITION,\n          text: \"\".concat(currentTrigger).concat(item).concat(currentTrigger)\n        };\n      };\n    };\n\n    _this._getCurrentTriggerSettings = function (paramTrigger) {\n      var stateTrigger = _this.state.currentTrigger;\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger) return null;\n      return _this.props.trigger[currentTrigger];\n    };\n\n    _this._getValuesFromProvider = function () {\n      var _a = _this.state,\n          actualToken = _a.actualToken,\n          currentTrigger = _a.currentTrigger;\n\n      var triggerSettings = _this._getCurrentTriggerSettings();\n\n      if (!currentTrigger || !triggerSettings) return;\n      var component = triggerSettings.component,\n          dataProvider = triggerSettings.dataProvider;\n\n      if (typeof dataProvider !== 'function') {\n        throw new Error('Trigger provider has to be a function!');\n      }\n\n      _this.setState({\n        dataLoading: true\n      }); // Modified: send the full text to support / style commands\n\n\n      dataProvider(actualToken, _this.state.value, function (data, token) {\n        // Make sure that the result is still relevant for current query\n        if (token !== _this.state.actualToken) return;\n\n        if (!Array.isArray(data)) {\n          throw new Error('Trigger provider has to provide an array!');\n        }\n\n        if (!isValidElementType(component)) {\n          throw new Error('Component should be defined!');\n        } // throw away if we resolved old trigger\n\n\n        if (currentTrigger !== _this.state.currentTrigger) return; // if we haven't resolved any data let's close the autocomplete\n\n        if (!data.length) {\n          _this._closeAutocomplete();\n\n          return;\n        }\n\n        _this.setState({\n          component: component,\n          data: data,\n          dataLoading: false\n        });\n      });\n    };\n\n    _this._getSuggestions = function (paramTrigger) {\n      var _a = _this.state,\n          stateTrigger = _a.currentTrigger,\n          data = _a.data;\n      var currentTrigger = paramTrigger || stateTrigger;\n      if (!currentTrigger || !data || data && !data.length) return null;\n      return data;\n    };\n    /**\n     * Close autocomplete, also clean up trigger (to avoid slow promises)\n     */\n\n\n    _this._closeAutocomplete = function () {\n      _this.setState({\n        currentTrigger: null,\n        data: null,\n        dataLoading: false,\n        left: null,\n        top: null\n      });\n    };\n\n    _this._cleanUpProps = function () {\n      var props = __assign({}, _this.props);\n\n      var notSafe = ['additionalTextareaProps', 'className', 'closeCommandsList', 'closeMentionsList', 'closeOnClickOutside', 'containerClassName', 'containerStyle', 'disableMentions', 'dropdownClassName', 'dropdownStyle', 'grow', 'handleSubmit', 'innerRef', 'itemClassName', 'itemStyle', 'listClassName', 'listStyle', 'loaderClassName', 'loaderStyle', 'loadingComponent', 'minChar', 'movePopupAsYouType', 'onCaretPositionChange', 'onChange', 'ref', 'replaceWord', 'scrollToItem', 'shouldSubmit', 'showCommandsList', 'showMentionsList', 'SuggestionItem', 'SuggestionList', 'trigger', 'value']; // eslint-disable-next-line\n\n      for (var prop in props) {\n        if (notSafe.includes(prop)) delete props[prop];\n      }\n\n      return props;\n    };\n\n    _this._isCommand = function (text) {\n      if (text[0] !== '/') return false;\n      var tokens = text.split(' ');\n      return tokens.length <= 1;\n    };\n\n    _this._changeHandler = function (e) {\n      var _a = _this.props,\n          minChar = _a.minChar,\n          movePopupAsYouType = _a.movePopupAsYouType,\n          onCaretPositionChange = _a.onCaretPositionChange,\n          onChange = _a.onChange,\n          trigger = _a.trigger;\n      var _b = _this.state,\n          left = _b.left,\n          top = _b.top;\n      var textarea = e.target;\n      var selectionEnd = textarea.selectionEnd,\n          selectionStart = textarea.selectionStart,\n          value = textarea.value;\n\n      if (onChange) {\n        e.persist();\n        onChange(e);\n      }\n\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n\n      _this.setState({\n        value: value\n      });\n\n      var currentTrigger;\n      var lastToken;\n\n      if (_this._isCommand(value)) {\n        currentTrigger = '/';\n        lastToken = value;\n      } else {\n        var triggerTokens = Object.keys(trigger).join().replace('/', '');\n        var triggerNorWhitespace = \"[^\\\\s\".concat(triggerTokens, \"]*\");\n        var regex = new RegExp(\"(?!^|\\\\W)?[\".concat(triggerTokens, \"]\").concat(triggerNorWhitespace, \"\\\\s?\").concat(triggerNorWhitespace, \"$\"), 'g');\n        var tokenMatch = value.slice(0, selectionEnd).match(regex);\n        lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n        currentTrigger = lastToken && Object.keys(trigger).find(function (a) {\n          return a === lastToken[0];\n        }) || null;\n      }\n      /*\n       if we lost the trigger token or there is no following character we want to close\n       the autocomplete\n      */\n\n\n      if (!lastToken || lastToken.length <= minChar) {\n        _this._closeAutocomplete();\n\n        return;\n      }\n\n      var actualToken = lastToken.slice(1); // if trigger is not configured step out from the function, otherwise proceed\n\n      if (!currentTrigger) return;\n\n      if (movePopupAsYouType || top === null && left === null || // if we have single char - trigger it means we want to re-position the autocomplete\n      lastToken.length === 1) {\n        var _c = getCaretCoordinates(textarea, selectionEnd),\n            newLeft = _c.left,\n            newTop = _c.top;\n\n        _this.setState({\n          // make position relative to textarea\n          left: newLeft,\n          top: newTop - _this.textareaRef.scrollTop || 0\n        });\n      }\n\n      _this.setState({\n        actualToken: actualToken,\n        currentTrigger: currentTrigger,\n        selectionEnd: selectionEnd,\n        selectionStart: selectionStart\n      }, function () {\n        try {\n          _this._getValuesFromProvider();\n        } catch (err) {\n          errorMessage(err.message);\n        }\n      });\n    };\n\n    _this._selectHandler = function (e) {\n      var _a = _this.props,\n          onCaretPositionChange = _a.onCaretPositionChange,\n          onSelect = _a.onSelect;\n      if (onCaretPositionChange) onCaretPositionChange(_this.getCaretPosition());\n\n      if (onSelect) {\n        e.persist();\n        onSelect(e);\n      }\n    }; // The textarea itself is outside the auto-select dropdown.\n\n\n    _this._onClickAndBlurHandler = function (e) {\n      var _a = _this.props,\n          closeOnClickOutside = _a.closeOnClickOutside,\n          onBlur = _a.onBlur; // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n      // that was actually clicked. If we clicked inside the auto-select dropdown, then\n      // that's not a blur, from the auto-select point of view, so then do nothing.\n\n      var el = e.relatedTarget;\n\n      if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n        return;\n      }\n\n      if (closeOnClickOutside) _this._closeAutocomplete();\n\n      if (onBlur) {\n        e.persist();\n        onBlur(e);\n      }\n    };\n\n    _this._onScrollHandler = function () {\n      return _this._closeAutocomplete();\n    };\n\n    _this._dropdownScroll = function (item) {\n      var scrollToItem = _this.props.scrollToItem;\n      if (!scrollToItem) return;\n\n      if (scrollToItem === true) {\n        defaultScrollToItem(_this.dropdownRef, item);\n        return;\n      }\n\n      if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n        throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n      }\n\n      scrollToItem(_this.dropdownRef, item);\n    };\n\n    _this.getTriggerProps = function () {\n      var _a = _this.props,\n          showCommandsList = _a.showCommandsList,\n          showMentionsList = _a.showMentionsList,\n          trigger = _a.trigger;\n      var _b = _this.state,\n          component = _b.component,\n          currentTrigger = _b.currentTrigger,\n          selectionEnd = _b.selectionEnd,\n          value = _b.value;\n\n      var selectedItem = _this._getItemOnSelect();\n\n      var suggestionData = _this._getSuggestions();\n\n      var textToReplace = _this._getTextToReplace();\n\n      var triggerProps = {\n        component: component,\n        currentTrigger: currentTrigger,\n        getSelectedItem: selectedItem,\n        getTextToReplace: textToReplace,\n        selectionEnd: selectionEnd,\n        value: value,\n        values: suggestionData\n      };\n\n      if (showCommandsList && trigger['/'] || showMentionsList && trigger['@']) {\n        var currentCommands_1;\n        var getCommands = trigger[showCommandsList ? '/' : '@'].dataProvider;\n        getCommands === null || getCommands === void 0 ? void 0 : getCommands('', showCommandsList ? '/' : '@', function (data) {\n          currentCommands_1 = data;\n        });\n        triggerProps.component = showCommandsList ? CommandItem : UserItem;\n        triggerProps.currentTrigger = showCommandsList ? '/' : '@';\n        triggerProps.getTextToReplace = _this._getTextToReplace(showCommandsList ? '/' : '@');\n        triggerProps.getSelectedItem = _this._getItemOnSelect(showCommandsList ? '/' : '@');\n        triggerProps.selectionEnd = 1;\n        triggerProps.value = showCommandsList ? '/' : '@';\n        triggerProps.values = currentCommands_1;\n      }\n\n      return triggerProps;\n    };\n\n    _this.setDropdownRef = function (element) {\n      _this.dropdownRef = element;\n    };\n\n    var _a = _this.props,\n        loadingComponent = _a.loadingComponent,\n        trigger = _a.trigger,\n        value = _a.value; // TODO: it would be better to have the parent control state...\n    // if (value) this.state.value = value;\n\n    if (!loadingComponent) {\n      throw new Error('RTA: loadingComponent is not defined');\n    }\n\n    if (!trigger) {\n      throw new Error('RTA: trigger is not defined');\n    }\n\n    _this.state = {\n      actualToken: '',\n      component: null,\n      currentTrigger: null,\n      data: null,\n      dataLoading: false,\n      left: null,\n      selectionEnd: 0,\n      selectionStart: 0,\n      top: null,\n      value: value || ''\n    };\n    return _this;\n  }\n  /**\n   * setup to emulate the UNSAFE_componentWillReceiveProps\n   */\n\n\n  ReactTextareaAutocomplete.getDerivedStateFromProps = function (props, state) {\n    if (props.value !== state.propsValue || !state.value) {\n      return {\n        propsValue: props.value,\n        value: props.value\n      };\n    } else {\n      return null;\n    }\n  };\n\n  ReactTextareaAutocomplete.prototype.renderSuggestionListContainer = function () {\n    var _a = this.props,\n        disableMentions = _a.disableMentions,\n        dropdownClassName = _a.dropdownClassName,\n        dropdownStyle = _a.dropdownStyle,\n        itemClassName = _a.itemClassName,\n        itemStyle = _a.itemStyle,\n        listClassName = _a.listClassName,\n        SuggestionItem = _a.SuggestionItem,\n        _b = _a.SuggestionList,\n        SuggestionList = _b === void 0 ? DefaultSuggestionList : _b;\n    var triggerProps = this.getTriggerProps();\n\n    if (triggerProps.values && triggerProps.currentTrigger && !(disableMentions && triggerProps.currentTrigger === '@')) {\n      return React.createElement(\"div\", {\n        className: clsx('rta__autocomplete', 'str-chat__suggestion-list-container', dropdownClassName),\n        ref: this.setDropdownRef,\n        style: dropdownStyle\n      }, React.createElement(SuggestionList, __assign({\n        className: clsx('str-chat__suggestion-list', listClassName),\n        dropdownScroll: this._dropdownScroll,\n        itemClassName: clsx('str-chat__suggestion-list-item', itemClassName),\n        itemStyle: itemStyle,\n        onSelect: this._onSelect,\n        SuggestionItem: SuggestionItem\n      }, triggerProps)));\n    }\n\n    return null;\n  };\n\n  ReactTextareaAutocomplete.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        className = _a.className,\n        containerClassName = _a.containerClassName,\n        containerStyle = _a.containerStyle,\n        style = _a.style;\n    var maxRows = this.props.maxRows;\n    var _b = this.state,\n        dataLoading = _b.dataLoading,\n        value = _b.value;\n    if (!this.props.grow) maxRows = 1; // By setting defaultValue to undefined, avoid error:\n    // ForwardRef(TextareaAutosize) contains a textarea with both value and defaultValue props.\n    // Textarea elements must be either controlled or uncontrolled\n\n    return React.createElement(\"div\", {\n      className: clsx('rta', containerClassName, {\n        'rta--loading': dataLoading\n      }),\n      style: containerStyle\n    }, this.renderSuggestionListContainer(), React.createElement(Textarea, __assign({\n      \"data-testid\": 'message-input'\n    }, this._cleanUpProps(), {\n      className: clsx('rta__textarea', className),\n      maxRows: maxRows,\n      onBlur: this._onClickAndBlurHandler,\n      onChange: this._changeHandler,\n      onClick: this._onClickAndBlurHandler,\n      onFocus: this.props.onFocus,\n      onKeyDown: this._handleKeyDown,\n      onScroll: this._onScrollHandler,\n      onSelect: this._selectHandler,\n      ref: function (ref) {\n        var _a;\n\n        (_a = _this.props) === null || _a === void 0 ? void 0 : _a.innerRef(ref);\n        _this.textareaRef = ref;\n      },\n      style: style,\n      value: value\n    }, this.props.additionalTextareaProps, {\n      defaultValue: undefined\n    })));\n  };\n\n  ReactTextareaAutocomplete.defaultProps = {\n    closeOnClickOutside: true,\n    maxRows: 10,\n    minChar: 1,\n    movePopupAsYouType: false,\n    scrollToItem: true,\n    value: ''\n  };\n  return ReactTextareaAutocomplete;\n}(React.Component);\n\nexport { ReactTextareaAutocomplete };\nReactTextareaAutocomplete.propTypes = {\n  className: PropTypes.string,\n  closeOnClickOutside: PropTypes.bool,\n  containerClassName: PropTypes.string,\n  containerStyle: PropTypes.object,\n  disableMentions: PropTypes.bool,\n  dropdownClassName: PropTypes.string,\n  dropdownStyle: PropTypes.object,\n  itemClassName: PropTypes.string,\n  itemStyle: PropTypes.object,\n  listClassName: PropTypes.string,\n  listStyle: PropTypes.object,\n  loaderClassName: PropTypes.string,\n  loaderStyle: PropTypes.object,\n  loadingComponent: PropTypes.elementType,\n  minChar: PropTypes.number,\n  onBlur: PropTypes.func,\n  onCaretPositionChange: PropTypes.func,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  shouldSubmit: PropTypes.func,\n  style: PropTypes.object,\n  SuggestionList: PropTypes.elementType,\n  trigger: triggerPropsCheck,\n  value: PropTypes.string\n};","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","React","PropTypes","Textarea","getCaretCoordinates","isValidElementType","clsx","List","DefaultSuggestionList","DEFAULT_CARET_POSITION","defaultScrollToItem","errorMessage","triggerPropsCheck","CommandItem","UserItem","ReactTextareaAutocomplete","_super","props","_this","getSelectionPosition","textareaRef","selectionEnd","selectionStart","getSelectedText","_a","state","value","substr","setCaretPosition","position","focus","setSelectionRange","getCaretPosition","_defaultShouldSubmit","event","key","shiftKey","nativeEvent","isComposing","_handleKeyDown","shouldSubmit","dropdownRef","preventDefault","_onEnter","_onSpace","_closeAutocomplete","trigger","currentTrigger","data","_replaceWord","handleSubmit","replaceWord","hasFocus","matches","lastWordRegex","match","exec","slice","lastWord","spaces","newWord","textBeforeWord","textAfterCaret","newText","setState","e","CustomEvent","bubbles","dispatchEvent","onChange","_onSelect","newToken","closeCommandsList","closeMentionsList","showCommandsList","showMentionsList","_b","stateTrigger","textareaValue","computeCaretPosition","token","startToken","Number","isInteger","Error","textToModify","startOfTokenPosition","lastIndexOf","newTokenString","caretPosition","concat","text","newCaretPosition","modifiedText","substring","valueToReplace","replace","dataLoading","_getItemOnSelect","paramTrigger","triggerSettings","_getCurrentTriggerSettings","callback","item","_getTextToReplace","actualToken","output","textToReplace","_getValuesFromProvider","component","dataProvider","isArray","_getSuggestions","left","top","_cleanUpProps","notSafe","prop","includes","_isCommand","tokens","split","_changeHandler","minChar","movePopupAsYouType","onCaretPositionChange","textarea","target","persist","lastToken","triggerTokens","keys","join","triggerNorWhitespace","regex","RegExp","tokenMatch","trim","find","a","_c","newLeft","newTop","scrollTop","err","message","_selectHandler","onSelect","_onClickAndBlurHandler","closeOnClickOutside","onBlur","el","relatedTarget","Node","contains","_onScrollHandler","_dropdownScroll","scrollToItem","getTriggerProps","selectedItem","suggestionData","triggerProps","getSelectedItem","getTextToReplace","values","currentCommands_1","getCommands","setDropdownRef","element","loadingComponent","getDerivedStateFromProps","propsValue","renderSuggestionListContainer","disableMentions","dropdownClassName","dropdownStyle","itemClassName","itemStyle","listClassName","SuggestionItem","SuggestionList","createElement","className","ref","style","dropdownScroll","render","containerClassName","containerStyle","maxRows","grow","onClick","onFocus","onKeyDown","onScroll","innerRef","additionalTextareaProps","defaultValue","undefined","defaultProps","Component","propTypes","string","bool","object","listStyle","loaderClassName","loaderStyle","elementType","number","func"],"sources":["/home/betty/web-app-practice/memory-game/client/node_modules/stream-chat-react/dist/components/AutoCompleteTextarea/Textarea.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Textarea from 'react-textarea-autosize';\nimport getCaretCoordinates from 'textarea-caret';\nimport { isValidElementType } from 'react-is';\nimport clsx from 'clsx';\nimport { List as DefaultSuggestionList } from './List';\nimport { DEFAULT_CARET_POSITION, defaultScrollToItem, errorMessage, triggerPropsCheck, } from './utils';\nimport { CommandItem } from '../CommandItem/CommandItem';\nimport { UserItem } from '../UserItem/UserItem';\nvar ReactTextareaAutocomplete = /** @class */ (function (_super) {\n    __extends(ReactTextareaAutocomplete, _super);\n    function ReactTextareaAutocomplete(props) {\n        var _this = _super.call(this, props) || this;\n        _this.getSelectionPosition = function () {\n            if (!_this.textareaRef)\n                return null;\n            return {\n                selectionEnd: _this.textareaRef.selectionEnd,\n                selectionStart: _this.textareaRef.selectionStart,\n            };\n        };\n        _this.getSelectedText = function () {\n            if (!_this.textareaRef)\n                return null;\n            var _a = _this.textareaRef, selectionEnd = _a.selectionEnd, selectionStart = _a.selectionStart;\n            if (selectionStart === selectionEnd)\n                return null;\n            return _this.state.value.substr(selectionStart, selectionEnd - selectionStart);\n        };\n        _this.setCaretPosition = function (position) {\n            if (position === void 0) { position = 0; }\n            if (!_this.textareaRef)\n                return;\n            _this.textareaRef.focus();\n            _this.textareaRef.setSelectionRange(position, position);\n        };\n        _this.getCaretPosition = function () {\n            if (!_this.textareaRef)\n                return 0;\n            return _this.textareaRef.selectionEnd;\n        };\n        /**\n         * isComposing prevents double submissions in Korean and other languages.\n         * starting point for a read:\n         * https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/isComposing\n         * In the long term, the fix should happen by handling keypress, but changing this has unknown implications.\n         * @param event React.KeyboardEvent\n         */\n        _this._defaultShouldSubmit = function (event) {\n            return event.key === 'Enter' && !event.shiftKey && !event.nativeEvent.isComposing;\n        };\n        _this._handleKeyDown = function (event) {\n            var _a = _this.props.shouldSubmit, shouldSubmit = _a === void 0 ? _this._defaultShouldSubmit : _a;\n            // prevent default behaviour when the selection list is rendered\n            if ((event.key === 'ArrowUp' || event.key === 'ArrowDown') && _this.dropdownRef)\n                event.preventDefault();\n            if (shouldSubmit === null || shouldSubmit === void 0 ? void 0 : shouldSubmit(event))\n                return _this._onEnter(event);\n            if (event.key === ' ')\n                return _this._onSpace(event);\n            if (event.key === 'Escape')\n                return _this._closeAutocomplete();\n        };\n        _this._onEnter = function (event) {\n            if (!_this.textareaRef)\n                return;\n            var trigger = _this.state.currentTrigger;\n            if (!trigger || !_this.state.data) {\n                // trigger a submit\n                _this._replaceWord();\n                if (_this.textareaRef) {\n                    _this.textareaRef.selectionEnd = 0;\n                }\n                _this.props.handleSubmit(event);\n                _this._closeAutocomplete();\n            }\n        };\n        _this._onSpace = function () {\n            if (!_this.props.replaceWord || !_this.textareaRef)\n                return;\n            // don't change characters if the element doesn't have focus\n            var hasFocus = _this.textareaRef.matches(':focus');\n            if (!hasFocus)\n                return;\n            _this._replaceWord();\n        };\n        _this._replaceWord = function () {\n            var value = _this.state.value;\n            var lastWordRegex = /([^\\s]+)(\\s*)$/;\n            var match = lastWordRegex.exec(value.slice(0, _this.getCaretPosition()));\n            var lastWord = match && match[1];\n            if (!lastWord)\n                return;\n            var spaces = match[2];\n            var newWord = _this.props.replaceWord(lastWord);\n            if (newWord == null)\n                return;\n            var textBeforeWord = value.slice(0, _this.getCaretPosition() - match[0].length);\n            var textAfterCaret = value.slice(_this.getCaretPosition(), -1);\n            var newText = textBeforeWord + newWord + spaces + textAfterCaret;\n            _this.setState({\n                value: newText,\n            }, function () {\n                // fire onChange event after successful selection\n                var e = new CustomEvent('change', { bubbles: true });\n                _this.textareaRef.dispatchEvent(e);\n                if (_this.props.onChange)\n                    _this.props.onChange(e);\n            });\n        };\n        _this._onSelect = function (newToken) {\n            var _a = _this.props, closeCommandsList = _a.closeCommandsList, closeMentionsList = _a.closeMentionsList, onChange = _a.onChange, showCommandsList = _a.showCommandsList, showMentionsList = _a.showMentionsList;\n            var _b = _this.state, stateTrigger = _b.currentTrigger, selectionEnd = _b.selectionEnd, textareaValue = _b.value;\n            var currentTrigger = showCommandsList ? '/' : showMentionsList ? '@' : stateTrigger;\n            if (!currentTrigger)\n                return;\n            var computeCaretPosition = function (position, token, startToken) {\n                switch (position) {\n                    case 'start':\n                        return startToken;\n                    case 'next':\n                    case 'end':\n                        return startToken + token.length;\n                    default:\n                        if (!Number.isInteger(position)) {\n                            throw new Error('RTA: caretPosition should be \"start\", \"next\", \"end\" or number.');\n                        }\n                        return position;\n                }\n            };\n            var textToModify = showCommandsList\n                ? '/'\n                : showMentionsList\n                    ? '@'\n                    : textareaValue.slice(0, selectionEnd);\n            var startOfTokenPosition = textToModify.lastIndexOf(currentTrigger);\n            // we add space after emoji is selected if a caret position is next\n            var newTokenString = newToken.caretPosition === 'next' ? \"\".concat(newToken.text, \" \") : newToken.text;\n            var newCaretPosition = computeCaretPosition(newToken.caretPosition, newTokenString, startOfTokenPosition);\n            var modifiedText = textToModify.substring(0, startOfTokenPosition) + newTokenString;\n            var valueToReplace = textareaValue.replace(textToModify, modifiedText);\n            // set the new textarea value and after that set the caret back to its position\n            _this.setState({\n                dataLoading: false,\n                value: valueToReplace,\n            }, function () {\n                // fire onChange event after successful selection\n                var e = new CustomEvent('change', { bubbles: true });\n                _this.textareaRef.dispatchEvent(e);\n                if (onChange)\n                    onChange(e);\n                _this.setCaretPosition(newCaretPosition);\n            });\n            _this._closeAutocomplete();\n            if (showCommandsList)\n                closeCommandsList();\n            if (showMentionsList)\n                closeMentionsList();\n        };\n        _this._getItemOnSelect = function (paramTrigger) {\n            var stateTrigger = _this.state.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !triggerSettings)\n                return null;\n            var callback = triggerSettings.callback;\n            if (!callback)\n                return null;\n            return function (item) {\n                if (typeof callback !== 'function') {\n                    throw new Error('Output functor is not defined! You have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n                }\n                if (callback) {\n                    return callback(item, currentTrigger);\n                }\n                return null;\n            };\n        };\n        _this._getTextToReplace = function (paramTrigger) {\n            var _a = _this.state, actualToken = _a.actualToken, stateTrigger = _a.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings(paramTrigger);\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !triggerSettings)\n                return null;\n            var output = triggerSettings.output;\n            return function (item) {\n                if (typeof item === 'object' && (!output || typeof output !== 'function')) {\n                    throw new Error('Output functor is not defined! If you are using items as object you have to define \"output\" function. https://github.com/webscopeio/react-textarea-autocomplete#trigger-type');\n                }\n                if (output) {\n                    var textToReplace = output(item, currentTrigger);\n                    if (!textToReplace || typeof textToReplace === 'number') {\n                        throw new Error(\"Output functor should return string or object in shape {text: string, caretPosition: string | number}.\\nGot \\\"\".concat(String(textToReplace), \"\\\". Check the implementation for trigger \\\"\").concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\\nSee https://github.com/webscopeio/react-textarea-autocomplete#trigger-type for more informations.\\n\"));\n                    }\n                    if (typeof textToReplace === 'string') {\n                        return {\n                            caretPosition: DEFAULT_CARET_POSITION,\n                            text: textToReplace,\n                        };\n                    }\n                    if (!textToReplace.text && currentTrigger !== ':') {\n                        throw new Error(\"Output \\\"text\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n                    }\n                    if (!textToReplace.caretPosition) {\n                        throw new Error(\"Output \\\"caretPosition\\\" is not defined! Object should has shape {text: string, caretPosition: string | number}. Check the implementation for trigger \\\"\".concat(currentTrigger, \"\\\" and its token \\\"\").concat(actualToken, \"\\\"\\n\"));\n                    }\n                    return textToReplace;\n                }\n                if (typeof item !== 'string') {\n                    throw new Error('Output item should be string\\n');\n                }\n                return {\n                    caretPosition: DEFAULT_CARET_POSITION,\n                    text: \"\".concat(currentTrigger).concat(item).concat(currentTrigger),\n                };\n            };\n        };\n        _this._getCurrentTriggerSettings = function (paramTrigger) {\n            var stateTrigger = _this.state.currentTrigger;\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger)\n                return null;\n            return _this.props.trigger[currentTrigger];\n        };\n        _this._getValuesFromProvider = function () {\n            var _a = _this.state, actualToken = _a.actualToken, currentTrigger = _a.currentTrigger;\n            var triggerSettings = _this._getCurrentTriggerSettings();\n            if (!currentTrigger || !triggerSettings)\n                return;\n            var component = triggerSettings.component, dataProvider = triggerSettings.dataProvider;\n            if (typeof dataProvider !== 'function') {\n                throw new Error('Trigger provider has to be a function!');\n            }\n            _this.setState({ dataLoading: true });\n            // Modified: send the full text to support / style commands\n            dataProvider(actualToken, _this.state.value, function (data, token) {\n                // Make sure that the result is still relevant for current query\n                if (token !== _this.state.actualToken)\n                    return;\n                if (!Array.isArray(data)) {\n                    throw new Error('Trigger provider has to provide an array!');\n                }\n                if (!isValidElementType(component)) {\n                    throw new Error('Component should be defined!');\n                }\n                // throw away if we resolved old trigger\n                if (currentTrigger !== _this.state.currentTrigger)\n                    return;\n                // if we haven't resolved any data let's close the autocomplete\n                if (!data.length) {\n                    _this._closeAutocomplete();\n                    return;\n                }\n                _this.setState({\n                    component: component,\n                    data: data,\n                    dataLoading: false,\n                });\n            });\n        };\n        _this._getSuggestions = function (paramTrigger) {\n            var _a = _this.state, stateTrigger = _a.currentTrigger, data = _a.data;\n            var currentTrigger = paramTrigger || stateTrigger;\n            if (!currentTrigger || !data || (data && !data.length))\n                return null;\n            return data;\n        };\n        /**\n         * Close autocomplete, also clean up trigger (to avoid slow promises)\n         */\n        _this._closeAutocomplete = function () {\n            _this.setState({\n                currentTrigger: null,\n                data: null,\n                dataLoading: false,\n                left: null,\n                top: null,\n            });\n        };\n        _this._cleanUpProps = function () {\n            var props = __assign({}, _this.props);\n            var notSafe = [\n                'additionalTextareaProps',\n                'className',\n                'closeCommandsList',\n                'closeMentionsList',\n                'closeOnClickOutside',\n                'containerClassName',\n                'containerStyle',\n                'disableMentions',\n                'dropdownClassName',\n                'dropdownStyle',\n                'grow',\n                'handleSubmit',\n                'innerRef',\n                'itemClassName',\n                'itemStyle',\n                'listClassName',\n                'listStyle',\n                'loaderClassName',\n                'loaderStyle',\n                'loadingComponent',\n                'minChar',\n                'movePopupAsYouType',\n                'onCaretPositionChange',\n                'onChange',\n                'ref',\n                'replaceWord',\n                'scrollToItem',\n                'shouldSubmit',\n                'showCommandsList',\n                'showMentionsList',\n                'SuggestionItem',\n                'SuggestionList',\n                'trigger',\n                'value',\n            ];\n            // eslint-disable-next-line\n            for (var prop in props) {\n                if (notSafe.includes(prop))\n                    delete props[prop];\n            }\n            return props;\n        };\n        _this._isCommand = function (text) {\n            if (text[0] !== '/')\n                return false;\n            var tokens = text.split(' ');\n            return tokens.length <= 1;\n        };\n        _this._changeHandler = function (e) {\n            var _a = _this.props, minChar = _a.minChar, movePopupAsYouType = _a.movePopupAsYouType, onCaretPositionChange = _a.onCaretPositionChange, onChange = _a.onChange, trigger = _a.trigger;\n            var _b = _this.state, left = _b.left, top = _b.top;\n            var textarea = e.target;\n            var selectionEnd = textarea.selectionEnd, selectionStart = textarea.selectionStart, value = textarea.value;\n            if (onChange) {\n                e.persist();\n                onChange(e);\n            }\n            if (onCaretPositionChange)\n                onCaretPositionChange(_this.getCaretPosition());\n            _this.setState({ value: value });\n            var currentTrigger;\n            var lastToken;\n            if (_this._isCommand(value)) {\n                currentTrigger = '/';\n                lastToken = value;\n            }\n            else {\n                var triggerTokens = Object.keys(trigger).join().replace('/', '');\n                var triggerNorWhitespace = \"[^\\\\s\".concat(triggerTokens, \"]*\");\n                var regex = new RegExp(\"(?!^|\\\\W)?[\".concat(triggerTokens, \"]\").concat(triggerNorWhitespace, \"\\\\s?\").concat(triggerNorWhitespace, \"$\"), 'g');\n                var tokenMatch = value.slice(0, selectionEnd).match(regex);\n                lastToken = tokenMatch && tokenMatch[tokenMatch.length - 1].trim();\n                currentTrigger = (lastToken && Object.keys(trigger).find(function (a) { return a === lastToken[0]; })) || null;\n            }\n            /*\n             if we lost the trigger token or there is no following character we want to close\n             the autocomplete\n            */\n            if (!lastToken || lastToken.length <= minChar) {\n                _this._closeAutocomplete();\n                return;\n            }\n            var actualToken = lastToken.slice(1);\n            // if trigger is not configured step out from the function, otherwise proceed\n            if (!currentTrigger)\n                return;\n            if (movePopupAsYouType ||\n                (top === null && left === null) ||\n                // if we have single char - trigger it means we want to re-position the autocomplete\n                lastToken.length === 1) {\n                var _c = getCaretCoordinates(textarea, selectionEnd), newLeft = _c.left, newTop = _c.top;\n                _this.setState({\n                    // make position relative to textarea\n                    left: newLeft,\n                    top: newTop - _this.textareaRef.scrollTop || 0,\n                });\n            }\n            _this.setState({\n                actualToken: actualToken,\n                currentTrigger: currentTrigger,\n                selectionEnd: selectionEnd,\n                selectionStart: selectionStart,\n            }, function () {\n                try {\n                    _this._getValuesFromProvider();\n                }\n                catch (err) {\n                    errorMessage(err.message);\n                }\n            });\n        };\n        _this._selectHandler = function (e) {\n            var _a = _this.props, onCaretPositionChange = _a.onCaretPositionChange, onSelect = _a.onSelect;\n            if (onCaretPositionChange)\n                onCaretPositionChange(_this.getCaretPosition());\n            if (onSelect) {\n                e.persist();\n                onSelect(e);\n            }\n        };\n        // The textarea itself is outside the auto-select dropdown.\n        _this._onClickAndBlurHandler = function (e) {\n            var _a = _this.props, closeOnClickOutside = _a.closeOnClickOutside, onBlur = _a.onBlur;\n            // If this is a click: e.target is the textarea, and e.relatedTarget is the thing\n            // that was actually clicked. If we clicked inside the auto-select dropdown, then\n            // that's not a blur, from the auto-select point of view, so then do nothing.\n            var el = e.relatedTarget;\n            if (_this.dropdownRef && el instanceof Node && _this.dropdownRef.contains(el)) {\n                return;\n            }\n            if (closeOnClickOutside)\n                _this._closeAutocomplete();\n            if (onBlur) {\n                e.persist();\n                onBlur(e);\n            }\n        };\n        _this._onScrollHandler = function () { return _this._closeAutocomplete(); };\n        _this._dropdownScroll = function (item) {\n            var scrollToItem = _this.props.scrollToItem;\n            if (!scrollToItem)\n                return;\n            if (scrollToItem === true) {\n                defaultScrollToItem(_this.dropdownRef, item);\n                return;\n            }\n            if (typeof scrollToItem !== 'function' || scrollToItem.length !== 2) {\n                throw new Error('`scrollToItem` has to be boolean (true for default implementation) or function with two parameters: container, item.');\n            }\n            scrollToItem(_this.dropdownRef, item);\n        };\n        _this.getTriggerProps = function () {\n            var _a = _this.props, showCommandsList = _a.showCommandsList, showMentionsList = _a.showMentionsList, trigger = _a.trigger;\n            var _b = _this.state, component = _b.component, currentTrigger = _b.currentTrigger, selectionEnd = _b.selectionEnd, value = _b.value;\n            var selectedItem = _this._getItemOnSelect();\n            var suggestionData = _this._getSuggestions();\n            var textToReplace = _this._getTextToReplace();\n            var triggerProps = {\n                component: component,\n                currentTrigger: currentTrigger,\n                getSelectedItem: selectedItem,\n                getTextToReplace: textToReplace,\n                selectionEnd: selectionEnd,\n                value: value,\n                values: suggestionData,\n            };\n            if ((showCommandsList && trigger['/']) || (showMentionsList && trigger['@'])) {\n                var currentCommands_1;\n                var getCommands = trigger[showCommandsList ? '/' : '@'].dataProvider;\n                getCommands === null || getCommands === void 0 ? void 0 : getCommands('', showCommandsList ? '/' : '@', function (data) {\n                    currentCommands_1 = data;\n                });\n                triggerProps.component = showCommandsList ? CommandItem : UserItem;\n                triggerProps.currentTrigger = showCommandsList ? '/' : '@';\n                triggerProps.getTextToReplace = _this._getTextToReplace(showCommandsList ? '/' : '@');\n                triggerProps.getSelectedItem = _this._getItemOnSelect(showCommandsList ? '/' : '@');\n                triggerProps.selectionEnd = 1;\n                triggerProps.value = showCommandsList ? '/' : '@';\n                triggerProps.values = currentCommands_1;\n            }\n            return triggerProps;\n        };\n        _this.setDropdownRef = function (element) {\n            _this.dropdownRef = element;\n        };\n        var _a = _this.props, loadingComponent = _a.loadingComponent, trigger = _a.trigger, value = _a.value;\n        // TODO: it would be better to have the parent control state...\n        // if (value) this.state.value = value;\n        if (!loadingComponent) {\n            throw new Error('RTA: loadingComponent is not defined');\n        }\n        if (!trigger) {\n            throw new Error('RTA: trigger is not defined');\n        }\n        _this.state = {\n            actualToken: '',\n            component: null,\n            currentTrigger: null,\n            data: null,\n            dataLoading: false,\n            left: null,\n            selectionEnd: 0,\n            selectionStart: 0,\n            top: null,\n            value: value || '',\n        };\n        return _this;\n    }\n    /**\n     * setup to emulate the UNSAFE_componentWillReceiveProps\n     */\n    ReactTextareaAutocomplete.getDerivedStateFromProps = function (props, state) {\n        if (props.value !== state.propsValue || !state.value) {\n            return { propsValue: props.value, value: props.value };\n        }\n        else {\n            return null;\n        }\n    };\n    ReactTextareaAutocomplete.prototype.renderSuggestionListContainer = function () {\n        var _a = this.props, disableMentions = _a.disableMentions, dropdownClassName = _a.dropdownClassName, dropdownStyle = _a.dropdownStyle, itemClassName = _a.itemClassName, itemStyle = _a.itemStyle, listClassName = _a.listClassName, SuggestionItem = _a.SuggestionItem, _b = _a.SuggestionList, SuggestionList = _b === void 0 ? DefaultSuggestionList : _b;\n        var triggerProps = this.getTriggerProps();\n        if (triggerProps.values &&\n            triggerProps.currentTrigger &&\n            !(disableMentions && triggerProps.currentTrigger === '@')) {\n            return (React.createElement(\"div\", { className: clsx('rta__autocomplete', 'str-chat__suggestion-list-container', dropdownClassName), ref: this.setDropdownRef, style: dropdownStyle },\n                React.createElement(SuggestionList, __assign({ className: clsx('str-chat__suggestion-list', listClassName), dropdownScroll: this._dropdownScroll, itemClassName: clsx('str-chat__suggestion-list-item', itemClassName), itemStyle: itemStyle, onSelect: this._onSelect, SuggestionItem: SuggestionItem }, triggerProps))));\n        }\n        return null;\n    };\n    ReactTextareaAutocomplete.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, className = _a.className, containerClassName = _a.containerClassName, containerStyle = _a.containerStyle, style = _a.style;\n        var maxRows = this.props.maxRows;\n        var _b = this.state, dataLoading = _b.dataLoading, value = _b.value;\n        if (!this.props.grow)\n            maxRows = 1;\n        // By setting defaultValue to undefined, avoid error:\n        // ForwardRef(TextareaAutosize) contains a textarea with both value and defaultValue props.\n        // Textarea elements must be either controlled or uncontrolled\n        return (React.createElement(\"div\", { className: clsx('rta', containerClassName, {\n                'rta--loading': dataLoading,\n            }), style: containerStyle },\n            this.renderSuggestionListContainer(),\n            React.createElement(Textarea, __assign({ \"data-testid\": 'message-input' }, this._cleanUpProps(), { className: clsx('rta__textarea', className), maxRows: maxRows, onBlur: this._onClickAndBlurHandler, onChange: this._changeHandler, onClick: this._onClickAndBlurHandler, onFocus: this.props.onFocus, onKeyDown: this._handleKeyDown, onScroll: this._onScrollHandler, onSelect: this._selectHandler, ref: function (ref) {\n                    var _a;\n                    (_a = _this.props) === null || _a === void 0 ? void 0 : _a.innerRef(ref);\n                    _this.textareaRef = ref;\n                }, style: style, value: value }, this.props.additionalTextareaProps, { defaultValue: undefined }))));\n    };\n    ReactTextareaAutocomplete.defaultProps = {\n        closeOnClickOutside: true,\n        maxRows: 10,\n        minChar: 1,\n        movePopupAsYouType: false,\n        scrollToItem: true,\n        value: '',\n    };\n    return ReactTextareaAutocomplete;\n}(React.Component));\nexport { ReactTextareaAutocomplete };\nReactTextareaAutocomplete.propTypes = {\n    className: PropTypes.string,\n    closeOnClickOutside: PropTypes.bool,\n    containerClassName: PropTypes.string,\n    containerStyle: PropTypes.object,\n    disableMentions: PropTypes.bool,\n    dropdownClassName: PropTypes.string,\n    dropdownStyle: PropTypes.object,\n    itemClassName: PropTypes.string,\n    itemStyle: PropTypes.object,\n    listClassName: PropTypes.string,\n    listStyle: PropTypes.object,\n    loaderClassName: PropTypes.string,\n    loaderStyle: PropTypes.object,\n    loadingComponent: PropTypes.elementType,\n    minChar: PropTypes.number,\n    onBlur: PropTypes.func,\n    onCaretPositionChange: PropTypes.func,\n    onChange: PropTypes.func,\n    onSelect: PropTypes.func,\n    shouldSubmit: PropTypes.func,\n    style: PropTypes.object,\n    SuggestionList: PropTypes.elementType,\n    trigger: triggerPropsCheck,\n    value: PropTypes.string,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}