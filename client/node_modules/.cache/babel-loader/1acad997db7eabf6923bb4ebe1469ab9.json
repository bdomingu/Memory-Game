{"ast":null,"code":"import { systemToComponent as t } from \"@virtuoso.dev/react-urx\";\nimport * as e from \"@virtuoso.dev/urx\";\nimport * as n from \"react\";\nimport { useLayoutEffect as o, useEffect as r, useRef as i, useCallback as a, createElement as l, useContext as s } from \"react\";\nimport { flushSync as u } from \"react-dom\";\n\nfunction c() {\n  return c = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var n = arguments[e];\n\n      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o]);\n    }\n\n    return t;\n  }, c.apply(this, arguments);\n}\n\nfunction m(t, e) {\n  if (null == t) return {};\n  var n,\n      o,\n      r = {},\n      i = Object.keys(t);\n\n  for (o = 0; o < i.length; o++) e.indexOf(n = i[o]) >= 0 || (r[n] = t[n]);\n\n  return r;\n}\n\nfunction d(t, e) {\n  (null == e || e > t.length) && (e = t.length);\n\n  for (var n = 0, o = new Array(e); n < e; n++) o[n] = t[n];\n\n  return o;\n}\n\nfunction f(t, e) {\n  var n = \"undefined\" != typeof Symbol && t[Symbol.iterator] || t[\"@@iterator\"];\n  if (n) return (n = n.call(t)).next.bind(n);\n\n  if (Array.isArray(t) || (n = function (t, e) {\n    if (t) {\n      if (\"string\" == typeof t) return d(t, e);\n      var n = Object.prototype.toString.call(t).slice(8, -1);\n      return \"Object\" === n && t.constructor && (n = t.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(t) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? d(t, e) : void 0;\n    }\n  }(t)) || e && t && \"number\" == typeof t.length) {\n    n && (t = n);\n    var o = 0;\n    return function () {\n      return o >= t.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: t[o++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar p,\n    h,\n    g = \"undefined\" != typeof document ? o : r;\n!function (t) {\n  t[t.DEBUG = 0] = \"DEBUG\", t[t.INFO = 1] = \"INFO\", t[t.WARN = 2] = \"WARN\", t[t.ERROR = 3] = \"ERROR\";\n}(h || (h = {}));\nvar v = ((p = {})[h.DEBUG] = \"debug\", p[h.INFO] = \"log\", p[h.WARN] = \"warn\", p[h.ERROR] = \"error\", p),\n    S = e.system(function () {\n  var t = e.statefulStream(h.ERROR);\n  return {\n    log: e.statefulStream(function (n, o, r) {\n      var i;\n      void 0 === r && (r = h.INFO), r >= (null != (i = (\"undefined\" == typeof globalThis ? window : globalThis).VIRTUOSO_LOG_LEVEL) ? i : e.getValue(t)) && console[v[r]](\"%creact-virtuoso: %c%s %o\", \"color: #0253b3; font-weight: bold\", \"color: initial\", n, o);\n    }),\n    logLevel: t\n  };\n}, [], {\n  singleton: !0\n});\n\nfunction I(t, e) {\n  void 0 === e && (e = !0);\n\n  var n = i(null),\n      o = function (t) {};\n\n  if (\"undefined\" != typeof ResizeObserver) {\n    var r = new ResizeObserver(function (e) {\n      var n = e[0].target;\n      null !== n.offsetParent && t(n);\n    });\n\n    o = function (t) {\n      t && e ? (r.observe(t), n.current = t) : (n.current && r.unobserve(n.current), n.current = null);\n    };\n  }\n\n  return {\n    ref: n,\n    callbackRef: o\n  };\n}\n\nfunction C(t, e) {\n  return void 0 === e && (e = !0), I(t, e).callbackRef;\n}\n\nfunction T(t, e, n, o, r, i, a) {\n  return I(function (n) {\n    for (var l = function (t, e, n, o) {\n      var r = t.length;\n      if (0 === r) return null;\n\n      for (var i = [], a = 0; a < r; a++) {\n        var l = t.item(a);\n\n        if (l && void 0 !== l.dataset.index) {\n          var s = parseInt(l.dataset.index),\n              u = parseFloat(l.dataset.knownSize),\n              c = e(l, \"offsetHeight\");\n\n          if (0 === c && o(\"Zero-sized element, this should not happen\", {\n            child: l\n          }, h.ERROR), c !== u) {\n            var m = i[i.length - 1];\n            0 === i.length || m.size !== c || m.endIndex !== s - 1 ? i.push({\n              startIndex: s,\n              endIndex: s,\n              size: c\n            }) : i[i.length - 1].endIndex++;\n          }\n        }\n      }\n\n      return i;\n    }(n.children, e, 0, r), s = n.parentElement; !s.dataset.virtuosoScroller;) s = s.parentElement;\n\n    var u = \"window\" === s.firstElementChild.dataset.viewportType,\n        c = a ? a.scrollTop : u ? window.pageYOffset || document.documentElement.scrollTop : s.scrollTop,\n        m = a ? a.scrollHeight : u ? document.documentElement.scrollHeight : s.scrollHeight,\n        d = a ? a.offsetHeight : u ? window.innerHeight : s.offsetHeight;\n    o({\n      scrollTop: Math.max(c, 0),\n      scrollHeight: m,\n      viewportHeight: d\n    }), null == i || i(function (t, e, n) {\n      return \"normal\" === e || null != e && e.endsWith(\"px\") || n(\"row-gap was not resolved to pixel value correctly\", e, h.WARN), \"normal\" === e ? 0 : parseInt(null != e ? e : \"0\", 10);\n    }(0, getComputedStyle(n).rowGap, r)), null !== l && t(l);\n  }, n);\n}\n\nfunction w(t, e) {\n  return Math.round(t.getBoundingClientRect()[e]);\n}\n\nfunction x(t, e) {\n  return Math.abs(t - e) < 1.01;\n}\n\nfunction b(t, n, o, l, s) {\n  void 0 === l && (l = e.noop);\n  var c = i(null),\n      m = i(null),\n      d = i(null),\n      f = i(!1),\n      p = a(function (e) {\n    var o = e.target,\n        r = o === window || o === document,\n        i = r ? window.pageYOffset || document.documentElement.scrollTop : o.scrollTop,\n        a = r ? document.documentElement.scrollHeight : o.scrollHeight,\n        l = r ? window.innerHeight : o.offsetHeight,\n        s = function () {\n      t({\n        scrollTop: Math.max(i, 0),\n        scrollHeight: a,\n        viewportHeight: l\n      });\n    };\n\n    f.current ? u(s) : s(), f.current = !1, null !== m.current && (i === m.current || i <= 0 || i === a - l) && (m.current = null, n(!0), d.current && (clearTimeout(d.current), d.current = null));\n  }, [t, n]);\n  return r(function () {\n    var t = s || c.current;\n    return l(s || c.current), p({\n      target: t\n    }), t.addEventListener(\"scroll\", p, {\n      passive: !0\n    }), function () {\n      l(null), t.removeEventListener(\"scroll\", p);\n    };\n  }, [c, p, o, l, s]), {\n    scrollerRef: c,\n    scrollByCallback: function (t) {\n      f.current = !0, c.current.scrollBy(t);\n    },\n    scrollToCallback: function (e) {\n      var o = c.current;\n\n      if (o && (!(\"offsetHeight\" in o) || 0 !== o.offsetHeight)) {\n        var r,\n            i,\n            a,\n            l = \"smooth\" === e.behavior;\n        if (o === window ? (i = Math.max(w(document.documentElement, \"height\"), document.documentElement.scrollHeight), r = window.innerHeight, a = document.documentElement.scrollTop) : (i = o.scrollHeight, r = w(o, \"height\"), a = o.scrollTop), e.top = Math.ceil(Math.max(Math.min(i - r, e.top), 0)), x(r, i) || e.top === a) return t({\n          scrollTop: a,\n          scrollHeight: i,\n          viewportHeight: r\n        }), void (l && n(!0));\n        l ? (m.current = e.top, d.current && clearTimeout(d.current), d.current = setTimeout(function () {\n          d.current = null, m.current = null, n(!0);\n        }, 1e3)) : m.current = null, o.scrollTo(e);\n      }\n    }\n  };\n}\n\nvar y = e.system(function () {\n  var t = e.stream(),\n      n = e.stream(),\n      o = e.statefulStream(0),\n      r = e.stream(),\n      i = e.statefulStream(0),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(0),\n      u = e.statefulStream(0),\n      c = e.statefulStream(0),\n      m = e.statefulStream(0),\n      d = e.stream(),\n      f = e.stream(),\n      p = e.statefulStream(!1),\n      h = e.statefulStream(!1);\n  return e.connect(e.pipe(t, e.map(function (t) {\n    return t.scrollTop;\n  })), n), e.connect(e.pipe(t, e.map(function (t) {\n    return t.scrollHeight;\n  })), l), e.connect(n, i), {\n    scrollContainerState: t,\n    scrollTop: n,\n    viewportHeight: a,\n    headerHeight: s,\n    fixedHeaderHeight: u,\n    fixedFooterHeight: c,\n    footerHeight: m,\n    scrollHeight: l,\n    smoothScrollTargetReached: r,\n    react18ConcurrentRendering: h,\n    scrollTo: d,\n    scrollBy: f,\n    statefulScrollTop: i,\n    deviation: o,\n    scrollingInProgress: p\n  };\n}, [], {\n  singleton: !0\n}),\n    H = {\n  lvl: 0\n};\n\nfunction E(t, e, n, o, r) {\n  return void 0 === o && (o = H), void 0 === r && (r = H), {\n    k: t,\n    v: e,\n    lvl: n,\n    l: o,\n    r: r\n  };\n}\n\nfunction R(t) {\n  return t === H;\n}\n\nfunction L() {\n  return H;\n}\n\nfunction k(t, e) {\n  if (R(t)) return H;\n  var n = t.k,\n      o = t.l,\n      r = t.r;\n\n  if (e === n) {\n    if (R(o)) return r;\n    if (R(r)) return o;\n    var i = O(o);\n    return A(V(t, {\n      k: i[0],\n      v: i[1],\n      l: M(o)\n    }));\n  }\n\n  return A(V(t, e < n ? {\n    l: k(o, e)\n  } : {\n    r: k(r, e)\n  }));\n}\n\nfunction z(t, e, n) {\n  if (void 0 === n && (n = \"k\"), R(t)) return [-Infinity, void 0];\n  if (t[n] === e) return [t.k, t.v];\n\n  if (t[n] < e) {\n    var o = z(t.r, e, n);\n    return -Infinity === o[0] ? [t.k, t.v] : o;\n  }\n\n  return z(t.l, e, n);\n}\n\nfunction F(t, e, n) {\n  return R(t) ? E(e, n, 1) : e === t.k ? V(t, {\n    k: e,\n    v: n\n  }) : function (t) {\n    return D(G(t));\n  }(V(t, e < t.k ? {\n    l: F(t.l, e, n)\n  } : {\n    r: F(t.r, e, n)\n  }));\n}\n\nfunction B(t, e, n) {\n  if (R(t)) return [];\n  var o = t.k,\n      r = t.v,\n      i = t.r,\n      a = [];\n  return o > e && (a = a.concat(B(t.l, e, n))), o >= e && o <= n && a.push({\n    k: o,\n    v: r\n  }), o <= n && (a = a.concat(B(i, e, n))), a;\n}\n\nfunction P(t) {\n  return R(t) ? [] : [].concat(P(t.l), [{\n    k: t.k,\n    v: t.v\n  }], P(t.r));\n}\n\nfunction O(t) {\n  return R(t.r) ? [t.k, t.v] : O(t.r);\n}\n\nfunction M(t) {\n  return R(t.r) ? t.l : A(V(t, {\n    r: M(t.r)\n  }));\n}\n\nfunction V(t, e) {\n  return E(void 0 !== e.k ? e.k : t.k, void 0 !== e.v ? e.v : t.v, void 0 !== e.lvl ? e.lvl : t.lvl, void 0 !== e.l ? e.l : t.l, void 0 !== e.r ? e.r : t.r);\n}\n\nfunction U(t) {\n  return R(t) || t.lvl > t.r.lvl;\n}\n\nfunction A(t) {\n  var e = t.l,\n      n = t.r,\n      o = t.lvl;\n  if (n.lvl >= o - 1 && e.lvl >= o - 1) return t;\n\n  if (o > n.lvl + 1) {\n    if (U(e)) return G(V(t, {\n      lvl: o - 1\n    }));\n    if (R(e) || R(e.r)) throw new Error(\"Unexpected empty nodes\");\n    return V(e.r, {\n      l: V(e, {\n        r: e.r.l\n      }),\n      r: V(t, {\n        l: e.r.r,\n        lvl: o - 1\n      }),\n      lvl: o\n    });\n  }\n\n  if (U(t)) return D(V(t, {\n    lvl: o - 1\n  }));\n  if (R(n) || R(n.l)) throw new Error(\"Unexpected empty nodes\");\n  var r = n.l,\n      i = U(r) ? n.lvl - 1 : n.lvl;\n  return V(r, {\n    l: V(t, {\n      r: r.l,\n      lvl: o - 1\n    }),\n    r: D(V(n, {\n      l: r.r,\n      lvl: i\n    })),\n    lvl: r.lvl + 1\n  });\n}\n\nfunction W(t, e, n) {\n  return R(t) ? [] : N(B(t, z(t, e)[0], n), function (t) {\n    return {\n      index: t.k,\n      value: t.v\n    };\n  });\n}\n\nfunction N(t, e) {\n  var n = t.length;\n  if (0 === n) return [];\n\n  for (var o = e(t[0]), r = o.index, i = o.value, a = [], l = 1; l < n; l++) {\n    var s = e(t[l]),\n        u = s.index,\n        c = s.value;\n    a.push({\n      start: r,\n      end: u - 1,\n      value: i\n    }), r = u, i = c;\n  }\n\n  return a.push({\n    start: r,\n    end: Infinity,\n    value: i\n  }), a;\n}\n\nfunction D(t) {\n  var e = t.r,\n      n = t.lvl;\n  return R(e) || R(e.r) || e.lvl !== n || e.r.lvl !== n ? t : V(e, {\n    l: V(t, {\n      r: e.l\n    }),\n    lvl: n + 1\n  });\n}\n\nfunction G(t) {\n  var e = t.l;\n  return R(e) || e.lvl !== t.lvl ? t : V(e, {\n    r: V(t, {\n      l: e.r\n    })\n  });\n}\n\nfunction _(t, e, n, o) {\n  void 0 === o && (o = 0);\n\n  for (var r = t.length - 1; o <= r;) {\n    var i = Math.floor((o + r) / 2),\n        a = n(t[i], e);\n    if (0 === a) return i;\n\n    if (-1 === a) {\n      if (r - o < 2) return i - 1;\n      r = i - 1;\n    } else {\n      if (r === o) return i;\n      o = i + 1;\n    }\n  }\n\n  throw new Error(\"Failed binary finding record in array - \" + t.join(\",\") + \", searched for \" + e);\n}\n\nfunction j(t, e, n) {\n  return t[_(t, e, n)];\n}\n\nvar K = e.system(function () {\n  return {\n    recalcInProgress: e.statefulStream(!1)\n  };\n}, [], {\n  singleton: !0\n});\n\nfunction Y(t) {\n  var e = t.size,\n      n = t.startIndex,\n      o = t.endIndex;\n  return function (t) {\n    return t.start === n && (t.end === o || Infinity === t.end) && t.value === e;\n  };\n}\n\nfunction q(t, e) {\n  var n = t.index;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction Z(t, e) {\n  var n = t.offset;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction J(t) {\n  return {\n    index: t.index,\n    value: t\n  };\n}\n\nfunction $(t, e, n, o) {\n  var r = t,\n      i = 0,\n      a = 0,\n      l = 0,\n      s = 0;\n\n  if (0 !== e) {\n    l = r[s = _(r, e - 1, q)].offset;\n    var u = z(n, e - 1);\n    i = u[0], a = u[1], r.length && r[s].size === z(n, e)[1] && (s -= 1), r = r.slice(0, s + 1);\n  } else r = [];\n\n  for (var c, m = f(W(n, e, Infinity)); !(c = m()).done;) {\n    var d = c.value,\n        p = d.start,\n        h = d.value,\n        g = p - i,\n        v = g * a + l + g * o;\n    r.push({\n      offset: v,\n      size: h,\n      index: p\n    }), i = p, l = v, a = h;\n  }\n\n  return {\n    offsetTree: r,\n    lastIndex: i,\n    lastOffset: l,\n    lastSize: a\n  };\n}\n\nfunction Q(t, e) {\n  var n = e[0],\n      o = e[1],\n      r = e[3];\n  n.length > 0 && (0, e[2])(\"received item sizes\", n, h.DEBUG);\n  var i = t.sizeTree,\n      a = i,\n      l = 0;\n\n  if (o.length > 0 && R(i) && 2 === n.length) {\n    var s = n[0].size,\n        u = n[1].size;\n    a = o.reduce(function (t, e) {\n      return F(F(t, e, s), e + 1, u);\n    }, a);\n  } else {\n    var c = function (t, e) {\n      for (var n, o = R(t) ? 0 : Infinity, r = f(e); !(n = r()).done;) {\n        var i = n.value,\n            a = i.size,\n            l = i.startIndex,\n            s = i.endIndex;\n        if (o = Math.min(o, l), R(t)) t = F(t, 0, a);else {\n          var u = W(t, l - 1, s + 1);\n\n          if (!u.some(Y(i))) {\n            for (var c, m = !1, d = !1, p = f(u); !(c = p()).done;) {\n              var h = c.value,\n                  g = h.start,\n                  v = h.end,\n                  S = h.value;\n              m ? (s >= g || a === S) && (t = k(t, g)) : (d = S !== a, m = !0), v > s && s >= g && S !== a && (t = F(t, s + 1, S));\n            }\n\n            d && (t = F(t, l, a));\n          }\n        }\n      }\n\n      return [t, o];\n    }(a, n);\n\n    a = c[0], l = c[1];\n  }\n\n  if (a === i) return t;\n  var m = $(t.offsetTree, l, a, r),\n      d = m.offsetTree;\n  return {\n    sizeTree: a,\n    offsetTree: d,\n    lastIndex: m.lastIndex,\n    lastOffset: m.lastOffset,\n    lastSize: m.lastSize,\n    groupOffsetTree: o.reduce(function (t, e) {\n      return F(t, e, X(e, d, r));\n    }, L()),\n    groupIndices: o\n  };\n}\n\nfunction X(t, e, n) {\n  if (0 === e.length) return 0;\n  var o = j(e, t, q),\n      r = t - o.index,\n      i = o.size * r + (r - 1) * n + o.offset;\n  return i > 0 ? i + n : i;\n}\n\nfunction tt(t, e, n) {\n  if (function (t) {\n    return void 0 !== t.groupIndex;\n  }(t)) return e.groupIndices[t.groupIndex] + 1;\n  var o = et(\"LAST\" === t.index ? n : t.index, e);\n  return Math.max(0, o, Math.min(n, o));\n}\n\nfunction et(t, e) {\n  if (!nt(e)) return t;\n\n  for (var n = 0; e.groupIndices[n] <= t + n;) n++;\n\n  return t + n;\n}\n\nfunction nt(t) {\n  return !R(t.groupOffsetTree);\n}\n\nvar ot = {\n  offsetHeight: \"height\",\n  offsetWidth: \"width\"\n},\n    rt = e.system(function (t) {\n  var n = t[0].log,\n      o = t[1].recalcInProgress,\n      r = e.stream(),\n      i = e.stream(),\n      a = e.statefulStreamFromEmitter(i, 0),\n      l = e.stream(),\n      s = e.stream(),\n      u = e.statefulStream(0),\n      m = e.statefulStream([]),\n      d = e.statefulStream(void 0),\n      f = e.statefulStream(void 0),\n      p = e.statefulStream(function (t, e) {\n    return w(t, ot[e]);\n  }),\n      g = e.statefulStream(void 0),\n      v = e.statefulStream(0),\n      S = {\n    offsetTree: [],\n    sizeTree: L(),\n    groupOffsetTree: L(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: []\n  },\n      I = e.statefulStreamFromEmitter(e.pipe(r, e.withLatestFrom(m, n, v), e.scan(Q, S), e.distinctUntilChanged()), S);\n  e.connect(e.pipe(m, e.filter(function (t) {\n    return t.length > 0;\n  }), e.withLatestFrom(I, v), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2],\n        r = e.reduce(function (t, e, r) {\n      return F(t, e, X(e, n.offsetTree, o) || r);\n    }, L());\n    return c({}, n, {\n      groupIndices: e,\n      groupOffsetTree: r\n    });\n  })), I), e.connect(e.pipe(i, e.withLatestFrom(I), e.filter(function (t) {\n    return t[0] < t[1].lastIndex;\n  }), e.map(function (t) {\n    var e = t[1];\n    return [{\n      startIndex: t[0],\n      endIndex: e.lastIndex,\n      size: e.lastSize\n    }];\n  })), r), e.connect(d, f);\n  var C = e.statefulStreamFromEmitter(e.pipe(d, e.map(function (t) {\n    return void 0 === t;\n  })), !0);\n  e.connect(e.pipe(f, e.filter(function (t) {\n    return void 0 !== t && R(e.getValue(I).sizeTree);\n  }), e.map(function (t) {\n    return [{\n      startIndex: 0,\n      endIndex: 0,\n      size: t\n    }];\n  })), r);\n  var T = e.streamFromEmitter(e.pipe(r, e.withLatestFrom(I), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      changed: n !== t.sizes,\n      sizes: n\n    };\n  }, {\n    changed: !1,\n    sizes: S\n  }), e.map(function (t) {\n    return t.changed;\n  })));\n  e.subscribe(e.pipe(u, e.scan(function (t, e) {\n    return {\n      diff: t.prev - e,\n      prev: e\n    };\n  }, {\n    diff: 0,\n    prev: 0\n  }), e.map(function (t) {\n    return t.diff;\n  })), function (t) {\n    t > 0 ? (e.publish(o, !0), e.publish(l, t)) : t < 0 && e.publish(s, t);\n  }), e.subscribe(e.pipe(u, e.withLatestFrom(n)), function (t) {\n    t[0] < 0 && (0, t[1])(\"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\", {\n      firstItemIndex: u\n    }, h.ERROR);\n  });\n  var x = e.streamFromEmitter(l);\n  e.connect(e.pipe(l, e.withLatestFrom(I), e.map(function (t) {\n    var e = t[0],\n        n = t[1];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: prepending items does not work with groups\");\n    return P(n.sizeTree).reduce(function (t, n) {\n      var o = n.k,\n          r = n.v;\n      return {\n        ranges: [].concat(t.ranges, [{\n          startIndex: t.prevIndex,\n          endIndex: o + e - 1,\n          size: t.prevSize\n        }]),\n        prevIndex: o + e,\n        prevSize: r\n      };\n    }, {\n      ranges: [],\n      prevIndex: 0,\n      prevSize: n.lastSize\n    }).ranges;\n  })), r);\n  var b = e.streamFromEmitter(e.pipe(s, e.withLatestFrom(I, v), e.map(function (t) {\n    return X(-t[0], t[1].offsetTree, t[2]);\n  })));\n  return e.connect(e.pipe(s, e.withLatestFrom(I, v), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: shifting items does not work with groups\");\n    var r = P(n.sizeTree).reduce(function (t, n) {\n      var o = n.v;\n      return F(t, Math.max(0, n.k + e), o);\n    }, L());\n    return c({}, n, {\n      sizeTree: r\n    }, $(n.offsetTree, 0, r, o));\n  })), I), {\n    data: g,\n    totalCount: i,\n    sizeRanges: r,\n    groupIndices: m,\n    defaultItemSize: f,\n    fixedItemSize: d,\n    unshiftWith: l,\n    shiftWith: s,\n    shiftWithOffset: b,\n    beforeUnshiftWith: x,\n    firstItemIndex: u,\n    gap: v,\n    sizes: I,\n    listRefresh: T,\n    statefulTotalCount: a,\n    trackItemSizes: C,\n    itemSize: p\n  };\n}, e.tup(S, K), {\n  singleton: !0\n}),\n    it = \"undefined\" != typeof document && \"scrollBehavior\" in document.documentElement.style;\n\nfunction at(t) {\n  var e = \"number\" == typeof t ? {\n    index: t\n  } : t;\n  return e.align || (e.align = \"start\"), e.behavior && it || (e.behavior = \"auto\"), e.offset || (e.offset = 0), e;\n}\n\nvar lt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = n.listRefresh,\n      a = n.gap,\n      l = t[1],\n      s = l.scrollingInProgress,\n      u = l.viewportHeight,\n      c = l.scrollTo,\n      m = l.smoothScrollTargetReached,\n      d = l.headerHeight,\n      f = l.footerHeight,\n      p = l.fixedHeaderHeight,\n      g = l.fixedFooterHeight,\n      v = t[2].log,\n      S = e.stream(),\n      I = e.statefulStream(0),\n      C = null,\n      T = null,\n      w = null;\n\n  function x() {\n    C && (C(), C = null), w && (w(), w = null), T && (clearTimeout(T), T = null), e.publish(s, !1);\n  }\n\n  return e.connect(e.pipe(S, e.withLatestFrom(o, u, r, I, d, f, v), e.withLatestFrom(a, p, g), e.map(function (t) {\n    var n = t[0],\n        o = n[0],\n        r = n[1],\n        a = n[2],\n        l = n[3],\n        u = n[4],\n        c = n[5],\n        d = n[6],\n        f = n[7],\n        p = t[1],\n        g = t[2],\n        v = t[3],\n        I = at(o),\n        b = I.align,\n        y = I.behavior,\n        H = I.offset,\n        E = l - 1,\n        R = tt(I, r, E),\n        L = X(R, r.offsetTree, p) + c;\n    \"end\" === b ? (L += g + z(r.sizeTree, R)[1] - a + v, R === E && (L += d)) : \"center\" === b ? L += (g + z(r.sizeTree, R)[1] - a + v) / 2 : L -= u, H && (L += H);\n\n    var k = function (t) {\n      x(), t ? (f(\"retrying to scroll to\", {\n        location: o\n      }, h.DEBUG), e.publish(S, o)) : f(\"list did not change, scroll successful\", {}, h.DEBUG);\n    };\n\n    if (x(), \"smooth\" === y) {\n      var F = !1;\n      w = e.subscribe(i, function (t) {\n        F = F || t;\n      }), C = e.handleNext(m, function () {\n        k(F);\n      });\n    } else C = e.handleNext(e.pipe(i, function (t) {\n      var e = setTimeout(function () {\n        t(!1);\n      }, 150);\n      return function (n) {\n        n && (t(!0), clearTimeout(e));\n      };\n    }), k);\n\n    return T = setTimeout(function () {\n      x();\n    }, 1200), e.publish(s, !0), f(\"scrolling from index to\", {\n      index: R,\n      top: L,\n      behavior: y\n    }, h.DEBUG), {\n      top: L,\n      behavior: y\n    };\n  })), c), {\n    scrollToIndex: S,\n    topListHeight: I\n  };\n}, e.tup(rt, y, S), {\n  singleton: !0\n}),\n    st = \"up\",\n    ut = {\n  atBottom: !1,\n  notAtBottomBecause: \"NOT_SHOWING_LAST_ITEM\",\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0\n  }\n},\n    ct = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollContainerState,\n      r = n.scrollTop,\n      i = n.viewportHeight,\n      a = n.headerHeight,\n      l = n.footerHeight,\n      s = n.scrollBy,\n      u = e.statefulStream(!1),\n      c = e.statefulStream(!0),\n      m = e.stream(),\n      d = e.stream(),\n      f = e.statefulStream(4),\n      p = e.statefulStream(0),\n      h = e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(e.duc(r), e.skip(1), e.mapTo(!0)), e.pipe(e.duc(r), e.skip(1), e.mapTo(!1), e.debounceTime(100))), e.distinctUntilChanged()), !1),\n      g = e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(s, e.mapTo(!0)), e.pipe(s, e.mapTo(!1), e.debounceTime(200))), e.distinctUntilChanged()), !1);\n  e.connect(e.pipe(e.combineLatest(e.duc(r), e.duc(p)), e.map(function (t) {\n    return t[0] <= t[1];\n  }), e.distinctUntilChanged()), c), e.connect(e.pipe(c, e.throttleTime(50)), d);\n  var v = e.streamFromEmitter(e.pipe(e.combineLatest(o, e.duc(i), e.duc(a), e.duc(l), e.duc(f)), e.scan(function (t, e) {\n    var n,\n        o,\n        r = e[0],\n        i = r.scrollTop,\n        a = r.scrollHeight,\n        l = e[1],\n        s = {\n      viewportHeight: l,\n      scrollTop: i,\n      scrollHeight: a\n    };\n    return i + l - a > -e[4] ? (i > t.state.scrollTop ? (n = \"SCROLLED_DOWN\", o = t.state.scrollTop - i) : (n = \"SIZE_DECREASED\", o = t.state.scrollTop - i || t.scrollTopDelta), {\n      atBottom: !0,\n      state: s,\n      atBottomBecause: n,\n      scrollTopDelta: o\n    }) : {\n      atBottom: !1,\n      notAtBottomBecause: s.scrollHeight > t.state.scrollHeight ? \"SIZE_INCREASED\" : l < t.state.viewportHeight ? \"VIEWPORT_HEIGHT_DECREASING\" : i < t.state.scrollTop ? \"SCROLLING_UPWARDS\" : \"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM\",\n      state: s\n    };\n  }, ut), e.distinctUntilChanged(function (t, e) {\n    return t && t.atBottom === e.atBottom;\n  }))),\n      S = e.statefulStreamFromEmitter(e.pipe(o, e.scan(function (t, e) {\n    var n = e.scrollTop,\n        o = e.scrollHeight,\n        r = e.viewportHeight;\n    return x(t.scrollHeight, o) ? {\n      scrollTop: n,\n      scrollHeight: o,\n      jump: 0,\n      changed: !1\n    } : t.scrollTop !== n && o - (n + r) < 1 ? {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: t.scrollTop - n,\n      changed: !0\n    } : {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: 0,\n      changed: !0\n    };\n  }, {\n    scrollHeight: 0,\n    jump: 0,\n    scrollTop: 0,\n    changed: !1\n  }), e.filter(function (t) {\n    return t.changed;\n  }), e.map(function (t) {\n    return t.jump;\n  })), 0);\n  e.connect(e.pipe(v, e.map(function (t) {\n    return t.atBottom;\n  })), u), e.connect(e.pipe(u, e.throttleTime(50)), m);\n  var I = e.statefulStream(\"down\");\n  e.connect(e.pipe(o, e.map(function (t) {\n    return t.scrollTop;\n  }), e.distinctUntilChanged(), e.scan(function (t, n) {\n    return e.getValue(g) ? {\n      direction: t.direction,\n      prevScrollTop: n\n    } : {\n      direction: n < t.prevScrollTop ? st : \"down\",\n      prevScrollTop: n\n    };\n  }, {\n    direction: \"down\",\n    prevScrollTop: 0\n  }), e.map(function (t) {\n    return t.direction;\n  })), I), e.connect(e.pipe(o, e.throttleTime(50), e.mapTo(\"none\")), I);\n  var C = e.statefulStream(0);\n  return e.connect(e.pipe(h, e.filter(function (t) {\n    return !t;\n  }), e.mapTo(0)), C), e.connect(e.pipe(r, e.throttleTime(100), e.withLatestFrom(h), e.filter(function (t) {\n    return !!t[1];\n  }), e.scan(function (t, e) {\n    return [t[1], e[0]];\n  }, [0, 0]), e.map(function (t) {\n    return t[1] - t[0];\n  })), C), {\n    isScrolling: h,\n    isAtTop: c,\n    isAtBottom: u,\n    atBottomState: v,\n    atTopStateChange: d,\n    atBottomStateChange: m,\n    scrollDirection: I,\n    atBottomThreshold: f,\n    atTopThreshold: p,\n    scrollVelocity: C,\n    lastJumpDueToItemResize: S\n  };\n}, e.tup(y)),\n    mt = e.system(function (t) {\n  var n = t[0].log,\n      o = e.statefulStream(!1),\n      r = e.streamFromEmitter(e.pipe(o, e.filter(function (t) {\n    return t;\n  }), e.distinctUntilChanged()));\n  return e.subscribe(o, function (t) {\n    t && e.getValue(n)(\"props updated\", {}, h.DEBUG);\n  }), {\n    propsReady: o,\n    didMount: r\n  };\n}, e.tup(S), {\n  singleton: !0\n}),\n    dt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.listRefresh,\n      i = n.defaultItemSize,\n      a = t[1].scrollTop,\n      l = t[2].scrollToIndex,\n      s = t[3].didMount,\n      u = e.statefulStream(!0),\n      c = e.statefulStream(0);\n  return e.connect(e.pipe(s, e.withLatestFrom(c), e.filter(function (t) {\n    return !!t[1];\n  }), e.mapTo(!1)), u), e.subscribe(e.pipe(e.combineLatest(r, s), e.withLatestFrom(u, o, i), e.filter(function (t) {\n    var e = t[1],\n        n = t[3];\n    return t[0][1] && (!R(t[2].sizeTree) || void 0 !== n) && !e;\n  }), e.withLatestFrom(c)), function (t) {\n    var n = t[1];\n    setTimeout(function () {\n      e.handleNext(a, function () {\n        e.publish(u, !0);\n      }), e.publish(l, n);\n    });\n  }), {\n    scrolledToInitialItem: u,\n    initialTopMostItemIndex: c\n  };\n}, e.tup(rt, y, lt, mt), {\n  singleton: !0\n});\n\nfunction ft(t) {\n  return !!t && (\"smooth\" === t ? \"smooth\" : \"auto\");\n}\n\nvar pt = e.system(function (t) {\n  var n = t[0],\n      o = n.totalCount,\n      r = n.listRefresh,\n      i = t[1],\n      a = i.isAtBottom,\n      l = i.atBottomState,\n      s = t[2].scrollToIndex,\n      u = t[3].scrolledToInitialItem,\n      c = t[4],\n      m = c.propsReady,\n      d = c.didMount,\n      f = t[5].log,\n      p = t[6].scrollingInProgress,\n      g = e.statefulStream(!1),\n      v = e.stream(),\n      S = null;\n\n  function I(t) {\n    e.publish(s, {\n      index: \"LAST\",\n      align: \"end\",\n      behavior: t\n    });\n  }\n\n  function C(t) {\n    var n = e.handleNext(l, function (n) {\n      !t || n.atBottom || \"SIZE_INCREASED\" !== n.notAtBottomBecause || S || (e.getValue(f)(\"scrolling to bottom due to increased size\", {}, h.DEBUG), I(\"auto\"));\n    });\n    setTimeout(n, 100);\n  }\n\n  return e.subscribe(e.pipe(e.combineLatest(e.pipe(e.duc(o), e.skip(1)), d), e.withLatestFrom(e.duc(g), a, u, p), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        o = e[1] && t[3],\n        r = \"auto\";\n    return o && (r = function (t, e) {\n      return \"function\" == typeof t ? ft(t(e)) : e && ft(t);\n    }(t[1], t[2] || t[4]), o = o && !!r), {\n      totalCount: n,\n      shouldFollow: o,\n      followOutputBehavior: r\n    };\n  }), e.filter(function (t) {\n    return t.shouldFollow;\n  })), function (t) {\n    var n = t.totalCount,\n        o = t.followOutputBehavior;\n    S && (S(), S = null), S = e.handleNext(r, function () {\n      e.getValue(f)(\"following output to \", {\n        totalCount: n\n      }, h.DEBUG), I(o), S = null;\n    });\n  }), e.subscribe(e.pipe(e.combineLatest(e.duc(g), o, m), e.filter(function (t) {\n    return t[0] && t[2];\n  }), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      refreshed: t.value === n,\n      value: n\n    };\n  }, {\n    refreshed: !1,\n    value: 0\n  }), e.filter(function (t) {\n    return t.refreshed;\n  }), e.withLatestFrom(g, o)), function (t) {\n    C(!1 !== t[1]);\n  }), e.subscribe(v, function () {\n    C(!1 !== e.getValue(g));\n  }), e.subscribe(e.combineLatest(e.duc(g), l), function (t) {\n    var e = t[1];\n    t[0] && !e.atBottom && \"VIEWPORT_HEIGHT_DECREASING\" === e.notAtBottomBecause && I(\"auto\");\n  }), {\n    followOutput: g,\n    autoscrollToBottom: v\n  };\n}, e.tup(rt, ct, lt, dt, mt, S, y));\n\nfunction ht(t) {\n  return t.reduce(function (t, e) {\n    return t.groupIndices.push(t.totalCount), t.totalCount += e + 1, t;\n  }, {\n    totalCount: 0,\n    groupIndices: []\n  });\n}\n\nvar gt = e.system(function (t) {\n  var n = t[0],\n      o = n.totalCount,\n      r = n.groupIndices,\n      i = n.sizes,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.headerHeight,\n      u = e.stream(),\n      c = e.stream(),\n      m = e.streamFromEmitter(e.pipe(u, e.map(ht)));\n  return e.connect(e.pipe(m, e.map(function (t) {\n    return t.totalCount;\n  })), o), e.connect(e.pipe(m, e.map(function (t) {\n    return t.groupIndices;\n  })), r), e.connect(e.pipe(e.combineLatest(l, i, s), e.filter(function (t) {\n    return nt(t[1]);\n  }), e.map(function (t) {\n    return z(t[1].groupOffsetTree, Math.max(t[0] - t[2], 0), \"v\")[0];\n  }), e.distinctUntilChanged(), e.map(function (t) {\n    return [t];\n  })), c), {\n    groupCounts: u,\n    topItemsIndexes: c\n  };\n}, e.tup(rt, y));\n\nfunction vt(t, e) {\n  return !(!t || t[0] !== e[0] || t[1] !== e[1]);\n}\n\nfunction St(t, e) {\n  return !(!t || t.startIndex !== e.startIndex || t.endIndex !== e.endIndex);\n}\n\nfunction It(t, e, n) {\n  return \"number\" == typeof t ? n === st && \"top\" === e || \"down\" === n && \"bottom\" === e ? t : 0 : n === st ? \"top\" === e ? t.main : t.reverse : \"bottom\" === e ? t.main : t.reverse;\n}\n\nfunction Ct(t, e) {\n  return \"number\" == typeof t ? t : t[e] || 0;\n}\n\nvar Tt = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollTop,\n      r = n.viewportHeight,\n      i = n.deviation,\n      a = n.headerHeight,\n      l = n.fixedHeaderHeight,\n      s = e.stream(),\n      u = e.statefulStream(0),\n      c = e.statefulStream(0),\n      m = e.statefulStream(0),\n      d = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(e.duc(o), e.duc(r), e.duc(a), e.duc(s, vt), e.duc(m), e.duc(u), e.duc(l), e.duc(i), e.duc(c)), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = r[0],\n        a = r[1],\n        l = t[4],\n        s = t[6],\n        u = t[7],\n        c = t[8],\n        m = e - u,\n        d = t[5] + s,\n        f = Math.max(o - m, 0),\n        p = \"none\",\n        h = Ct(c, \"top\"),\n        g = Ct(c, \"bottom\");\n    return i -= u, a += o + s, (i += o + s) > e + d - h && (p = st), (a -= u) < e - f + n + g && (p = \"down\"), \"none\" !== p ? [Math.max(m - o - It(l, \"top\", p) - h, 0), m - f - s + n + It(l, \"bottom\", p) + g] : null;\n  }), e.filter(function (t) {\n    return null != t;\n  }), e.distinctUntilChanged(vt)), [0, 0]);\n  return {\n    listBoundary: s,\n    overscan: m,\n    topListHeight: u,\n    increaseViewportBy: c,\n    visibleRange: d\n  };\n}, e.tup(y), {\n  singleton: !0\n}),\n    wt = {\n  items: [],\n  topItems: [],\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0\n};\n\nfunction xt(t, e, n) {\n  if (0 === t.length) return [];\n  if (!nt(e)) return t.map(function (t) {\n    return c({}, t, {\n      index: t.index + n,\n      originalIndex: t.index\n    });\n  });\n\n  for (var o, r = [], i = W(e.groupOffsetTree, t[0].index, t[t.length - 1].index), a = void 0, l = 0, s = f(t); !(o = s()).done;) {\n    var u = o.value;\n    (!a || a.end < u.index) && (a = i.shift(), l = e.groupIndices.indexOf(a.start)), r.push(c({}, u.index === a.start ? {\n      type: \"group\",\n      index: l\n    } : {\n      index: u.index - (l + 1) + n,\n      groupIndex: l\n    }, {\n      size: u.size,\n      offset: u.offset,\n      originalIndex: u.index,\n      data: u.data\n    }));\n  }\n\n  return r;\n}\n\nfunction bt(t, e, n, o, r, i) {\n  var a = 0,\n      l = 0;\n\n  if (t.length > 0) {\n    a = t[0].offset;\n    var s = t[t.length - 1];\n    l = s.offset + s.size;\n  }\n\n  var u = n - r.lastIndex,\n      c = a,\n      m = r.lastOffset + u * r.lastSize + (u - 1) * o - l;\n  return {\n    items: xt(t, r, i),\n    topItems: xt(e, r, i),\n    topListHeight: e.reduce(function (t, e) {\n      return e.size + t;\n    }, 0),\n    offsetTop: a,\n    offsetBottom: m,\n    top: c,\n    bottom: l,\n    totalCount: n,\n    firstItemIndex: i\n  };\n}\n\nvar yt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = n.data,\n      a = n.firstItemIndex,\n      l = n.gap,\n      s = t[1],\n      u = t[2],\n      m = u.visibleRange,\n      d = u.listBoundary,\n      p = u.topListHeight,\n      h = t[3],\n      g = h.scrolledToInitialItem,\n      v = h.initialTopMostItemIndex,\n      S = t[4].topListHeight,\n      I = t[5],\n      C = t[6].didMount,\n      T = t[7].recalcInProgress,\n      w = e.statefulStream([]),\n      x = e.stream();\n  e.connect(s.topItemsIndexes, w);\n  var b = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(C, T, e.duc(m, vt), e.duc(r), e.duc(o), e.duc(v), g, e.duc(w), e.duc(a), e.duc(l), i), e.filter(function (t) {\n    return t[0] && !t[1];\n  }), e.map(function (t) {\n    var n = t[2],\n        o = n[0],\n        r = n[1],\n        i = t[3],\n        a = t[5],\n        l = t[6],\n        s = t[7],\n        u = t[8],\n        m = t[9],\n        d = t[10],\n        p = t[4],\n        h = p.sizeTree,\n        g = p.offsetTree;\n    if (0 === i || 0 === o && 0 === r) return c({}, wt, {\n      totalCount: i\n    });\n    if (R(h)) return bt(function (t, e, n) {\n      if (nt(e)) {\n        var o = et(t, e);\n        return [{\n          index: z(e.groupOffsetTree, o)[0],\n          size: 0,\n          offset: 0\n        }, {\n          index: o,\n          size: 0,\n          offset: 0,\n          data: n && n[0]\n        }];\n      }\n\n      return [{\n        index: t,\n        size: 0,\n        offset: 0,\n        data: n && n[0]\n      }];\n    }(function (t, e) {\n      return \"number\" == typeof t ? t : \"LAST\" === t.index ? e - 1 : t.index;\n    }(a, i), p, d), [], i, m, p, u);\n    var v = [];\n    if (s.length > 0) for (var S, I = s[0], C = s[s.length - 1], T = 0, w = f(W(h, I, C)); !(S = w()).done;) for (var x = S.value, b = x.value, y = Math.max(x.start, I), H = Math.min(x.end, C), E = y; E <= H; E++) v.push({\n      index: E,\n      size: b,\n      offset: T,\n      data: d && d[E]\n    }), T += b;\n    if (!l) return bt([], v, i, m, p, u);\n\n    var L = s.length > 0 ? s[s.length - 1] + 1 : 0,\n        k = function (t, e, n, o) {\n      return void 0 === o && (o = 0), o > 0 && (e = Math.max(e, j(t, o, q).offset)), N((i = n, l = _(r = t, e, a = Z), s = _(r, i, a, l), r.slice(l, s + 1)), J);\n      var r, i, a, l, s;\n    }(g, o, r, L);\n\n    if (0 === k.length) return null;\n    var F = i - 1;\n    return bt(e.tap([], function (t) {\n      for (var e, n = f(k); !(e = n()).done;) {\n        var i = e.value,\n            a = i.value,\n            l = a.offset,\n            s = i.start,\n            u = a.size;\n\n        if (a.offset < o) {\n          var c = (s += Math.floor((o - a.offset + m) / (u + m))) - i.start;\n          l += c * u + c * m;\n        }\n\n        s < L && (l += (L - s) * u, s = L);\n\n        for (var p = Math.min(i.end, F), h = s; h <= p && !(l >= r); h++) t.push({\n          index: h,\n          size: u,\n          offset: l,\n          data: d && d[h]\n        }), l += u + m;\n      }\n    }), v, i, m, p, u);\n  }), e.filter(function (t) {\n    return null !== t;\n  }), e.distinctUntilChanged()), wt);\n  return e.connect(e.pipe(i, e.filter(function (t) {\n    return void 0 !== t;\n  }), e.map(function (t) {\n    return t.length;\n  })), r), e.connect(e.pipe(b, e.map(function (t) {\n    return t.topListHeight;\n  })), S), e.connect(S, p), e.connect(e.pipe(b, e.map(function (t) {\n    return [t.top, t.bottom];\n  })), d), e.connect(e.pipe(b, e.map(function (t) {\n    return t.items;\n  })), x), c({\n    listState: b,\n    topItemsIndexes: w,\n    endReached: e.streamFromEmitter(e.pipe(b, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.withLatestFrom(r, i), e.filter(function (t) {\n      var e = t[0].items;\n      return e[e.length - 1].originalIndex === t[1] - 1;\n    }), e.map(function (t) {\n      return [t[1] - 1, t[2]];\n    }), e.distinctUntilChanged(vt), e.map(function (t) {\n      return t[0];\n    }))),\n    startReached: e.streamFromEmitter(e.pipe(b, e.throttleTime(200), e.filter(function (t) {\n      var e = t.items;\n      return e.length > 0 && e[0].originalIndex === t.topItems.length;\n    }), e.map(function (t) {\n      return t.items[0].index;\n    }), e.distinctUntilChanged())),\n    rangeChanged: e.streamFromEmitter(e.pipe(b, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.map(function (t) {\n      for (var e = t.items, n = 0, o = e.length - 1; \"group\" === e[n].type && n < o;) n++;\n\n      for (; \"group\" === e[o].type && o > n;) o--;\n\n      return {\n        startIndex: e[n].index,\n        endIndex: e[o].index\n      };\n    }), e.distinctUntilChanged(St))),\n    itemsRendered: x\n  }, I);\n}, e.tup(rt, gt, Tt, dt, lt, ct, mt, K), {\n  singleton: !0\n}),\n    Ht = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.firstItemIndex,\n      i = n.data,\n      a = n.gap,\n      l = t[1].listState,\n      s = t[2].didMount,\n      u = e.statefulStream(0);\n  return e.connect(e.pipe(s, e.withLatestFrom(u), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.withLatestFrom(o, r, a, i), e.map(function (t) {\n    var e = t[0][1],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = t[4],\n        a = void 0 === i ? [] : i,\n        l = 0;\n    if (n.groupIndices.length > 0) for (var s, u = f(n.groupIndices); !((s = u()).done || s.value - l >= e);) l++;\n    var c = e + l;\n    return bt(Array.from({\n      length: c\n    }).map(function (t, e) {\n      return {\n        index: e,\n        size: 0,\n        offset: 0,\n        data: a[e]\n      };\n    }), [], c, r, n, o);\n  })), l), {\n    initialItemCount: u\n  };\n}, e.tup(rt, yt, mt), {\n  singleton: !0\n}),\n    Et = e.system(function (t) {\n  var n = t[0].scrollVelocity,\n      o = e.statefulStream(!1),\n      r = e.stream(),\n      i = e.statefulStream(!1);\n  return e.connect(e.pipe(n, e.withLatestFrom(i, o, r), e.filter(function (t) {\n    return !!t[1];\n  }), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = n.enter;\n\n    if (o) {\n      if ((0, n.exit)(e, r)) return !1;\n    } else if (i(e, r)) return !0;\n\n    return o;\n  }), e.distinctUntilChanged()), o), e.subscribe(e.pipe(e.combineLatest(o, n, r), e.withLatestFrom(i)), function (t) {\n    var e = t[0],\n        n = t[1];\n    return e[0] && n && n.change && n.change(e[1], e[2]);\n  }), {\n    isSeeking: o,\n    scrollSeekConfiguration: i,\n    scrollVelocity: n,\n    scrollSeekRangeChanged: r\n  };\n}, e.tup(ct), {\n  singleton: !0\n}),\n    Rt = e.system(function (t) {\n  var n = t[0].topItemsIndexes,\n      o = e.statefulStream(0);\n  return e.connect(e.pipe(o, e.filter(function (t) {\n    return t > 0;\n  }), e.map(function (t) {\n    return Array.from({\n      length: t\n    }).map(function (t, e) {\n      return e;\n    });\n  })), n), {\n    topItemCount: o\n  };\n}, e.tup(yt)),\n    Lt = e.system(function (t) {\n  var n = t[0],\n      o = n.footerHeight,\n      r = n.headerHeight,\n      i = n.fixedHeaderHeight,\n      a = n.fixedFooterHeight,\n      l = t[1].listState,\n      s = e.stream(),\n      u = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(o, a, r, i, l), e.map(function (t) {\n    var e = t[4];\n    return t[0] + t[1] + t[2] + t[3] + e.offsetBottom + e.bottom;\n  })), 0);\n  return e.connect(e.duc(u), s), {\n    totalListHeight: u,\n    totalListHeightChanged: s\n  };\n}, e.tup(y, yt), {\n  singleton: !0\n});\n\nfunction kt(t) {\n  var e,\n      n = !1;\n  return function () {\n    return n || (n = !0, e = t()), e;\n  };\n}\n\nvar zt = kt(function () {\n  return /iP(ad|hone|od).+Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent);\n}),\n    Ft = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollBy,\n      r = n.scrollTop,\n      i = n.deviation,\n      a = n.scrollingInProgress,\n      l = t[1],\n      s = l.isScrolling,\n      u = l.isAtBottom,\n      c = l.scrollDirection,\n      m = t[3],\n      d = m.beforeUnshiftWith,\n      f = m.shiftWithOffset,\n      p = m.sizes,\n      g = m.gap,\n      v = t[4].log,\n      S = t[5].recalcInProgress,\n      I = e.streamFromEmitter(e.pipe(t[2].listState, e.withLatestFrom(l.lastJumpDueToItemResize), e.scan(function (t, e) {\n    var n = t[1],\n        o = e[0],\n        r = o.items,\n        i = o.totalCount,\n        a = o.bottom + o.offsetBottom,\n        l = 0;\n    return t[2] === i && n.length > 0 && r.length > 0 && (0 === r[0].originalIndex && 0 === n[0].originalIndex || 0 != (l = a - t[3]) && (l += e[1])), [l, r, i, a];\n  }, [0, [], 0, 0]), e.filter(function (t) {\n    return 0 !== t[0];\n  }), e.withLatestFrom(r, c, a, u, v), e.filter(function (t) {\n    return !t[3] && 0 !== t[1] && t[2] === st;\n  }), e.map(function (t) {\n    var e = t[0][0];\n    return (0, t[5])(\"Upward scrolling compensation\", {\n      amount: e\n    }, h.DEBUG), e;\n  })));\n\n  function C(t) {\n    t > 0 ? (e.publish(o, {\n      top: -t,\n      behavior: \"auto\"\n    }), e.publish(i, 0)) : (e.publish(i, 0), e.publish(o, {\n      top: -t,\n      behavior: \"auto\"\n    }));\n  }\n\n  return e.subscribe(e.pipe(I, e.withLatestFrom(i, s)), function (t) {\n    var n = t[0],\n        o = t[1];\n    t[2] && zt() ? e.publish(i, o - n) : C(-n);\n  }), e.subscribe(e.pipe(e.combineLatest(e.statefulStreamFromEmitter(s, !1), i, S), e.filter(function (t) {\n    return !t[0] && !t[2] && 0 !== t[1];\n  }), e.map(function (t) {\n    return t[1];\n  }), e.throttleTime(1)), C), e.connect(e.pipe(f, e.map(function (t) {\n    return {\n      top: -t\n    };\n  })), o), e.subscribe(e.pipe(d, e.withLatestFrom(p, g), e.map(function (t) {\n    var e = t[0];\n    return e * t[1].lastSize + e * t[2];\n  })), function (t) {\n    e.publish(i, t), requestAnimationFrame(function () {\n      e.publish(o, {\n        top: t\n      }), requestAnimationFrame(function () {\n        e.publish(i, 0), e.publish(S, !1);\n      });\n    });\n  }), {\n    deviation: i\n  };\n}, e.tup(y, ct, yt, rt, S, K)),\n    Bt = e.system(function (t) {\n  var n = t[0].totalListHeight,\n      o = t[1].didMount,\n      r = t[2].scrollTo,\n      i = e.statefulStream(0);\n  return e.subscribe(e.pipe(o, e.withLatestFrom(i), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      top: t[1]\n    };\n  })), function (t) {\n    e.handleNext(e.pipe(n, e.filter(function (t) {\n      return 0 !== t;\n    })), function () {\n      setTimeout(function () {\n        e.publish(r, t);\n      });\n    });\n  }), {\n    initialScrollTop: i\n  };\n}, e.tup(Lt, mt, y), {\n  singleton: !0\n}),\n    Pt = e.system(function (t) {\n  var n = t[0].viewportHeight,\n      o = t[1].totalListHeight,\n      r = e.statefulStream(!1);\n  return {\n    alignToBottom: r,\n    paddingTopAddition: e.statefulStreamFromEmitter(e.pipe(e.combineLatest(r, n, o), e.filter(function (t) {\n      return t[0];\n    }), e.map(function (t) {\n      return Math.max(0, t[1] - t[2]);\n    }), e.distinctUntilChanged()), 0)\n  };\n}, e.tup(y, Lt), {\n  singleton: !0\n}),\n    Ot = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollTo,\n      r = n.scrollContainerState,\n      i = e.stream(),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(!1),\n      u = e.statefulStream(void 0);\n  return e.connect(e.pipe(e.combineLatest(i, a), e.map(function (t) {\n    var e = t[0],\n        n = e.viewportHeight,\n        o = e.scrollHeight;\n    return {\n      scrollTop: Math.max(0, e.scrollTop - t[1].offsetTop),\n      scrollHeight: o,\n      viewportHeight: n\n    };\n  })), r), e.connect(e.pipe(o, e.withLatestFrom(a), e.map(function (t) {\n    var e = t[0];\n    return c({}, e, {\n      top: e.top + t[1].offsetTop\n    });\n  })), l), {\n    useWindowScroll: s,\n    customScrollParent: u,\n    windowScrollContainerState: i,\n    windowViewportRect: a,\n    windowScrollTo: l\n  };\n}, e.tup(y)),\n    Mt = [\"done\", \"behavior\", \"align\"],\n    Vt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = n.gap,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.viewportHeight,\n      u = a.headerHeight,\n      d = a.scrollingInProgress,\n      f = t[2].scrollToIndex,\n      p = e.stream();\n  return e.connect(e.pipe(p, e.withLatestFrom(o, s, r, u, l, i), e.map(function (t) {\n    var n = t[0],\n        o = t[1],\n        r = t[2],\n        i = t[3],\n        a = t[4],\n        l = t[5],\n        s = t[6],\n        u = n.done,\n        f = n.behavior,\n        p = n.align,\n        h = m(n, Mt),\n        g = null,\n        v = tt(n, o, i - 1),\n        S = X(v, o.offsetTree, s) + a;\n    return S < l ? g = c({}, h, {\n      behavior: f,\n      align: null != p ? p : \"start\"\n    }) : S + z(o.sizeTree, v)[1] > l + r && (g = c({}, h, {\n      behavior: f,\n      align: null != p ? p : \"end\"\n    })), g ? u && e.handleNext(e.pipe(d, e.skip(1), e.filter(function (t) {\n      return !1 === t;\n    })), u) : u && u(), g;\n  }), e.filter(function (t) {\n    return null !== t;\n  })), f), {\n    scrollIntoView: p\n  };\n}, e.tup(rt, y, lt, yt, S), {\n  singleton: !0\n}),\n    Ut = [\"listState\", \"topItemsIndexes\"],\n    At = e.system(function (t) {\n  return c({}, t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);\n}, e.tup(Tt, Ht, mt, Et, Lt, Bt, Pt, Ot, Vt)),\n    Wt = e.system(function (t) {\n  var n = t[0],\n      o = n.totalCount,\n      r = n.sizeRanges,\n      i = n.fixedItemSize,\n      a = n.defaultItemSize,\n      l = n.trackItemSizes,\n      s = n.itemSize,\n      u = n.data,\n      d = n.firstItemIndex,\n      f = n.groupIndices,\n      p = n.statefulTotalCount,\n      h = n.gap,\n      g = t[1],\n      v = g.initialTopMostItemIndex,\n      S = g.scrolledToInitialItem,\n      I = t[2],\n      C = t[3],\n      T = t[4],\n      w = T.listState,\n      x = T.topItemsIndexes,\n      b = m(T, Ut),\n      y = t[5].scrollToIndex,\n      H = t[7].topItemCount,\n      E = t[8].groupCounts,\n      R = t[9],\n      L = t[10];\n  return e.connect(b.rangeChanged, R.scrollSeekRangeChanged), e.connect(e.pipe(R.windowViewportRect, e.map(function (t) {\n    return t.visibleHeight;\n  })), I.viewportHeight), c({\n    totalCount: o,\n    data: u,\n    firstItemIndex: d,\n    sizeRanges: r,\n    initialTopMostItemIndex: v,\n    scrolledToInitialItem: S,\n    topItemsIndexes: x,\n    topItemCount: H,\n    groupCounts: E,\n    fixedItemHeight: i,\n    defaultItemHeight: a,\n    gap: h\n  }, C, {\n    statefulTotalCount: p,\n    listState: w,\n    scrollToIndex: y,\n    trackItemSizes: l,\n    itemSize: s,\n    groupIndices: f\n  }, b, R, I, L);\n}, e.tup(rt, dt, y, pt, yt, lt, Ft, Rt, gt, At, S)),\n    Nt = kt(function () {\n  if (\"undefined\" == typeof document) return \"sticky\";\n  var t = document.createElement(\"div\");\n  return t.style.position = \"-webkit-sticky\", \"-webkit-sticky\" === t.style.position ? \"-webkit-sticky\" : \"sticky\";\n});\n\nfunction Dt(t, e) {\n  var n = i(null),\n      o = a(function (o) {\n    if (null !== o && o.offsetParent) {\n      var r,\n          i,\n          a = o.getBoundingClientRect(),\n          l = a.width;\n\n      if (e) {\n        var s = e.getBoundingClientRect(),\n            u = a.top - s.top;\n        r = s.height - Math.max(0, u), i = u + e.scrollTop;\n      } else r = window.innerHeight - Math.max(0, a.top), i = a.top + window.pageYOffset;\n\n      n.current = {\n        offsetTop: i,\n        visibleHeight: r,\n        visibleWidth: l\n      }, t(n.current);\n    }\n  }, [t, e]),\n      l = I(o),\n      s = l.callbackRef,\n      u = l.ref,\n      c = a(function () {\n    o(u.current);\n  }, [o, u]);\n  return r(function () {\n    if (e) {\n      e.addEventListener(\"scroll\", c);\n      var t = new ResizeObserver(c);\n      return t.observe(e), function () {\n        e.removeEventListener(\"scroll\", c), t.unobserve(e);\n      };\n    }\n\n    return window.addEventListener(\"scroll\", c), window.addEventListener(\"resize\", c), function () {\n      window.removeEventListener(\"scroll\", c), window.removeEventListener(\"resize\", c);\n    };\n  }, [c, e]), s;\n}\n\nvar Gt = n.createContext(void 0),\n    _t = [\"placeholder\"],\n    jt = [\"style\", \"children\"],\n    Kt = [\"style\", \"children\"];\n\nfunction Yt(t) {\n  return t;\n}\n\nvar qt = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return \"Item \" + t;\n  }),\n      n = e.statefulStream(null),\n      o = e.statefulStream(function (t) {\n    return \"Group \" + t;\n  }),\n      r = e.statefulStream({}),\n      i = e.statefulStream(Yt),\n      a = e.statefulStream(\"div\"),\n      l = e.statefulStream(e.noop),\n      s = function (t, n) {\n    return void 0 === n && (n = null), e.statefulStreamFromEmitter(e.pipe(r, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), n);\n  };\n\n  return {\n    context: n,\n    itemContent: t,\n    groupContent: o,\n    components: r,\n    computeItemKey: i,\n    headerFooterTag: a,\n    scrollerRef: l,\n    FooterComponent: s(\"Footer\"),\n    HeaderComponent: s(\"Header\"),\n    TopItemListComponent: s(\"TopItemList\"),\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    GroupComponent: s(\"Group\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    EmptyPlaceholder: s(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\")\n  };\n});\n\nfunction Zt(t, n) {\n  var o = e.stream();\n  return e.subscribe(o, function () {\n    return console.warn(\"react-virtuoso: You are using a deprecated property. \" + n, \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), e.connect(o, t), o;\n}\n\nvar Jt = e.system(function (t) {\n  var n = t[0],\n      o = t[1],\n      r = {\n    item: Zt(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    group: Zt(o.groupContent, \"Rename the %cgroup%c prop to %cgroupContent.\"),\n    topItems: Zt(n.topItemCount, \"Rename the %ctopItems%c prop to %ctopItemCount.\"),\n    itemHeight: Zt(n.fixedItemHeight, \"Rename the %citemHeight%c prop to %cfixedItemHeight.\"),\n    scrollingStateChange: Zt(n.isScrolling, \"Rename the %cscrollingStateChange%c prop to %cisScrolling.\"),\n    adjustForPrependedItems: e.stream(),\n    maxHeightCacheSize: e.stream(),\n    footer: e.stream(),\n    header: e.stream(),\n    HeaderContainer: e.stream(),\n    FooterContainer: e.stream(),\n    ItemContainer: e.stream(),\n    ScrollContainer: e.stream(),\n    GroupContainer: e.stream(),\n    ListContainer: e.stream(),\n    emptyComponent: e.stream(),\n    scrollSeek: e.stream()\n  };\n\n  function i(t, n, r) {\n    e.connect(e.pipe(t, e.withLatestFrom(o.components), e.map(function (t) {\n      var e,\n          o = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + r + \" property is deprecated. Pass components.\" + n + \" instead.\"), c({}, i, ((e = {})[n] = o, e));\n    })), o.components);\n  }\n\n  return e.subscribe(r.adjustForPrependedItems, function () {\n    console.warn(\"react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.\", \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), e.subscribe(r.maxHeightCacheSize, function () {\n    console.warn(\"react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.\");\n  }), e.subscribe(r.HeaderContainer, function () {\n    console.warn(\"react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.\");\n  }), e.subscribe(r.FooterContainer, function () {\n    console.warn(\"react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.\");\n  }), e.subscribe(r.scrollSeek, function (t) {\n    var r = t.placeholder,\n        i = m(t, _t);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), e.publish(o.components, c({}, e.getValue(o.components), {\n      ScrollSeekPlaceholder: r\n    })), e.publish(n.scrollSeekConfiguration, i);\n  }), i(r.footer, \"Footer\", \"footer\"), i(r.header, \"Header\", \"header\"), i(r.ItemContainer, \"Item\", \"ItemContainer\"), i(r.ListContainer, \"List\", \"ListContainer\"), i(r.ScrollContainer, \"Scroller\", \"ScrollContainer\"), i(r.emptyComponent, \"EmptyPlaceholder\", \"emptyComponent\"), i(r.GroupContainer, \"Group\", \"GroupContainer\"), c({}, n, o, r);\n}, e.tup(Wt, qt)),\n    $t = function (t) {\n  return n.createElement(\"div\", {\n    style: {\n      height: t.height\n    }\n  });\n},\n    Qt = {\n  position: Nt(),\n  zIndex: 1,\n  overflowAnchor: \"none\"\n},\n    Xt = {\n  overflowAnchor: \"none\"\n},\n    te = n.memo(function (t) {\n  var o = t.showTopList,\n      r = void 0 !== o && o,\n      i = he(\"listState\"),\n      a = pe(\"sizeRanges\"),\n      s = he(\"useWindowScroll\"),\n      u = he(\"customScrollParent\"),\n      m = pe(\"windowScrollContainerState\"),\n      d = pe(\"scrollContainerState\"),\n      f = u || s ? m : d,\n      p = he(\"itemContent\"),\n      h = he(\"context\"),\n      g = he(\"groupContent\"),\n      v = he(\"trackItemSizes\"),\n      S = he(\"itemSize\"),\n      I = he(\"log\"),\n      C = pe(\"gap\"),\n      w = T(a, S, v, r ? e.noop : f, I, C, u).callbackRef,\n      x = n.useState(0),\n      b = x[0],\n      y = x[1];\n  ge(\"deviation\", function (t) {\n    b !== t && y(t);\n  });\n  var H = he(\"EmptyPlaceholder\"),\n      E = he(\"ScrollSeekPlaceholder\") || $t,\n      R = he(\"ListComponent\"),\n      L = he(\"ItemComponent\"),\n      k = he(\"GroupComponent\"),\n      z = he(\"computeItemKey\"),\n      F = he(\"isSeeking\"),\n      B = he(\"groupIndices\").length > 0,\n      P = he(\"paddingTopAddition\"),\n      O = r ? {} : {\n    boxSizing: \"border-box\",\n    paddingTop: i.offsetTop + P,\n    paddingBottom: i.offsetBottom,\n    marginTop: b\n  };\n  return !r && 0 === i.totalCount && H ? l(H, re(H, h)) : l(R, c({}, re(R, h), {\n    ref: w,\n    style: O,\n    \"data-test-id\": r ? \"virtuoso-top-item-list\" : \"virtuoso-item-list\"\n  }), (r ? i.topItems : i.items).map(function (t) {\n    var e = t.originalIndex,\n        n = z(e + i.firstItemIndex, t.data, h);\n    return F ? l(E, c({}, re(E, h), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    }, \"group\" === t.type ? {} : {\n      groupIndex: t.groupIndex\n    })) : \"group\" === t.type ? l(k, c({}, re(k, h), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: Qt\n    }), g(t.index)) : l(L, c({}, re(L, h), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      \"data-item-group-index\": t.groupIndex,\n      style: Xt\n    }), B ? p(t.index, t.groupIndex, t.data, h) : p(t.index, t.data, h));\n  }));\n}),\n    ee = {\n  height: \"100%\",\n  outline: \"none\",\n  overflowY: \"auto\",\n  position: \"relative\",\n  WebkitOverflowScrolling: \"touch\"\n},\n    ne = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n},\n    oe = {\n  width: \"100%\",\n  position: Nt(),\n  top: 0\n};\n\nfunction re(t, e) {\n  if (\"string\" != typeof t) return {\n    context: e\n  };\n}\n\nvar ie = n.memo(function () {\n  var t = he(\"HeaderComponent\"),\n      e = pe(\"headerHeight\"),\n      n = he(\"headerFooterTag\"),\n      o = C(function (t) {\n    return e(w(t, \"height\"));\n  }),\n      r = he(\"context\");\n  return t ? l(n, {\n    ref: o\n  }, l(t, re(t, r))) : null;\n}),\n    ae = n.memo(function () {\n  var t = he(\"FooterComponent\"),\n      e = pe(\"footerHeight\"),\n      n = he(\"headerFooterTag\"),\n      o = C(function (t) {\n    return e(w(t, \"height\"));\n  }),\n      r = he(\"context\");\n  return t ? l(n, {\n    ref: o\n  }, l(t, re(t, r))) : null;\n});\n\nfunction le(t) {\n  var e = t.usePublisher,\n      o = t.useEmitter,\n      r = t.useEmitterValue;\n  return n.memo(function (t) {\n    var n = t.style,\n        i = t.children,\n        a = m(t, jt),\n        s = e(\"scrollContainerState\"),\n        u = r(\"ScrollerComponent\"),\n        d = e(\"smoothScrollTargetReached\"),\n        f = r(\"scrollerRef\"),\n        p = r(\"context\"),\n        h = b(s, d, u, f),\n        g = h.scrollerRef,\n        v = h.scrollByCallback;\n    return o(\"scrollTo\", h.scrollToCallback), o(\"scrollBy\", v), l(u, c({\n      ref: g,\n      style: c({}, ee, n),\n      \"data-test-id\": \"virtuoso-scroller\",\n      \"data-virtuoso-scroller\": !0,\n      tabIndex: 0\n    }, a, re(u, p)), i);\n  });\n}\n\nfunction se(t) {\n  var o = t.usePublisher,\n      r = t.useEmitter,\n      i = t.useEmitterValue;\n  return n.memo(function (t) {\n    var n = t.style,\n        a = t.children,\n        s = m(t, Kt),\n        u = o(\"windowScrollContainerState\"),\n        d = i(\"ScrollerComponent\"),\n        f = o(\"smoothScrollTargetReached\"),\n        p = i(\"totalListHeight\"),\n        h = i(\"deviation\"),\n        v = i(\"customScrollParent\"),\n        S = i(\"context\"),\n        I = b(u, f, d, e.noop, v),\n        C = I.scrollerRef,\n        T = I.scrollByCallback,\n        w = I.scrollToCallback;\n    return g(function () {\n      return C.current = v || window, function () {\n        C.current = null;\n      };\n    }, [C, v]), r(\"windowScrollTo\", w), r(\"scrollBy\", T), l(d, c({\n      style: c({\n        position: \"relative\"\n      }, n, 0 !== p ? {\n        height: p + h\n      } : {}),\n      \"data-virtuoso-scroller\": !0\n    }, s, re(d, S)), a);\n  });\n}\n\nvar ue = function (t) {\n  var o = t.children,\n      r = s(Gt),\n      i = pe(\"viewportHeight\"),\n      a = pe(\"fixedItemHeight\"),\n      l = C(e.compose(i, function (t) {\n    return w(t, \"height\");\n  }));\n  return n.useEffect(function () {\n    r && (i(r.viewportHeight), a(r.itemHeight));\n  }, [r, i, a]), n.createElement(\"div\", {\n    style: ne,\n    ref: l,\n    \"data-viewport-type\": \"element\"\n  }, o);\n},\n    ce = function (t) {\n  var e = t.children,\n      o = s(Gt),\n      r = pe(\"windowViewportRect\"),\n      i = pe(\"fixedItemHeight\"),\n      a = he(\"customScrollParent\"),\n      l = Dt(r, a);\n  return n.useEffect(function () {\n    o && (i(o.itemHeight), r({\n      offsetTop: 0,\n      visibleHeight: o.viewportHeight,\n      visibleWidth: 100\n    }));\n  }, [o, r, i]), n.createElement(\"div\", {\n    ref: l,\n    style: ne,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    me = function (t) {\n  var e = t.children,\n      n = he(\"TopItemListComponent\"),\n      o = he(\"headerHeight\"),\n      r = c({}, oe, {\n    marginTop: o + \"px\"\n  }),\n      i = he(\"context\");\n  return l(n || \"div\", {\n    style: r,\n    context: i\n  }, e);\n},\n    de = t(Jt, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    groupContent: \"groupContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    atTopThreshold: \"atTopThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    headerFooterTag: \"headerFooterTag\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    react18ConcurrentRendering: \"react18ConcurrentRendering\",\n    item: \"item\",\n    group: \"group\",\n    topItems: \"topItems\",\n    itemHeight: \"itemHeight\",\n    scrollingStateChange: \"scrollingStateChange\",\n    maxHeightCacheSize: \"maxHeightCacheSize\",\n    footer: \"footer\",\n    header: \"header\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    GroupContainer: \"GroupContainer\",\n    emptyComponent: \"emptyComponent\",\n    HeaderContainer: \"HeaderContainer\",\n    FooterContainer: \"FooterContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    adjustForPrependedItems: \"adjustForPrependedItems\",\n    autoscrollToBottom: \"autoscrollToBottom\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, n.memo(function (t) {\n  var e = he(\"useWindowScroll\"),\n      o = he(\"topItemsIndexes\").length > 0,\n      r = he(\"customScrollParent\"),\n      i = r || e ? ce : ue;\n  return n.createElement(r || e ? Se : ve, c({}, t), n.createElement(i, null, n.createElement(ie, null), n.createElement(te, null), n.createElement(ae, null)), o && n.createElement(me, null, n.createElement(te, {\n    showTopList: !0\n  })));\n})),\n    fe = de.Component,\n    pe = de.usePublisher,\n    he = de.useEmitterValue,\n    ge = de.useEmitter,\n    ve = le({\n  usePublisher: pe,\n  useEmitterValue: he,\n  useEmitter: ge\n}),\n    Se = se({\n  usePublisher: pe,\n  useEmitterValue: he,\n  useEmitter: ge\n}),\n    Ie = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Ce = {\n  items: [{\n    index: 0\n  }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Te = Math.round,\n    we = Math.ceil,\n    xe = Math.floor,\n    be = Math.min,\n    ye = Math.max;\n\nfunction He(t, e) {\n  return Array.from({\n    length: e - t + 1\n  }).map(function (e, n) {\n    return {\n      index: n + t\n    };\n  });\n}\n\nfunction Ee(t, e) {\n  return t && t.column === e.column && t.row === e.row;\n}\n\nvar Re = e.system(function (t) {\n  var n = t[0],\n      o = n.overscan,\n      r = n.visibleRange,\n      i = n.listBoundary,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.viewportHeight,\n      u = a.scrollBy,\n      m = a.scrollTo,\n      d = a.smoothScrollTargetReached,\n      f = a.scrollContainerState,\n      p = t[2],\n      h = t[3],\n      g = t[4],\n      v = g.propsReady,\n      S = g.didMount,\n      I = t[5],\n      C = I.windowViewportRect,\n      T = I.windowScrollTo,\n      w = I.useWindowScroll,\n      x = I.customScrollParent,\n      b = I.windowScrollContainerState,\n      y = t[6],\n      H = e.statefulStream(0),\n      E = e.statefulStream(0),\n      R = e.statefulStream(Ie),\n      L = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      k = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      z = e.stream(),\n      F = e.stream(),\n      B = e.statefulStream(0),\n      P = e.statefulStream({\n    row: 0,\n    column: 0\n  });\n  e.connect(e.pipe(S, e.withLatestFrom(E), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      items: He(0, t[1] - 1),\n      top: 0,\n      bottom: 0,\n      offsetBottom: 0,\n      offsetTop: 0,\n      itemHeight: 0,\n      itemWidth: 0\n    };\n  })), R), e.connect(e.pipe(e.combineLatest(e.duc(H), r, e.duc(P, Ee), e.duc(k, function (t, e) {\n    return t && t.width === e.width && t.height === e.height;\n  })), e.withLatestFrom(L), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        o = e[1],\n        r = o[0],\n        i = o[1],\n        a = e[2],\n        l = e[3],\n        s = t[1],\n        u = a.row,\n        c = l.height,\n        m = l.width,\n        d = s.width;\n    if (0 === n || 0 === d) return Ie;\n    if (0 === m) return Ce;\n    var f = ze(d, m, a.column),\n        p = f * xe((r + u) / (c + u)),\n        h = f * we((i + u) / (c + u)) - 1;\n    h = ye(0, be(n - 1, h));\n    var g = He(p = be(h, ye(0, p)), h),\n        v = Le(s, a, l, g),\n        S = v.top,\n        I = v.bottom,\n        C = we(n / f);\n    return {\n      items: g,\n      offsetTop: S,\n      offsetBottom: C * c + (C - 1) * u - I,\n      top: S,\n      bottom: I,\n      itemHeight: c,\n      itemWidth: m\n    };\n  })), R), e.connect(e.pipe(L, e.map(function (t) {\n    return t.height;\n  })), s), e.connect(e.pipe(e.combineLatest(L, k, R, P), e.map(function (t) {\n    var e = Le(t[0], t[3], t[1], t[2].items);\n    return [e.top, e.bottom];\n  }), e.distinctUntilChanged(vt)), i);\n  var O = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.withLatestFrom(H), e.filter(function (t) {\n    var e = t[0].items;\n    return e[e.length - 1].index === t[1] - 1;\n  }), e.map(function (t) {\n    return t[1] - 1;\n  }), e.distinctUntilChanged())),\n      M = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    var e = t.items;\n    return e.length > 0 && 0 === e[0].index;\n  }), e.mapTo(0), e.distinctUntilChanged())),\n      V = e.streamFromEmitter(e.pipe(e.duc(R), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.map(function (t) {\n    var e = t.items;\n    return {\n      startIndex: e[0].index,\n      endIndex: e[e.length - 1].index\n    };\n  }), e.distinctUntilChanged(St)));\n  e.connect(V, h.scrollSeekRangeChanged), e.connect(e.pipe(z, e.withLatestFrom(L, k, H, P), e.map(function (t) {\n    var e = t[1],\n        n = t[2],\n        o = t[3],\n        r = t[4],\n        i = at(t[0]),\n        a = i.align,\n        l = i.behavior,\n        s = i.offset,\n        u = i.index;\n    \"LAST\" === u && (u = o - 1);\n    var c = ke(e, r, n, u = ye(0, u, be(o - 1, u)));\n    return \"end\" === a ? c = Te(c - e.height + n.height) : \"center\" === a && (c = Te(c - e.height / 2 + n.height / 2)), s && (c += s), {\n      top: c,\n      behavior: l\n    };\n  })), m);\n  var U = e.statefulStreamFromEmitter(e.pipe(R, e.map(function (t) {\n    return t.offsetBottom + t.bottom;\n  })), 0);\n  return e.connect(e.pipe(C, e.map(function (t) {\n    return {\n      width: t.visibleWidth,\n      height: t.visibleHeight\n    };\n  })), L), c({\n    totalCount: H,\n    viewportDimensions: L,\n    itemDimensions: k,\n    scrollTop: l,\n    scrollHeight: F,\n    overscan: o,\n    scrollBy: u,\n    scrollTo: m,\n    scrollToIndex: z,\n    smoothScrollTargetReached: d,\n    windowViewportRect: C,\n    windowScrollTo: T,\n    useWindowScroll: w,\n    customScrollParent: x,\n    windowScrollContainerState: b,\n    deviation: B,\n    scrollContainerState: f,\n    initialItemCount: E,\n    gap: P\n  }, h, {\n    gridState: R,\n    totalListHeight: U\n  }, p, {\n    startReached: M,\n    endReached: O,\n    rangeChanged: V,\n    propsReady: v\n  }, y);\n}, e.tup(Tt, y, ct, Et, mt, Ot, S));\n\nfunction Le(t, e, n, o) {\n  var r = n.height;\n  return void 0 === r || 0 === o.length ? {\n    top: 0,\n    bottom: 0\n  } : {\n    top: ke(t, e, n, o[0].index),\n    bottom: ke(t, e, n, o[o.length - 1].index) + r\n  };\n}\n\nfunction ke(t, e, n, o) {\n  var r = ze(t.width, n.width, e.column),\n      i = xe(o / r),\n      a = i * n.height + ye(0, i - 1) * e.row;\n  return a > 0 ? a + e.row : a;\n}\n\nfunction ze(t, e, n) {\n  return ye(1, xe((t + n) / (e + n)));\n}\n\nvar Fe = [\"placeholder\"],\n    Be = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return \"Item \" + t;\n  }),\n      n = e.statefulStream({}),\n      o = e.statefulStream(null),\n      r = e.statefulStream(\"virtuoso-grid-item\"),\n      i = e.statefulStream(\"virtuoso-grid-list\"),\n      a = e.statefulStream(Yt),\n      l = e.statefulStream(e.noop),\n      s = function (t, o) {\n    return void 0 === o && (o = null), e.statefulStreamFromEmitter(e.pipe(n, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), o);\n  };\n\n  return {\n    context: o,\n    itemContent: t,\n    components: n,\n    computeItemKey: a,\n    itemClassName: r,\n    listClassName: i,\n    scrollerRef: l,\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\", \"div\")\n  };\n}),\n    Pe = e.system(function (t) {\n  var n = t[0],\n      o = t[1],\n      r = {\n    item: Zt(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    ItemContainer: e.stream(),\n    ScrollContainer: e.stream(),\n    ListContainer: e.stream(),\n    emptyComponent: e.stream(),\n    scrollSeek: e.stream()\n  };\n\n  function i(t, n, r) {\n    e.connect(e.pipe(t, e.withLatestFrom(o.components), e.map(function (t) {\n      var e,\n          o = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + r + \" property is deprecated. Pass components.\" + n + \" instead.\"), c({}, i, ((e = {})[n] = o, e));\n    })), o.components);\n  }\n\n  return e.subscribe(r.scrollSeek, function (t) {\n    var r = t.placeholder,\n        i = m(t, Fe);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), e.publish(o.components, c({}, e.getValue(o.components), {\n      ScrollSeekPlaceholder: r\n    })), e.publish(n.scrollSeekConfiguration, i);\n  }), i(r.ItemContainer, \"Item\", \"ItemContainer\"), i(r.ListContainer, \"List\", \"ListContainer\"), i(r.ScrollContainer, \"Scroller\", \"ScrollContainer\"), c({}, n, o, r);\n}, e.tup(Re, Be)),\n    Oe = n.memo(function () {\n  var t = Ne(\"gridState\"),\n      e = Ne(\"listClassName\"),\n      n = Ne(\"itemClassName\"),\n      o = Ne(\"itemContent\"),\n      r = Ne(\"computeItemKey\"),\n      i = Ne(\"isSeeking\"),\n      a = We(\"scrollHeight\"),\n      s = Ne(\"ItemComponent\"),\n      u = Ne(\"ListComponent\"),\n      m = Ne(\"ScrollSeekPlaceholder\"),\n      d = Ne(\"context\"),\n      f = We(\"itemDimensions\"),\n      p = We(\"gap\"),\n      h = Ne(\"log\"),\n      g = C(function (t) {\n    a(t.parentElement.parentElement.scrollHeight);\n    var e = t.firstChild;\n    e && f(e.getBoundingClientRect()), p({\n      row: je(\"row-gap\", getComputedStyle(t).rowGap, h),\n      column: je(\"column-gap\", getComputedStyle(t).columnGap, h)\n    });\n  });\n  return l(u, c({\n    ref: g,\n    className: e\n  }, re(u, d), {\n    style: {\n      paddingTop: t.offsetTop,\n      paddingBottom: t.offsetBottom\n    }\n  }), t.items.map(function (e) {\n    var a = r(e.index);\n    return i ? l(m, c({\n      key: a\n    }, re(m, d), {\n      index: e.index,\n      height: t.itemHeight,\n      width: t.itemWidth\n    })) : l(s, c({}, re(s, d), {\n      className: n,\n      \"data-index\": e.index,\n      key: a\n    }), o(e.index, d));\n  }));\n}),\n    Me = function (t) {\n  var e = t.children,\n      o = We(\"viewportDimensions\"),\n      r = C(function (t) {\n    o(t.getBoundingClientRect());\n  });\n  return n.createElement(\"div\", {\n    style: ne,\n    ref: r\n  }, e);\n},\n    Ve = function (t) {\n  var e = t.children,\n      o = Dt(We(\"windowViewportRect\"), Ne(\"customScrollParent\"));\n  return n.createElement(\"div\", {\n    ref: o,\n    style: ne\n  }, e);\n},\n    Ue = t(Pe, {\n  optional: {\n    context: \"context\",\n    totalCount: \"totalCount\",\n    overscan: \"overscan\",\n    itemContent: \"itemContent\",\n    components: \"components\",\n    computeItemKey: \"computeItemKey\",\n    initialItemCount: \"initialItemCount\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    listClassName: \"listClassName\",\n    itemClassName: \"itemClassName\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    item: \"item\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    scrollToIndex: \"scrollToIndex\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\"\n  }\n}, n.memo(function (t) {\n  var e = c({}, t),\n      o = Ne(\"useWindowScroll\"),\n      r = Ne(\"customScrollParent\"),\n      i = r || o ? Ve : Me;\n  return n.createElement(r || o ? _e : Ge, c({}, e), n.createElement(i, null, n.createElement(Oe, null)));\n})),\n    Ae = Ue.Component,\n    We = Ue.usePublisher,\n    Ne = Ue.useEmitterValue,\n    De = Ue.useEmitter,\n    Ge = le({\n  usePublisher: We,\n  useEmitterValue: Ne,\n  useEmitter: De\n}),\n    _e = se({\n  usePublisher: We,\n  useEmitterValue: Ne,\n  useEmitter: De\n});\n\nfunction je(t, e, n) {\n  return \"normal\" === e || null != e && e.endsWith(\"px\") || n(t + \" was not resolved to pixel value correctly\", e, h.WARN), \"normal\" === e ? 0 : parseInt(null != e ? e : \"0\", 10);\n}\n\nvar Ke = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return n.createElement(\"td\", null, \"Item $\", t);\n  }),\n      o = e.statefulStream(null),\n      r = e.statefulStream(null),\n      i = e.statefulStream(null),\n      a = e.statefulStream({}),\n      l = e.statefulStream(Yt),\n      s = e.statefulStream(e.noop),\n      u = function (t, n) {\n    return void 0 === n && (n = null), e.statefulStreamFromEmitter(e.pipe(a, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), n);\n  };\n\n  return {\n    context: o,\n    itemContent: t,\n    fixedHeaderContent: r,\n    fixedFooterContent: i,\n    components: a,\n    computeItemKey: l,\n    scrollerRef: s,\n    TableComponent: u(\"Table\", \"table\"),\n    TableHeadComponent: u(\"TableHead\", \"thead\"),\n    TableFooterComponent: u(\"TableFoot\", \"tfoot\"),\n    TableBodyComponent: u(\"TableBody\", \"tbody\"),\n    TableRowComponent: u(\"TableRow\", \"tr\"),\n    ScrollerComponent: u(\"Scroller\", \"div\"),\n    EmptyPlaceholder: u(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: u(\"ScrollSeekPlaceholder\"),\n    FillerRow: u(\"FillerRow\")\n  };\n}),\n    Ye = e.system(function (t) {\n  return c({}, t[0], t[1]);\n}, e.tup(Wt, Ke)),\n    qe = function (t) {\n  return n.createElement(\"tr\", null, n.createElement(\"td\", {\n    style: {\n      height: t.height\n    }\n  }));\n},\n    Ze = function (t) {\n  return n.createElement(\"tr\", null, n.createElement(\"td\", {\n    style: {\n      height: t.height,\n      padding: 0,\n      border: 0\n    }\n  }));\n},\n    Je = n.memo(function () {\n  var t = nn(\"listState\"),\n      e = en(\"sizeRanges\"),\n      o = nn(\"useWindowScroll\"),\n      r = nn(\"customScrollParent\"),\n      i = en(\"windowScrollContainerState\"),\n      a = en(\"scrollContainerState\"),\n      s = r || o ? i : a,\n      u = nn(\"itemContent\"),\n      m = nn(\"trackItemSizes\"),\n      d = T(e, nn(\"itemSize\"), m, s, nn(\"log\"), void 0, r),\n      f = d.callbackRef,\n      p = d.ref,\n      h = n.useState(0),\n      g = h[0],\n      v = h[1];\n  on(\"deviation\", function (t) {\n    g !== t && (p.current.style.marginTop = t + \"px\", v(t));\n  });\n  var S = nn(\"EmptyPlaceholder\"),\n      I = nn(\"ScrollSeekPlaceholder\") || qe,\n      C = nn(\"FillerRow\") || Ze,\n      w = nn(\"TableBodyComponent\"),\n      x = nn(\"TableRowComponent\"),\n      b = nn(\"computeItemKey\"),\n      y = nn(\"isSeeking\"),\n      H = nn(\"paddingTopAddition\"),\n      E = nn(\"firstItemIndex\"),\n      R = nn(\"statefulTotalCount\"),\n      L = nn(\"context\");\n  if (0 === R && S) return l(S, re(S, L));\n  var k = t.offsetTop + H + g,\n      z = t.offsetBottom,\n      F = k > 0 ? n.createElement(C, {\n    height: k,\n    key: \"padding-top\"\n  }) : null,\n      B = z > 0 ? n.createElement(C, {\n    height: z,\n    key: \"padding-bottom\"\n  }) : null,\n      P = t.items.map(function (t) {\n    var e = t.originalIndex,\n        n = b(e + E, t.data, L);\n    return y ? l(I, c({}, re(I, L), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    })) : l(x, c({}, re(x, L), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }), u(t.index, t.data, L));\n  });\n  return l(w, c({\n    ref: f,\n    \"data-test-id\": \"virtuoso-item-list\"\n  }, re(w, L)), [F].concat(P, [B]));\n}),\n    $e = function (t) {\n  var o = t.children,\n      r = s(Gt),\n      i = en(\"viewportHeight\"),\n      a = en(\"fixedItemHeight\"),\n      l = C(e.compose(i, function (t) {\n    return w(t, \"height\");\n  }));\n  return n.useEffect(function () {\n    r && (i(r.viewportHeight), a(r.itemHeight));\n  }, [r, i, a]), n.createElement(\"div\", {\n    style: ne,\n    ref: l,\n    \"data-viewport-type\": \"element\"\n  }, o);\n},\n    Qe = function (t) {\n  var e = t.children,\n      o = s(Gt),\n      r = en(\"windowViewportRect\"),\n      i = en(\"fixedItemHeight\"),\n      a = nn(\"customScrollParent\"),\n      l = Dt(r, a);\n  return n.useEffect(function () {\n    o && (i(o.itemHeight), r({\n      offsetTop: 0,\n      visibleHeight: o.viewportHeight,\n      visibleWidth: 100\n    }));\n  }, [o, r, i]), n.createElement(\"div\", {\n    ref: l,\n    style: ne,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    Xe = t(Ye, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    fixedHeaderContent: \"fixedHeaderContent\",\n    fixedFooterContent: \"fixedFooterContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    atTopThreshold: \"atTopThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    react18ConcurrentRendering: \"react18ConcurrentRendering\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, n.memo(function (t) {\n  var o = nn(\"useWindowScroll\"),\n      r = nn(\"customScrollParent\"),\n      i = en(\"fixedHeaderHeight\"),\n      a = en(\"fixedFooterHeight\"),\n      l = nn(\"fixedHeaderContent\"),\n      s = nn(\"fixedFooterContent\"),\n      u = nn(\"context\"),\n      m = C(e.compose(i, function (t) {\n    return w(t, \"height\");\n  })),\n      d = C(e.compose(a, function (t) {\n    return w(t, \"height\");\n  })),\n      f = r || o ? an : rn,\n      p = r || o ? Qe : $e,\n      h = nn(\"TableComponent\"),\n      g = nn(\"TableHeadComponent\"),\n      v = nn(\"TableFooterComponent\"),\n      S = l ? n.createElement(g, c({\n    key: \"TableHead\",\n    style: {\n      zIndex: 1,\n      position: \"sticky\",\n      top: 0\n    },\n    ref: m\n  }, re(g, u)), l()) : null,\n      I = s ? n.createElement(v, c({\n    key: \"TableFoot\",\n    style: {\n      zIndex: 1,\n      position: \"sticky\",\n      bottom: 0\n    },\n    ref: d\n  }, re(v, u)), s()) : null;\n  return n.createElement(f, c({}, t), n.createElement(p, null, n.createElement(h, c({\n    style: {\n      borderSpacing: 0\n    }\n  }, re(h, u)), [S, n.createElement(Je, {\n    key: \"TableBody\"\n  }), I])));\n})),\n    tn = Xe.Component,\n    en = Xe.usePublisher,\n    nn = Xe.useEmitterValue,\n    on = Xe.useEmitter,\n    rn = le({\n  usePublisher: en,\n  useEmitterValue: nn,\n  useEmitter: on\n}),\n    an = se({\n  usePublisher: en,\n  useEmitterValue: nn,\n  useEmitter: on\n}),\n    ln = fe,\n    sn = fe,\n    un = tn,\n    cn = Ae;\n\nexport { sn as GroupedVirtuoso, h as LogLevel, un as TableVirtuoso, ln as Virtuoso, cn as VirtuosoGrid, Gt as VirtuosoMockContext };","map":{"version":3,"mappings":"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","names":["LogLevel","useIsomorphicLayoutEffect","document","useLayoutEffect","useEffect","CONSOLE_METHOD_MAP","DEBUG","INFO","_CONSOLE_METHOD_MAP","WARN","ERROR","loggerSystem","u","system","logLevel","statefulStream","log","label","message","level","globalThis","window","_getGlobalThis$VIRTUO","VIRTUOSO_LOG_LEVEL","getValue","console","singleton","useSizeWithElRef","callback","enabled","ref","useRef","callbackRef","_el","ResizeObserver","observer","entries","element","target","offsetParent","elRef","observe","current","unobserve","useSize","useChangedListContentsSizes","itemSize","scrollContainerStateCallback","gap","customScrollParent","el","ranges","children","field","length","results","i","child","item","undefined","dataset","index","parseInt","knownSize","parseFloat","size","lastResult","endIndex","push","startIndex","getChangedChildSizes","scrollableElement","parentElement","windowScrolling","firstElementChild","scrollTop","pageYOffset","documentElement","scrollHeight","viewportHeight","offsetHeight","innerHeight","Math","max","property","value","endsWith","resolveGapValue","getComputedStyle","rowGap","dimension","round","getBoundingClientRect","approximatelyEqual","num1","num2","abs","useScrollTop","smoothScrollTargetReached","scrollerElement","scrollerRefCallback","noop","scrollerRef","scrollTopTarget","timeoutRef","shouldFlushSync","handler","useCallback","ev","windowScroll","call","flushSync","clearTimeout","localRef","addEventListener","passive","removeEventListener","scrollByCallback","location","scrollBy","scrollToCallback","isSmooth","behavior","correctItemSize","top","ceil","min","setTimeout","scrollTo","domIOSystem","scrollContainerState","stream","deviation","statefulScrollTop","headerHeight","fixedHeaderHeight","fixedFooterHeight","footerHeight","scrollingInProgress","react18ConcurrentRendering","connect","pipe","map","_ref","NIL_NODE","lvl","newAANode","k","v","l","r","empty","node","newTree","key","last","adjust","clone","_last","deleteLast","remove","findMaxKeyValue","Infinity","insert","split","skew","rebalance","walkWithin","start","end","result","concat","walk","args","isSingle","Error","rl","rlvl","rangesWithin","arrayToRanges","items","parser","nextIndex","nextValue","_parser2","findIndexOfClosestSmallerOrEqual","comparator","floor","match","join","findClosestSmallerOrEqual","recalcSystem","recalcInProgress","rangeIncludes","refRange","range","indexComparator","itemIndex","offsetComparator","offset","itemOffset","_ref2","offsetPointParser","point","createOffsetTree","prevOffsetTree","syncStart","sizeTree","offsetTree","prevIndex","prevSize","prevOffset","arrayBinarySearch","kv","slice","_step3","done","_step3$value","indexOffset","aOffset","lastIndex","lastOffset","lastSize","state","groupIndices","_ref3","newSizeTree","groupSize","reduce","tree","groupIndex","insertRanges","_step","overlappingRanges","some","_step2","firstPassDone","shouldInsert","p","rangeStart","rangeEnd","_step2$value","rangeValue","_insertRanges","newOffsetTree","_createOffsetTree","groupOffsetTree","offsetOf","itemCount","_arrayBinarySearch$fi","originalIndexFromLocation","sizes","isGroupLocation","originalIndexFromItemIndex","hasGroups","groupOffset","SIZE_MAP","offsetWidth","sizeSystem","_ref4","sizeRanges","totalCount","statefulTotalCount","statefulStreamFromEmitter","unshiftWith","shiftWith","firstItemIndex","fixedItemSize","defaultItemSize","data","initial","withLatestFrom","scan","sizeStateReducer","distinctUntilChanged","filter","indexes","_ref5","idx","_extends","_ref7","_ref7$","trackItemSizes","listRefresh","streamFromEmitter","_ref9","newSizes","changed","subscribe","prev","next","diff","val","publish","_ref10","beforeUnshiftWith","_ref11","acc","_ref12","shiftWithOffset","_ref13","_ref14","tup","SUPPORTS_SCROLL_TO_OPTIONS","style","normalizeIndexLocation","align","scrollToIndexSystem","_ref$","_ref$2","scrollToIndex","topListHeight","unsubscribeNextListRefresh","cleartTimeoutRef","unsubscribeListRefresh","cleanup","_ref2$","normalLocation","retry","listChanged","handleNext","UP","INITIAL_BOTTOM_STATE","atBottom","notAtBottomBecause","offsetBottom","stateFlagsSystem","isAtBottom","isAtTop","atBottomStateChange","atTopStateChange","atBottomThreshold","atTopThreshold","isScrolling","merge","duc","skip","mapTo","debounceTime","isScrollingBy","combineLatest","throttleTime","atBottomState","atBottomBecause","scrollTopDelta","_ref3$","_headerHeight","lastJumpDueToItemResize","jump","scrollDirection","direction","prevScrollTop","scrollVelocity","_","_ref8","e","propsReadySystem","propsReady","didMount","ready","initialTopMostItemIndexSystem","scrolledToInitialItem","initialTopMostItemIndex","normalizeFollowOutput","follow","followOutputSystem","followOutput","autoscrollToBottom","pendingScrollHandle","scrollToBottom","followOutputBehavior","trapNextSizeIncrease","cancel","shouldFollow","behaviorFromFollowOutput","refreshed","t","groupCountsToIndicesAndCount","counts","groupCount","groupedListSystem","groupCounts","topItemsIndexes","groupIndicesAndCount","tupleComparator","rangeComparator","getOverscan","overscan","main","reverse","getViewportIncrease","sizeRangeSystem","listBoundary","increaseViewportBy","visibleRange","listTop","listBottom","stickyHeaderHeight","headerVisible","topViewportAddition","bottomViewportAddition","EMPTY_LIST_STATE","topItems","offsetTop","bottom","transposeItems","originalIndex","transposedItems","groupRanges","currentRange","currentGroupIndex","shift","indexOf","type","buildListState","lastItem","height","listStateSystem","rangeTopListHeight","_ref$3","stateFlags","itemsRendered","listState","startOffset","endOffset","sizesValue","probeItemSet","getInitialTopMostItemIndexNumber","rangeStartIndex","rangeEndIndex","minStartIndex","offsetPointRanges","rangesWithinOffsets","endValue","findRange","maxIndex","tap","endReached","_ref6","count","startReached","rangeChanged","initialItemCountSystem","initialItemCount","_ref3$2","includedGroupsCount","adjustedCount","Array","from","scrollSeekSystem","isSeeking","scrollSeekConfiguration","speed","config","enter","exit","velocity","change","scrollSeekRangeChanged","topItemCountSystem","topItemCount","totalListHeightSystem","totalListHeightChanged","totalListHeight","simpleMemoize","func","called","isMobileSafari","test","navigator","userAgent","upwardScrollFixSystem","deviationOffset","prevItems","totalHeight","newDev","amount","scrollByWith","deviationAmount","recalc","requestAnimationFrame","initialScrollTopSystem","initialScrollTop","alignToBottomSystem","alignToBottom","paddingTopAddition","windowScrollerSystem","windowScrollContainerState","windowViewportRect","windowScrollTo","useWindowScroll","_excluded","scrollIntoViewSystem","scrollIntoView","viewLocation","rest","actualIndex","itemTop","Ut","featureGroup1System","windowScroller","listSystem","_ref2$2","domIO","_ref2$3","flags","featureGroup1","visibleHeight","fixedItemHeight","defaultItemHeight","positionStickyCssValue","createElement","position","useWindowViewportRectRef","viewportInfo","calculateInfo","rect","visibleWidth","width","customScrollParentRect","deltaTop","scrollAndResizeEventHandler","VirtuosoMockContext","React","createContext","_excluded2","_excluded3","identity","listComponentPropsSystem","itemContent","context","groupContent","components","computeItemKey","headerFooterTag","distinctProp","propName","defaultValue","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","prop","alias","warn","combinedSystem","propsSystem","deprecatedProps","addDeprecatedAlias","group","itemHeight","scrollingStateChange","adjustForPrependedItems","maxHeightCacheSize","footer","header","HeaderContainer","FooterContainer","ItemContainer","ScrollContainer","GroupContainer","ListContainer","emptyComponent","scrollSeek","deprecateComponentProp","componentName","comp","_extends2","placeholder","_objectWithoutPropertiesLoose","DefaultScrollSeekPlaceholder","GROUP_STYLE","zIndex","overflowAnchor","ITEM_STYLE","Items","memo","showTopList","_ref5$showTopList","useEmitterValue","usePublisher","windowScrollContainerStateCallback","_scrollContainerStateCallback","listGap","_React$useState","useState","setDeviation","useEmitter","containerStyle","boxSizing","paddingTop","paddingBottom","marginTop","contextPropIfNotDomElement","scrollerStyle","outline","overflowY","WebkitOverflowScrolling","viewportStyle","topItemListStyle","Header","Footer","buildScroller","props","_useScrollTop","tabIndex","buildWindowScroller","_useScrollTop2","Viewport","ctx","useContext","viewportRef","compose","WindowViewport","TopItemListContainer","TopItemList","_systemToComponent","systemToComponent","required","optional","methods","events","TheViewport","WindowScroller","Scroller","List","Component","INITIAL_GRID_STATE","itemWidth","PROBE_GRID_STATE","buildItems","gapComparator","column","row","gridSystem","_ref$4","gridState","viewportDimensions","itemDimensions","_ref4$$","_ref4$","viewport","viewportWidth","perRow","itemsPerRow","gridLayout","_gridLayout","rowCount","_gridLayout2","gridComponentPropsSystem","itemClassName","listClassName","c","GridItems","scrollHeightCallback","gridGap","listRef","firstItem","firstChild","columnGap","className","Grid","tableComponentPropsSystem","fixedHeaderContent","fixedFooterContent","TableComponent","TableHeadComponent","TableFooterComponent","TableBodyComponent","TableRowComponent","FillerRow","DefaultFillerRow","padding","border","paddingTopEl","paddingBottomEl","theadRef","tfootRef","TheScroller","TheTable","TheTHead","TheTFoot","theHead","theFoot","borderSpacing","Table","Virtuoso","GroupedVirtuoso","TableVirtuoso","VirtuosoGrid"],"sources":["/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/hooks/useIsomorphicLayoutEffect.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/loggerSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/hooks/useSize.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/hooks/useChangedChildSizes.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/correctItemSize.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/approximatelyEqual.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/hooks/useScrollTop.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/domIOSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/AATree.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/binaryArraySearch.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/recalcSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/sizeSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/scrollToIndexSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/stateFlagsSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/propsReadySystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/initialTopMostItemIndexSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/followOutputSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/groupedListSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/comparators.tsx","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/sizeRangeSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/listStateSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/initialItemCountSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/scrollSeekSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/topItemCountSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/totalListHeightSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/simpleMemoize.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/upwardScrollFixSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/initialScrollTopSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/alignToBottomSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/windowScrollerSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/scrollIntoViewSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/listSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/positionStickyCssValue.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/hooks/useWindowViewportRect.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/utils/context.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/List.tsx","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/gridSystem.ts","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/Grid.tsx","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/Table.tsx","/home/betty/web-app-practice/memory-game/client/node_modules/react-virtuoso/src/components.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import * as u from '@virtuoso.dev/urx'\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace globalThis {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace window {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\nexport enum LogLevel {\n  DEBUG,\n  INFO,\n  WARN,\n  ERROR,\n}\nexport interface LogMessage {\n  level: LogLevel\n  message: any\n  label: string\n}\n\nexport type Log = (label: string, message: any, level?: LogLevel) => void\n\nconst CONSOLE_METHOD_MAP = {\n  [LogLevel.DEBUG]: 'debug',\n  [LogLevel.INFO]: 'log',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error',\n} as const\n\nconst getGlobalThis = () => (typeof globalThis === 'undefined' ? window : globalThis)\n\nexport const loggerSystem = u.system(\n  () => {\n    const logLevel = u.statefulStream<LogLevel>(LogLevel.ERROR)\n    const log = u.statefulStream<Log>((label: string, message: any, level: LogLevel = LogLevel.INFO) => {\n      const currentLevel = getGlobalThis()['VIRTUOSO_LOG_LEVEL'] ?? u.getValue(logLevel)\n      if (level >= currentLevel) {\n        // eslint-disable-next-line no-console\n        console[CONSOLE_METHOD_MAP[level]](\n          '%creact-virtuoso: %c%s %o',\n          'color: #0253b3; font-weight: bold',\n          'color: initial',\n          label,\n          message\n        )\n      }\n    })\n\n    return {\n      log,\n      logLevel,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import { useRef } from 'react'\n\nexport type CallbackRefParam = HTMLElement | null\n\nexport function useSizeWithElRef(callback: (e: HTMLElement) => void, enabled = true) {\n  const ref = useRef<CallbackRefParam>(null)\n\n  let callbackRef = (_el: CallbackRefParam) => {\n    void 0\n  }\n\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      const element = entries[0].target as HTMLElement\n      if (element.offsetParent !== null) {\n        callback(element)\n      }\n    })\n\n    callbackRef = (elRef: CallbackRefParam) => {\n      if (elRef && enabled) {\n        observer.observe(elRef)\n        ref.current = elRef\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current)\n        }\n        ref.current = null\n      }\n    }\n  }\n\n  return { ref, callbackRef }\n}\n\nexport default function useSize(callback: (e: HTMLElement) => void, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef\n}\n","import { Log, LogLevel } from '../loggerSystem'\nimport { SizeRange } from '../sizeSystem'\nimport { useSizeWithElRef } from './useSize'\nimport { SizeFunction, ScrollContainerState } from '../interfaces'\nexport default function useChangedListContentsSizes(\n  callback: (ranges: SizeRange[]) => void,\n  itemSize: SizeFunction,\n  enabled: boolean,\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  log: Log,\n  gap?: (gap: number) => void,\n  customScrollParent?: HTMLElement\n) {\n  return useSizeWithElRef((el: HTMLElement) => {\n    const ranges = getChangedChildSizes(el.children, itemSize, 'offsetHeight', log)\n    let scrollableElement = el.parentElement!\n\n    while (!scrollableElement.dataset['virtuosoScroller']) {\n      scrollableElement = scrollableElement.parentElement!\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const windowScrolling = (scrollableElement.firstElementChild! as HTMLDivElement).dataset['viewportType']! === 'window'\n\n    const scrollTop = customScrollParent\n      ? customScrollParent.scrollTop\n      : windowScrolling\n      ? window.pageYOffset || document.documentElement.scrollTop\n      : scrollableElement.scrollTop\n\n    const scrollHeight = customScrollParent\n      ? customScrollParent.scrollHeight\n      : windowScrolling\n      ? document.documentElement.scrollHeight\n      : scrollableElement.scrollHeight\n\n    const viewportHeight = customScrollParent\n      ? customScrollParent.offsetHeight\n      : windowScrolling\n      ? window.innerHeight\n      : scrollableElement.offsetHeight\n\n    scrollContainerStateCallback({\n      scrollTop: Math.max(scrollTop, 0),\n      scrollHeight,\n      viewportHeight,\n    })\n\n    gap?.(resolveGapValue('row-gap', getComputedStyle(el).rowGap, log))\n\n    if (ranges !== null) {\n      callback(ranges)\n    }\n  }, enabled)\n}\n\nfunction getChangedChildSizes(children: HTMLCollection, itemSize: SizeFunction, field: 'offsetHeight' | 'offsetWidth', log: Log) {\n  const length = children.length\n\n  if (length === 0) {\n    return null\n  }\n\n  const results: SizeRange[] = []\n\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i) as HTMLElement\n\n    if (!child || child.dataset.index === undefined) {\n      continue\n    }\n\n    const index = parseInt(child.dataset.index!)\n    const knownSize = parseFloat(child.dataset.knownSize!)\n    const size = itemSize(child, field)\n\n    if (size === 0) {\n      log('Zero-sized element, this should not happen', { child }, LogLevel.ERROR)\n    }\n\n    if (size === knownSize) {\n      continue\n    }\n\n    const lastResult = results[results.length - 1]\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size })\n    } else {\n      results[results.length - 1].endIndex++\n    }\n  }\n\n  return results\n}\n\nfunction resolveGapValue(property: string, value: string | undefined, log: Log) {\n  if (value !== 'normal' && !value?.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value ?? '0', 10)\n}\n","export function correctItemSize(el: HTMLElement, dimension: 'height' | 'width') {\n  return Math.round(el.getBoundingClientRect()[dimension])\n}\n","export function approximatelyEqual(num1: number, num2: number) {\n  return Math.abs(num1 - num2) < 1.01\n}\n","import { useRef, useCallback, useEffect } from 'react'\nimport * as u from '@virtuoso.dev/urx'\nimport { correctItemSize } from '../utils/correctItemSize'\nimport { ScrollContainerState } from '../interfaces'\nimport { flushSync } from 'react-dom'\nimport { approximatelyEqual } from '../utils/approximatelyEqual'\n\nexport type ScrollerRef = Window | HTMLElement | null\n\nexport default function useScrollTop(\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  smoothScrollTargetReached: (yes: true) => void,\n  scrollerElement: any,\n  scrollerRefCallback: (ref: ScrollerRef) => void = u.noop,\n  customScrollParent?: HTMLElement\n) {\n  const scrollerRef = useRef<HTMLElement | null | Window>(null)\n  const scrollTopTarget = useRef<any>(null)\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const shouldFlushSync = useRef(false)\n\n  const handler = useCallback(\n    (ev: Event) => {\n      const el = ev.target as HTMLElement\n      const windowScroll = (el as any) === window || (el as any) === document\n      const scrollTop = windowScroll ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop\n      const scrollHeight = windowScroll ? document.documentElement.scrollHeight : el.scrollHeight\n      const viewportHeight = windowScroll ? window.innerHeight : el.offsetHeight\n\n      const call = () => {\n        scrollContainerStateCallback({\n          scrollTop: Math.max(scrollTop, 0),\n          scrollHeight,\n          viewportHeight,\n        })\n      }\n\n      if (shouldFlushSync.current) {\n        flushSync(call)\n      } else {\n        call()\n      }\n      shouldFlushSync.current = false\n\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === scrollHeight - viewportHeight) {\n          scrollTopTarget.current = null\n          smoothScrollTargetReached(true)\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current)\n            timeoutRef.current = null\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  )\n\n  useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current!\n\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current)\n    handler({ target: localRef } as unknown as Event)\n    localRef.addEventListener('scroll', handler, { passive: true })\n\n    return () => {\n      scrollerRefCallback(null)\n      localRef.removeEventListener('scroll', handler)\n    }\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent])\n\n  function scrollToCallback(location: ScrollToOptions) {\n    const scrollerElement = scrollerRef.current\n    if (!scrollerElement || ('offsetHeight' in scrollerElement && scrollerElement.offsetHeight === 0)) {\n      return\n    }\n\n    const isSmooth = location.behavior === 'smooth'\n\n    let offsetHeight: number\n    let scrollHeight: number\n    let scrollTop: number\n\n    if (scrollerElement === window) {\n      // this is not a mistake\n      scrollHeight = Math.max(correctItemSize(document.documentElement, 'height'), document.documentElement.scrollHeight)\n      offsetHeight = window.innerHeight\n      scrollTop = document.documentElement.scrollTop\n    } else {\n      scrollHeight = (scrollerElement as HTMLElement).scrollHeight\n      offsetHeight = correctItemSize(scrollerElement as HTMLElement, 'height')\n      scrollTop = (scrollerElement as HTMLElement).scrollTop\n    }\n\n    const maxScrollTop = scrollHeight - offsetHeight\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top!), 0))\n\n    // avoid system hanging because the DOM never called back\n    // with the scrollTop\n    // scroller is already at this location\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback({ scrollTop, scrollHeight, viewportHeight: offsetHeight })\n      if (isSmooth) {\n        smoothScrollTargetReached(true)\n      }\n      return\n    }\n\n    if (isSmooth) {\n      scrollTopTarget.current = location.top\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current)\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null\n        scrollTopTarget.current = null\n        smoothScrollTargetReached(true)\n      }, 1000)\n    } else {\n      scrollTopTarget.current = null\n    }\n\n    scrollerElement.scrollTo(location)\n  }\n\n  function scrollByCallback(location: ScrollToOptions) {\n    shouldFlushSync.current = true\n    scrollerRef.current!.scrollBy(location)\n  }\n\n  return { scrollerRef, scrollByCallback, scrollToCallback }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { ScrollContainerState } from './interfaces'\n\nexport const domIOSystem = u.system(\n  () => {\n    const scrollContainerState = u.stream<ScrollContainerState>()\n    const scrollTop = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const smoothScrollTargetReached = u.stream<true>()\n    const statefulScrollTop = u.statefulStream(0)\n    const viewportHeight = u.stream<number>()\n    const scrollHeight = u.stream<number>()\n    const headerHeight = u.statefulStream(0)\n    const fixedHeaderHeight = u.statefulStream(0)\n    const fixedFooterHeight = u.statefulStream(0)\n    const footerHeight = u.statefulStream(0)\n    const scrollTo = u.stream<ScrollToOptions>()\n    const scrollBy = u.stream<ScrollToOptions>()\n    const scrollingInProgress = u.statefulStream(false)\n    // bogus, has no effect\n    const react18ConcurrentRendering = u.statefulStream(false)\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollTop }) => scrollTop)\n      ),\n      scrollTop\n    )\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollHeight }) => scrollHeight)\n      ),\n      scrollHeight\n    )\n\n    u.connect(scrollTop, statefulScrollTop)\n\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      fixedHeaderHeight,\n      fixedFooterHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n      react18ConcurrentRendering,\n\n      // signals\n      scrollTo,\n      scrollBy,\n\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","interface NilNode {\n  lvl: 0\n}\n\nconst NIL_NODE: NilNode = { lvl: 0 }\n\ninterface NodeData<T> {\n  k: number\n  v: T\n}\n\ninterface NonNilAANode<T> {\n  k: number\n  v: T\n  lvl: number\n  l: NonNilAANode<T> | NilNode\n  r: NonNilAANode<T> | NilNode\n}\n\nexport interface Range<T> {\n  start: number\n  end: number\n  value: T\n}\n\nexport type AANode<T> = NilNode | NonNilAANode<T>\n\nfunction newAANode<T>(k: number, v: T, lvl: number, l: AANode<T> = NIL_NODE, r: AANode<T> = NIL_NODE): NonNilAANode<T> {\n  return { k, v, lvl, l, r }\n}\n\nexport function empty(node: AANode<any>): node is NilNode {\n  return node === NIL_NODE\n}\n\nexport function newTree<T>(): AANode<T> {\n  return NIL_NODE\n}\n\nexport function remove<T>(node: AANode<T>, key: number): AANode<T> {\n  if (empty(node)) return NIL_NODE\n\n  const { k, l, r } = node\n\n  if (key === k) {\n    if (empty(l)) {\n      return r\n    } else if (empty(r)) {\n      return l\n    } else {\n      const [lastKey, lastValue] = last(l)\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }))\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }))\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }))\n  }\n}\n\nexport function find<T>(node: AANode<T>, key: number): T | undefined {\n  if (empty(node)) {\n    return\n  }\n\n  if (key === node.k) {\n    return node.v\n  } else if (key < node.k) {\n    return find(node.l, key)\n  } else {\n    return find(node.r, key)\n  }\n}\n\nexport function findMaxKeyValue<T>(node: AANode<T>, value: number, field: 'k' | 'v' = 'k'): [number, T | undefined] {\n  if (empty(node)) {\n    return [-Infinity, undefined]\n  }\n\n  if (node[field] === value) {\n    return [node.k, node.v]\n  }\n\n  if (node[field] < value) {\n    const r = findMaxKeyValue(node.r, value, field)\n    if (r[0] === -Infinity) {\n      return [node.k, node.v]\n    } else {\n      return r\n    }\n  }\n\n  return findMaxKeyValue(node.l, value, field)\n}\n\nexport function insert<T>(node: AANode<T>, k: number, v: T): NonNilAANode<T> {\n  if (empty(node)) {\n    return newAANode(k, v, 1)\n  }\n  if (k === node.k) {\n    return clone(node, { k, v })\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }))\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }))\n  }\n}\n\nexport function walkWithin<T>(node: AANode<T>, start: number, end: number): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  const { k, v, l, r } = node\n  let result: NodeData<T>[] = []\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end))\n  }\n\n  if (k >= start && k <= end) {\n    result.push({ k, v })\n  }\n\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end))\n  }\n\n  return result\n}\n\nexport function walk<T>(node: AANode<T>): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)]\n}\n\nfunction last<T>(node: NonNilAANode<T>): [number, T] {\n  return empty(node.r) ? [node.k, node.v] : last(node.r)\n}\n\nfunction deleteLast<T>(node: NonNilAANode<T>): AANode<T> {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }))\n}\n\nfunction clone<T>(node: NonNilAANode<T>, args: Partial<NonNilAANode<T>>): NonNilAANode<T> {\n  return newAANode(\n    args.k !== undefined ? args.k : node.k,\n    args.v !== undefined ? args.v : node.v,\n    args.lvl !== undefined ? args.lvl : node.lvl,\n    args.l !== undefined ? args.l : node.l,\n    args.r !== undefined ? args.r : node.r\n  )\n}\n\nfunction isSingle(node: AANode<any>) {\n  return empty(node) || node.lvl > node.r.lvl\n}\n\nfunction rebalance<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  return split(skew(node))\n}\n\nfunction adjust<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l, r, lvl } = node\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1,\n          }),\n          lvl: lvl,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl\n\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1,\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  }\n}\n\nexport function keys(node: AANode<any>): number[] {\n  if (empty(node)) {\n    return []\n  }\n  return [...keys(node.l), node.k, ...keys(node.r)]\n}\n\nexport function ranges<T>(node: AANode<T>): Range<T>[] {\n  return toRanges(walk(node))\n}\n\nexport function rangesWithin<T>(node: AANode<T>, startIndex: number, endIndex: number): Range<T>[] {\n  if (empty(node)) {\n    return []\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0]\n  return toRanges(walkWithin(node, adjustedStart, endIndex))\n}\n\nexport function arrayToRanges<T, V>(\n  items: T[],\n  parser: (item: T) => { index: number; value: V }\n): Array<{ start: number; end: number; value: V }> {\n  const length = items.length\n  if (length === 0) {\n    return []\n  }\n\n  let { index: start, value } = parser(items[0])\n\n  const result = []\n\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i])\n    result.push({ start, end: nextIndex - 1, value })\n\n    start = nextIndex\n    value = nextValue\n  }\n\n  result.push({ start, end: Infinity, value })\n  return result\n}\n\nfunction toRanges<T>(nodes: NodeData<T>[]): Range<T>[] {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }))\n}\n\nfunction split<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { r, lvl } = node\n\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node\n}\n\nfunction skew<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l } = node\n\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node\n}\n","export type Comparator<T> = {\n  (item: T, value: number): -1 | 0 | 1\n}\n\nexport function findIndexOfClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>, start = 0): number {\n  let end = items.length - 1\n\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2)\n    const item = items[index]\n    const match = comparator(item, value)\n    if (match === 0) {\n      return index\n    }\n\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1\n      }\n      end = index - 1\n    } else {\n      if (end === start) {\n        return index\n      }\n      start = index + 1\n    }\n  }\n\n  throw new Error(`Failed binary finding record in array - ${items.join(',')}, searched for ${value}`)\n}\n\nexport function findClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>): T {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)]\n}\n\nexport function findRange<T>(items: T[], startValue: number, endValue: number, comparator: Comparator<T>): T[] {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator)\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex)\n  return items.slice(startIndex, endIndex + 1)\n}\n","import * as u from '@virtuoso.dev/urx'\n\nexport const recalcSystem = u.system(\n  () => {\n    const recalcInProgress = u.statefulStream(false)\n    return { recalcInProgress }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { arrayToRanges, AANode, empty, findMaxKeyValue, insert, newTree, Range, rangesWithin, remove, walk } from './AATree'\nimport * as arrayBinarySearch from './utils/binaryArraySearch'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { loggerSystem, Log, LogLevel } from './loggerSystem'\nimport { recalcSystem } from './recalcSystem'\nimport { SizeFunction } from './interfaces'\n\nexport interface SizeRange {\n  startIndex: number\n  endIndex: number\n  size: number\n}\n\nexport type Data = readonly unknown[] | undefined\n\nfunction rangeIncludes(refRange: SizeRange) {\n  const { size, startIndex, endIndex } = refRange\n  return (range: Range<number>) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size\n  }\n}\n\nexport function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[]) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity\n\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range\n    syncStart = Math.min(syncStart, startIndex)\n\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size)\n      continue\n    }\n\n    // extend the range in both directions, so that we can get adjacent neighbours.\n    // if the previous / next ones have the same value as the one we are about to insert,\n    // we 'merge' them.\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1)\n\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue\n    }\n\n    let firstPassDone = false\n    let shouldInsert = false\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      // previous range\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size\n        firstPassDone = true\n      } else {\n        // remove the range if it starts within the new range OR if\n        // it has the same value as it, in order to perform a merge\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart)\n        }\n      }\n\n      // next range\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue)\n        }\n      }\n    }\n\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size)\n    }\n  }\n  return [sizeTree, syncStart] as const\n}\n\nexport interface OffsetPoint {\n  offset: number\n  size: number\n  index: number\n}\n\nexport interface SizeState {\n  sizeTree: AANode<number>\n  offsetTree: Array<OffsetPoint>\n  groupOffsetTree: AANode<number>\n  lastIndex: number\n  lastOffset: number\n  lastSize: number\n  groupIndices: number[]\n}\n\nexport function initialSizeState(): SizeState {\n  return {\n    offsetTree: [],\n    sizeTree: newTree<number>(),\n    groupOffsetTree: newTree<number>(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: [],\n  }\n}\n\nexport function indexComparator({ index: itemIndex }: OffsetPoint, index: number) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1\n}\n\nexport function offsetComparator({ offset: itemOffset }: OffsetPoint, offset: number) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1\n}\n\nfunction offsetPointParser(point: OffsetPoint) {\n  return { index: point.index, value: point }\n}\n\nexport function rangesWithinOffsets(\n  tree: Array<OffsetPoint>,\n  startOffset: number,\n  endOffset: number,\n  minStartIndex = 0\n): Array<{\n  start: number\n  end: number\n  value: {\n    size: number\n    offset: number\n    index: number\n  }\n}> {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, arrayBinarySearch.findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset)\n  }\n\n  return arrayToRanges(arrayBinarySearch.findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser)\n}\n\nfunction createOffsetTree(prevOffsetTree: OffsetPoint[], syncStart: number, sizeTree: AANode<number>, gap: number) {\n  let offsetTree = prevOffsetTree\n  let prevIndex = 0\n  let prevSize = 0\n\n  let prevOffset = 0\n  let startIndex = 0\n\n  if (syncStart !== 0) {\n    startIndex = arrayBinarySearch.findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator)\n    const offsetInfo = offsetTree[startIndex]\n    prevOffset = offsetInfo.offset\n    const kv = findMaxKeyValue(sizeTree, syncStart - 1)\n    prevIndex = kv[0]\n    prevSize = kv[1]!\n\n    if (offsetTree.length && offsetTree[startIndex].size === findMaxKeyValue(sizeTree, syncStart)[1]) {\n      startIndex -= 1\n    }\n\n    offsetTree = offsetTree.slice(0, startIndex + 1)\n  } else {\n    offsetTree = []\n  }\n\n  for (const { start: startIndex, value } of rangesWithin(sizeTree, syncStart, Infinity)) {\n    const indexOffset = startIndex - prevIndex\n    const aOffset = indexOffset * prevSize + prevOffset + indexOffset * gap\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex,\n    })\n    prevIndex = startIndex\n    prevOffset = aOffset\n    prevSize = value\n  }\n\n  return {\n    offsetTree,\n    lastIndex: prevIndex,\n    lastOffset: prevOffset,\n    lastSize: prevSize,\n  }\n}\n\nexport function sizeStateReducer(state: SizeState, [ranges, groupIndices, log, gap]: [SizeRange[], number[], Log, number]) {\n  if (ranges.length > 0) {\n    log('received item sizes', ranges, LogLevel.DEBUG)\n  }\n  const sizeTree = state.sizeTree\n  let newSizeTree: AANode<number> = sizeTree\n  let syncStart = 0\n\n  // We receive probe item results from a group probe,\n  // which should always pass an item and a group\n  // the results contain two ranges, which we consider to mean that groups and items have different size\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size\n    const itemSize = ranges[1].size\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize)\n    }, newSizeTree)\n  } else {\n    ;[newSizeTree, syncStart] = insertRanges(newSizeTree, ranges)\n  }\n\n  if (newSizeTree === sizeTree) {\n    return state\n  }\n\n  const { offsetTree: newOffsetTree, lastIndex, lastSize, lastOffset } = createOffsetTree(state.offsetTree, syncStart, newSizeTree, gap)\n\n  return {\n    sizeTree: newSizeTree,\n    offsetTree: newOffsetTree,\n    lastIndex,\n    lastOffset,\n    lastSize,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, newOffsetTree, gap))\n    }, newTree<number>()),\n    groupIndices,\n  }\n}\n\nexport function offsetOf(index: number, tree: Array<OffsetPoint>, gap: number) {\n  if (tree.length === 0) {\n    return 0\n  }\n\n  const { offset, index: startIndex, size } = arrayBinarySearch.findClosestSmallerOrEqual(tree, index, indexComparator)\n  const itemCount = index - startIndex\n  const top = size * itemCount + (itemCount - 1) * gap + offset\n  return top > 0 ? top + gap : top\n}\n\nexport type FlatOrGroupedLocation = { index: number | 'LAST' } | { groupIndex: number }\n\nexport function isGroupLocation(location: FlatOrGroupedLocation): location is { groupIndex: number } {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return typeof (location as any).groupIndex !== 'undefined'\n}\n\nexport function originalIndexFromLocation(location: FlatOrGroupedLocation, sizes: SizeState, lastIndex: number) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (isGroupLocation(location)) {\n    // return the index of the first item below the index\n    return sizes.groupIndices[location.groupIndex] + 1\n  } else {\n    const numericIndex = location.index === 'LAST' ? lastIndex : location.index\n    let result = originalIndexFromItemIndex(numericIndex, sizes)\n    result = Math.max(0, result, Math.min(lastIndex, result))\n    return result\n  }\n}\n\nexport function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState) {\n  if (!hasGroups(sizes)) {\n    return itemIndex\n  }\n\n  let groupOffset = 0\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++\n  }\n  // we find the real item index, offsetting it by the number of group items before it\n  return itemIndex + groupOffset\n}\n\nexport function hasGroups(sizes: SizeState) {\n  return !empty(sizes.groupOffsetTree)\n}\n\ntype OptionalNumber = number | undefined\n\nconst SIZE_MAP = {\n  offsetHeight: 'height',\n  offsetWidth: 'width',\n} as const\n\nexport const sizeSystem = u.system(\n  ([{ log }, { recalcInProgress }]) => {\n    const sizeRanges = u.stream<SizeRange[]>()\n    const totalCount = u.stream<number>()\n    const statefulTotalCount = u.statefulStreamFromEmitter(totalCount, 0)\n    const unshiftWith = u.stream<number>()\n    const shiftWith = u.stream<number>()\n    const firstItemIndex = u.statefulStream(0)\n    const groupIndices = u.statefulStream([] as number[])\n    const fixedItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const defaultItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const itemSize = u.statefulStream<SizeFunction>((el, field) => correctItemSize(el, SIZE_MAP[field]))\n    const data = u.statefulStream<Data>(undefined)\n    const gap = u.statefulStream(0)\n    const initial = initialSizeState()\n\n    const sizes = u.statefulStreamFromEmitter(\n      u.pipe(sizeRanges, u.withLatestFrom(groupIndices, log, gap), u.scan(sizeStateReducer, initial), u.distinctUntilChanged()),\n      initial\n    )\n\n    u.connect(\n      u.pipe(\n        groupIndices,\n        u.filter((indexes) => indexes.length > 0),\n        u.withLatestFrom(sizes, gap),\n        u.map(([groupIndices, sizes, gap]) => {\n          const groupOffsetTree = groupIndices.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes.offsetTree, gap) || idx)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            groupIndices,\n            groupOffsetTree,\n          }\n        })\n      ),\n      sizes\n    )\n\n    // decreasing the total count should remove any existing entries\n    // beyond the last index - do this by publishing the default size as a range over them.\n    u.connect(\n      u.pipe(\n        totalCount,\n        u.withLatestFrom(sizes),\n        u.filter(([totalCount, { lastIndex }]) => {\n          return totalCount < lastIndex\n        }),\n        u.map(([totalCount, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount,\n              endIndex: lastIndex,\n              size: lastSize,\n            },\n          ] as SizeRange[]\n        })\n      ),\n      sizeRanges\n    )\n\n    u.connect(fixedItemSize, defaultItemSize)\n\n    const trackItemSizes = u.statefulStreamFromEmitter(\n      u.pipe(\n        fixedItemSize,\n        u.map((size) => size === undefined)\n      ),\n      true\n    )\n\n    u.connect(\n      u.pipe(\n        defaultItemSize,\n        u.filter((value) => {\n          return value !== undefined && empty(u.getValue(sizes).sizeTree)\n        }),\n        u.map((size) => [{ startIndex: 0, endIndex: 0, size }] as SizeRange[])\n      ),\n      sizeRanges\n    )\n\n    const listRefresh = u.streamFromEmitter(\n      u.pipe(\n        sizeRanges,\n        u.withLatestFrom(sizes),\n        u.scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes,\n            }\n          },\n          { changed: false, sizes: initial }\n        ),\n        u.map((value) => value.changed)\n      )\n    )\n\n    u.subscribe(\n      u.pipe(\n        firstItemIndex,\n        u.scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next }\n          },\n          { diff: 0, prev: 0 }\n        ),\n        u.map((val) => val.diff)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(recalcInProgress, true)\n          u.publish(unshiftWith, offset)\n        } else if (offset < 0) {\n          u.publish(shiftWith, offset)\n        }\n      }\n    )\n\n    u.subscribe(u.pipe(firstItemIndex, u.withLatestFrom(log)), ([index, log]) => {\n      if (index < 0) {\n        log(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        )\n      }\n    })\n\n    // Capture the current list top item before the sizes get refreshed\n    const beforeUnshiftWith = u.streamFromEmitter(unshiftWith)\n\n    u.connect(\n      u.pipe(\n        unshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([unshiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: prepending items does not work with groups')\n          }\n\n          return walk(sizes.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith,\n                prevSize: size,\n              }\n            },\n            {\n              ranges: [] as SizeRange[],\n              prevIndex: 0,\n              prevSize: sizes.lastSize,\n            }\n          ).ranges\n        })\n      ),\n      sizeRanges\n    )\n\n    const shiftWithOffset = u.streamFromEmitter(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, { offsetTree }, gap]) => {\n          const newFirstItemIndex = -shiftWith\n          return offsetOf(newFirstItemIndex, offsetTree, gap)\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, sizes, gap]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: shifting items does not work with groups')\n          }\n\n          const newSizeTree = walk(sizes.sizeTree).reduce((acc, { k, v }) => {\n            return insert(acc, Math.max(0, k + shiftWith), v)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            sizeTree: newSizeTree,\n            ...createOffsetTree(sizes.offsetTree, 0, newSizeTree, gap),\n          }\n        })\n      ),\n      sizes\n    )\n\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      shiftWith,\n      shiftWithOffset,\n      beforeUnshiftWith,\n      firstItemIndex,\n      gap,\n\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize,\n    }\n  },\n  u.tup(loggerSystem, recalcSystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { IndexLocationWithAlign } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport type IndexLocation = number | IndexLocationWithAlign\n\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== 'undefined' && 'scrollBehavior' in document.documentElement.style\n\nexport function normalizeIndexLocation(location: IndexLocation) {\n  const result: IndexLocationWithAlign = typeof location === 'number' ? { index: location } : location\n\n  if (!result.align) {\n    result.align = 'start'\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = 'auto'\n  }\n  if (!result.offset) {\n    result.offset = 0\n  }\n\n  return result\n}\n\nexport const scrollToIndexSystem = u.system(\n  ([\n    { sizes, totalCount, listRefresh, gap },\n    {\n      scrollingInProgress,\n      viewportHeight,\n      scrollTo,\n      smoothScrollTargetReached,\n      headerHeight,\n      footerHeight,\n      fixedHeaderHeight,\n      fixedFooterHeight,\n    },\n    { log },\n  ]) => {\n    const scrollToIndex = u.stream<IndexLocation>()\n    const topListHeight = u.statefulStream(0)\n\n    let unsubscribeNextListRefresh: any = null\n    let cleartTimeoutRef: ReturnType<typeof setTimeout> | null = null\n    let unsubscribeListRefresh: any = null\n\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh()\n        unsubscribeNextListRefresh = null\n      }\n\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh()\n        unsubscribeListRefresh = null\n      }\n\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef)\n        cleartTimeoutRef = null\n      }\n      u.publish(scrollingInProgress, false)\n    }\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        u.withLatestFrom(gap, fixedHeaderHeight, fixedFooterHeight),\n        u.map(\n          ([\n            [location, sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log],\n            gap,\n            fixedHeaderHeight,\n            fixedFooterHeight,\n          ]) => {\n            const normalLocation = normalizeIndexLocation(location)\n            const { align, behavior, offset } = normalLocation\n            const lastIndex = totalCount - 1\n\n            const index = originalIndexFromLocation(normalLocation, sizes, lastIndex)\n\n            let top = offsetOf(index, sizes.offsetTree, gap) + headerHeight\n            if (align === 'end') {\n              top += fixedHeaderHeight + findMaxKeyValue(sizes.sizeTree, index)[1]! - viewportHeight + fixedFooterHeight\n              if (index === lastIndex) {\n                top += footerHeight\n              }\n            } else if (align === 'center') {\n              top += (fixedHeaderHeight + findMaxKeyValue(sizes.sizeTree, index)[1]! - viewportHeight + fixedFooterHeight) / 2\n            } else {\n              top -= topListHeight\n            }\n\n            if (offset) {\n              top += offset\n            }\n\n            const retry = (listChanged: boolean) => {\n              cleanup()\n              if (listChanged) {\n                log('retrying to scroll to', { location }, LogLevel.DEBUG)\n                u.publish(scrollToIndex, location)\n              } else {\n                log('list did not change, scroll successful', {}, LogLevel.DEBUG)\n              }\n            }\n\n            cleanup()\n\n            if (behavior === 'smooth') {\n              let listChanged = false\n              unsubscribeListRefresh = u.subscribe(listRefresh, (changed) => {\n                listChanged = listChanged || changed\n              })\n\n              unsubscribeNextListRefresh = u.handleNext(smoothScrollTargetReached, () => {\n                retry(listChanged)\n              })\n            } else {\n              unsubscribeNextListRefresh = u.handleNext(u.pipe(listRefresh, watchChangesFor(150)), retry)\n            }\n\n            // if the scroll jump is too small, the list won't get rerendered.\n            // clean this listener\n            cleartTimeoutRef = setTimeout(() => {\n              cleanup()\n            }, 1200)\n\n            u.publish(scrollingInProgress, true)\n            log('scrolling from index to', { index, top, behavior }, LogLevel.DEBUG)\n            return { top, behavior }\n          }\n        )\n      ),\n      scrollTo\n    )\n\n    return {\n      scrollToIndex,\n      topListHeight,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n)\n\nfunction watchChangesFor(limit: number): u.Operator<boolean> {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false)\n    }, limit)\n    return (value) => {\n      if (value) {\n        done(true)\n        clearTimeout(timeoutRef)\n      }\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-argument */\nimport * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { approximatelyEqual } from './utils/approximatelyEqual'\n\nexport const UP = 'up' as const\nexport const DOWN = 'down' as const\nexport const NONE = 'none' as const\nexport type ScrollDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport interface ListBottomInfo {\n  bottom: number\n  offsetBottom: number\n}\n\nexport interface AtBottomParams {\n  offsetBottom: number\n  scrollTop: number\n  viewportHeight: number\n  scrollHeight: number\n}\n\nexport type NotAtBottomReason =\n  | 'SIZE_INCREASED'\n  | 'NOT_SHOWING_LAST_ITEM'\n  | 'VIEWPORT_HEIGHT_DECREASING'\n  | 'SCROLLING_UPWARDS'\n  | 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n\nexport type AtBottomReason = 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n\nexport type AtBottomState =\n  | {\n      atBottom: false\n      notAtBottomBecause: NotAtBottomReason\n      state: AtBottomParams\n    }\n  | {\n      atBottom: true\n      state: AtBottomParams\n      atBottomBecause: AtBottomReason\n      scrollTopDelta: number\n    }\n\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: 'NOT_SHOWING_LAST_ITEM',\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0,\n  },\n} as AtBottomState\n\nconst DEFAULT_AT_TOP_THRESHOLD = 0\n\nexport const stateFlagsSystem = u.system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = u.statefulStream(false)\n  const isAtTop = u.statefulStream(true)\n  const atBottomStateChange = u.stream<boolean>()\n  const atTopStateChange = u.stream<boolean>()\n  const atBottomThreshold = u.statefulStream(4)\n  const atTopThreshold = u.statefulStream(DEFAULT_AT_TOP_THRESHOLD)\n\n  // skip 1 to avoid an initial on/off flick\n  const isScrolling = u.statefulStreamFromEmitter(\n    u.pipe(\n      u.merge(u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(true)), u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(false), u.debounceTime(100))),\n      u.distinctUntilChanged()\n    ),\n    false\n  )\n\n  const isScrollingBy = u.statefulStreamFromEmitter(\n    u.pipe(u.merge(u.pipe(scrollBy, u.mapTo(true)), u.pipe(scrollBy, u.mapTo(false), u.debounceTime(200))), u.distinctUntilChanged()),\n    false\n  )\n\n  // u.subscribe(isScrollingBy, (isScrollingBy) => console.log({ isScrollingBy }))\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(u.duc(scrollTop), u.duc(atTopThreshold)),\n      u.map(([top, atTopThreshold]) => top <= atTopThreshold),\n      u.distinctUntilChanged()\n    ),\n    isAtTop\n  )\n\n  u.connect(u.pipe(isAtTop, u.throttleTime(50)), atTopStateChange)\n\n  const atBottomState = u.streamFromEmitter(\n    u.pipe(\n      u.combineLatest(scrollContainerState, u.duc(viewportHeight), u.duc(headerHeight), u.duc(footerHeight), u.duc(atBottomThreshold)),\n      u.scan((current, [{ scrollTop, scrollHeight }, viewportHeight, _headerHeight, _footerHeight, atBottomThreshold]) => {\n        const isAtBottom = scrollTop + viewportHeight - scrollHeight > -atBottomThreshold\n        const state = {\n          viewportHeight,\n          scrollTop,\n          scrollHeight,\n        }\n\n        if (isAtBottom) {\n          let atBottomBecause: 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n          let scrollTopDelta: number\n          if (scrollTop > current.state.scrollTop) {\n            atBottomBecause = 'SCROLLED_DOWN'\n            scrollTopDelta = current.state.scrollTop - scrollTop\n          } else {\n            atBottomBecause = 'SIZE_DECREASED'\n            scrollTopDelta = current.state.scrollTop - scrollTop || (current as { scrollTopDelta: number }).scrollTopDelta\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta,\n          } as AtBottomState\n        }\n\n        let notAtBottomBecause: NotAtBottomReason\n\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = 'SIZE_INCREASED'\n        } else if (viewportHeight < current.state.viewportHeight) {\n          notAtBottomBecause = 'VIEWPORT_HEIGHT_DECREASING'\n        } else if (scrollTop < current.state.scrollTop) {\n          notAtBottomBecause = 'SCROLLING_UPWARDS'\n        } else {\n          notAtBottomBecause = 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n        }\n\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state,\n        } as AtBottomState\n      }, INITIAL_BOTTOM_STATE),\n      u.distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom\n      })\n    )\n  )\n\n  const lastJumpDueToItemResize = u.statefulStreamFromEmitter(\n    u.pipe(\n      scrollContainerState,\n      u.scan(\n        (current, { scrollTop, scrollHeight, viewportHeight }) => {\n          if (!approximatelyEqual(current.scrollHeight, scrollHeight)) {\n            const atBottom = scrollHeight - (scrollTop + viewportHeight) < 1\n\n            if (current.scrollTop !== scrollTop && atBottom) {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: current.scrollTop - scrollTop,\n                changed: true,\n              }\n            } else {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: 0,\n                changed: true,\n              }\n            }\n          } else {\n            return {\n              scrollTop,\n              scrollHeight,\n              jump: 0,\n              changed: false,\n            }\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      u.filter((value) => value.changed),\n      u.map((value) => value.jump)\n    ),\n    0\n  )\n\n  u.connect(\n    u.pipe(\n      atBottomState,\n      u.map((state) => state.atBottom)\n    ),\n    isAtBottom\n  )\n\n  u.connect(u.pipe(isAtBottom, u.throttleTime(50)), atBottomStateChange)\n\n  const scrollDirection = u.statefulStream<ScrollDirection>(DOWN)\n\n  u.connect(\n    u.pipe(\n      scrollContainerState,\n      u.map(({ scrollTop }) => scrollTop),\n      u.distinctUntilChanged(),\n      u.scan(\n        (acc, scrollTop) => {\n          // if things change while compensating for items, ignore,\n          // but store the new scrollTop\n          if (u.getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop }\n          }\n\n          return { direction: scrollTop < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop }\n        },\n        { direction: DOWN, prevScrollTop: 0 } as { direction: ScrollDirection; prevScrollTop: number }\n      ),\n      u.map((value) => value.direction)\n    ),\n    scrollDirection\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n  u.connect(u.pipe(scrollContainerState, u.throttleTime(50), u.mapTo(NONE)), scrollDirection)\n\n  const scrollVelocity = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      isScrolling,\n      u.filter((value) => !value),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      u.mapTo(0)\n    ),\n    scrollVelocity\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTop,\n      u.throttleTime(100),\n      u.withLatestFrom(isScrolling),\n      u.filter(([_, isScrolling]) => !!isScrolling),\n      u.scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      u.map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  )\n\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    atTopThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport const propsReadySystem = u.system(\n  ([{ log }]) => {\n    const propsReady = u.statefulStream(false)\n\n    const didMount = u.streamFromEmitter(\n      u.pipe(\n        propsReady,\n        u.filter((ready) => ready),\n        u.distinctUntilChanged()\n      )\n    )\n    u.subscribe(propsReady, (value) => {\n      value && u.getValue(log)('props updated', {}, LogLevel.DEBUG)\n    })\n\n    return { propsReady, didMount }\n  },\n  u.tup(loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty } from './AATree'\nimport { sizeSystem } from './sizeSystem'\nimport { domIOSystem } from './domIOSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\n\nexport function getInitialTopMostItemIndexNumber(location: number | FlatIndexLocationWithAlign, totalCount: number): number {\n  const lastIndex = totalCount - 1\n  const index = typeof location === 'number' ? location : location.index === 'LAST' ? lastIndex : location.index\n  return index\n}\n\nexport const initialTopMostItemIndexSystem = u.system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = u.statefulStream(true)\n    const initialTopMostItemIndex = u.statefulStream<number | FlatIndexLocationWithAlign>(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialTopMostItemIndex),\n        u.filter(([_, location]) => !!location),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(false)\n      ),\n      scrolledToInitialItem\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(listRefresh, didMount),\n        u.withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize),\n        u.filter(([[, didMount], scrolledToInitialItem, { sizeTree }, defaultItemSize]) => {\n          return didMount && (!empty(sizeTree) || defaultItemSize !== undefined) && !scrolledToInitialItem\n        }),\n        u.withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex]) => {\n        setTimeout(() => {\n          u.handleNext(scrollTop, () => {\n            u.publish(scrolledToInitialItem, true)\n          })\n          u.publish(scrollToIndex, initialTopMostItemIndex)\n        })\n      }\n    )\n\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { FollowOutput, FollowOutputScalarType } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { domIOSystem } from './domIOSystem'\n\nfunction normalizeFollowOutput(follow: FollowOutputScalarType): FollowOutputScalarType {\n  if (!follow) {\n    return false\n  }\n  return follow === 'smooth' ? 'smooth' : 'auto'\n}\n\nconst behaviorFromFollowOutput = (follow: FollowOutput, isAtBottom: boolean) => {\n  if (typeof follow === 'function') {\n    return normalizeFollowOutput(follow(isAtBottom))\n  }\n  return isAtBottom && normalizeFollowOutput(follow)\n}\n\nexport const followOutputSystem = u.system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress },\n  ]) => {\n    const followOutput = u.statefulStream<FollowOutput>(false)\n    const autoscrollToBottom = u.stream<true>()\n    let pendingScrollHandle: any = null\n\n    function scrollToBottom(followOutputBehavior: FollowOutputScalarType) {\n      u.publish(scrollToIndex, {\n        index: 'LAST',\n        align: 'end',\n        behavior: followOutputBehavior,\n      })\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.pipe(u.duc(totalCount), u.skip(1)), didMount),\n        u.withLatestFrom(u.duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        u.map(([[totalCount, didMount], followOutput, isAtBottom, scrolledToInitialItem, scrollingInProgress]) => {\n          let shouldFollow = didMount && scrolledToInitialItem\n          let followOutputBehavior: FollowOutputScalarType = 'auto'\n\n          if (shouldFollow) {\n            // if scrolling to index is in progress,\n            // assume that a previous followOutput response is going\n            followOutputBehavior = behaviorFromFollowOutput(followOutput, isAtBottom || scrollingInProgress)\n            shouldFollow = shouldFollow && !!followOutputBehavior\n          }\n\n          return { totalCount, shouldFollow, followOutputBehavior }\n        }),\n        u.filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle()\n          pendingScrollHandle = null\n        }\n\n        pendingScrollHandle = u.handleNext(listRefresh, () => {\n          u.getValue(log)('following output to ', { totalCount }, LogLevel.DEBUG)\n          scrollToBottom(followOutputBehavior)\n          pendingScrollHandle = null\n        })\n      }\n    )\n\n    function trapNextSizeIncrease(followOutput: boolean) {\n      const cancel = u.handleNext(atBottomState, (state) => {\n        if (followOutput && !state.atBottom && state.notAtBottomBecause === 'SIZE_INCREASED' && !pendingScrollHandle) {\n          u.getValue(log)('scrolling to bottom due to increased size', {}, LogLevel.DEBUG)\n          scrollToBottom('auto')\n        }\n      })\n      setTimeout(cancel, 100)\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.duc(followOutput), totalCount, propsReady),\n        u.filter(([follow, , ready]) => follow && ready),\n        u.scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next }\n          },\n          { refreshed: false, value: 0 }\n        ),\n        u.filter(({ refreshed }) => refreshed),\n        u.withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput]) => {\n        trapNextSizeIncrease(followOutput !== false)\n      }\n    )\n\n    u.subscribe(autoscrollToBottom, () => {\n      trapNextSizeIncrease(u.getValue(followOutput) !== false)\n    })\n\n    u.subscribe(u.combineLatest(u.duc(followOutput), atBottomState), ([followOutput, state]) => {\n      if (followOutput && !state.atBottom && state.notAtBottomBecause === 'VIEWPORT_HEIGHT_DECREASING') {\n        scrollToBottom('auto')\n      }\n    })\n\n    return { followOutput, autoscrollToBottom }\n  },\n  u.tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\n\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { sizeSystem, hasGroups } from './sizeSystem'\nexport interface GroupIndexesAndCount {\n  totalCount: number\n  groupIndices: number[]\n}\n\nexport function groupCountsToIndicesAndCount(counts: number[]) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount)\n      acc.totalCount += groupCount + 1\n      return acc\n    },\n    {\n      totalCount: 0,\n      groupIndices: [],\n    } as GroupIndexesAndCount\n  )\n}\n\nexport const groupedListSystem = u.system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = u.stream<number[]>()\n  const topItemsIndexes = u.stream<[number]>()\n  const groupIndicesAndCount = u.streamFromEmitter(u.pipe(groupCounts, u.map(groupCountsToIndicesAndCount)))\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.totalCount)\n    ),\n    totalCount\n  )\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.groupIndices)\n    ),\n    groupIndices\n  )\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(scrollTop, sizes, headerHeight),\n      u.filter(([_, sizes]) => hasGroups(sizes)),\n      u.map(([scrollTop, state, headerHeight]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop - headerHeight, 0), 'v')[0]),\n      u.distinctUntilChanged(),\n      u.map((index) => [index])\n    ),\n    topItemsIndexes\n  )\n\n  return { groupCounts, topItemsIndexes }\n}, u.tup(sizeSystem, domIOSystem))\n","import { ListRange } from './interfaces'\n\nexport function tupleComparator<T1, T2>(prev: [T1, T2] | undefined, current: [T1, T2]) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1])\n}\n\nexport function rangeComparator(prev: ListRange | undefined, next: ListRange) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex)\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { UP, DOWN, ScrollDirection } from './stateFlagsSystem'\nimport { tupleComparator } from './comparators'\n\nexport type NumberTuple = [number, number]\nexport type Overscan = number | { main: number; reverse: number }\nexport const TOP = 'top' as const\nexport const BOTTOM = 'bottom' as const\nexport const NONE = 'none' as const\nexport type ListEnd = typeof TOP | typeof BOTTOM\nexport type ViewportIncrease = number | { [k in ListEnd]?: number }\nexport type ChangeDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport function getOverscan(overscan: Overscan, end: ListEnd, direction: ScrollDirection) {\n  if (typeof overscan === 'number') {\n    return (direction === UP && end === TOP) || (direction === DOWN && end === BOTTOM) ? overscan : 0\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse\n    }\n  }\n}\n\nfunction getViewportIncrease(value: ViewportIncrease, end: ListEnd) {\n  return typeof value === 'number' ? value : value[end] || 0\n}\n\nexport const sizeRangeSystem = u.system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight, fixedHeaderHeight }]) => {\n    const listBoundary = u.stream<NumberTuple>()\n    const topListHeight = u.statefulStream(0)\n    const increaseViewportBy = u.statefulStream<ViewportIncrease>(0)\n    const overscan = u.statefulStream<Overscan>(0)\n\n    const visibleRange = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          u.duc(scrollTop),\n          u.duc(viewportHeight),\n          u.duc(headerHeight),\n          u.duc(listBoundary, tupleComparator),\n          u.duc(overscan),\n          u.duc(topListHeight),\n          u.duc(fixedHeaderHeight),\n          u.duc(deviation),\n          u.duc(increaseViewportBy)\n        ),\n        u.map(\n          ([\n            scrollTop,\n            viewportHeight,\n            headerHeight,\n            [listTop, listBottom],\n            overscan,\n            topListHeight,\n            fixedHeaderHeight,\n            deviation,\n            increaseViewportBy,\n          ]) => {\n            const top = scrollTop - deviation\n            const stickyHeaderHeight = topListHeight + fixedHeaderHeight\n            const headerVisible = Math.max(headerHeight - top, 0)\n            let direction: ChangeDirection = NONE\n            const topViewportAddition = getViewportIncrease(increaseViewportBy, TOP)\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy, BOTTOM)\n\n            listTop -= deviation\n            listTop += headerHeight + fixedHeaderHeight\n            listBottom += headerHeight + fixedHeaderHeight\n            listBottom -= deviation\n\n            // console.log({ listTop, scrollTop, stickyHeaderHeight, topViewportAddition })\n            if (listTop > scrollTop + stickyHeaderHeight - topViewportAddition) {\n              direction = UP\n            }\n\n            if (listBottom < scrollTop - headerVisible + viewportHeight + bottomViewportAddition) {\n              direction = DOWN\n            }\n\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight - getOverscan(overscan, TOP, direction) - topViewportAddition, 0),\n                top -\n                  headerVisible -\n                  fixedHeaderHeight +\n                  viewportHeight +\n                  getOverscan(overscan, BOTTOM, direction) +\n                  bottomViewportAddition,\n              ] as NumberTuple\n            }\n\n            return null\n          }\n        ),\n        u.filter((value) => value != null) as u.Operator<NumberTuple | null, NumberTuple>,\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      [0, 0]\n    ) as unknown as u.StatefulStream<NumberTuple>\n\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      increaseViewportBy,\n\n      // output\n      visibleRange,\n    }\n  },\n  u.tup(domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty, findMaxKeyValue, Range, rangesWithin } from './AATree'\nimport { groupedListSystem } from './groupedListSystem'\nimport { getInitialTopMostItemIndexNumber, initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { Item, ListItem, ListRange } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { Data, originalIndexFromItemIndex, SizeState, sizeSystem, hasGroups, rangesWithinOffsets } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { recalcSystem } from './recalcSystem'\n\nexport type ListItems = ListItem<unknown>[]\nexport interface TopListState {\n  items: ListItems\n  listHeight: number\n}\n\nexport interface ListState {\n  items: ListItems\n  topItems: ListItems\n  topListHeight: number\n  offsetTop: number\n  offsetBottom: number\n  top: number\n  bottom: number\n  totalCount: number\n  firstItemIndex: number\n}\n\nfunction probeItemSet(index: number, sizes: SizeState, data: Data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes)\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0]\n\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] },\n    ]\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }]\n}\n\nconst EMPTY_LIST_STATE: ListState = {\n  items: [] as ListItems,\n  topItems: [] as ListItems,\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0,\n}\n\nfunction transposeItems(items: Item<any>[], sizes: SizeState, firstItemIndex: number): ListItems {\n  if (items.length === 0) {\n    return []\n  }\n\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }))\n  }\n\n  const startIndex = items[0].index\n  const endIndex = items[items.length - 1].index\n\n  const transposedItems = [] as ListItems\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex)\n  let currentRange: Range<number> | undefined = undefined\n  let currentGroupIndex = 0\n\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift()!\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start)\n    }\n\n    let transposedItem: { type: 'group'; index: number } | { index: number; groupIndex: number }\n\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: 'group' as const,\n        index: currentGroupIndex,\n      }\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex,\n      }\n    }\n\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data,\n    })\n  }\n\n  return transposedItems\n}\n\nexport function buildListState(\n  items: Item<any>[],\n  topItems: Item<any>[],\n  totalCount: number,\n  gap: number,\n  sizes: SizeState,\n  firstItemIndex: number\n): ListState {\n  const { lastSize, lastOffset, lastIndex } = sizes\n  let offsetTop = 0\n  let bottom = 0\n\n  if (items.length > 0) {\n    offsetTop = items[0].offset\n    const lastItem = items[items.length - 1]\n    bottom = lastItem.offset + lastItem.size\n  }\n\n  const itemCount = totalCount - lastIndex\n  const total = lastOffset + itemCount * lastSize + (itemCount - 1) * gap\n  const top = offsetTop\n  const offsetBottom = total - bottom\n\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n    firstItemIndex,\n  }\n}\n\nexport const listStateSystem = u.system(\n  ([\n    { sizes, totalCount, data, firstItemIndex, gap },\n    groupedListSystem,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n    { recalcInProgress },\n  ]) => {\n    const topItemsIndexes = u.statefulStream<Array<number>>([])\n    const itemsRendered = u.stream<ListItems>()\n\n    u.connect(groupedListSystem.topItemsIndexes, topItemsIndexes)\n\n    const listState = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          didMount,\n          recalcInProgress,\n          u.duc(visibleRange, tupleComparator),\n          u.duc(totalCount),\n          u.duc(sizes),\n          u.duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          u.duc(topItemsIndexes),\n          u.duc(firstItemIndex),\n          u.duc(gap),\n          data\n        ),\n        u.filter(([mount, recalcInProgress]) => {\n          return mount && !recalcInProgress\n        }),\n        u.map(\n          ([\n            ,\n            ,\n            [startOffset, endOffset],\n            totalCount,\n            sizes,\n            initialTopMostItemIndex,\n            scrolledToInitialItem,\n            topItemsIndexes,\n            firstItemIndex,\n            gap,\n            data,\n          ]) => {\n            const sizesValue = sizes\n            const { sizeTree, offsetTree } = sizesValue\n\n            if (totalCount === 0 || (startOffset === 0 && endOffset === 0)) {\n              return { ...EMPTY_LIST_STATE, totalCount }\n            }\n\n            if (empty(sizeTree)) {\n              return buildListState(\n                probeItemSet(getInitialTopMostItemIndexNumber(initialTopMostItemIndex, totalCount), sizesValue, data),\n                [],\n                totalCount,\n                gap,\n                sizesValue,\n                firstItemIndex\n              )\n            }\n\n            const topItems = [] as Item<any>[]\n\n            if (topItemsIndexes.length > 0) {\n              const startIndex = topItemsIndexes[0]\n              const endIndex = topItemsIndexes[topItemsIndexes.length - 1]\n              let offset = 0\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value\n                const rangeStartIndex = Math.max(range.start, startIndex)\n                const rangeEndIndex = Math.min(range.end, endIndex)\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            }\n\n            // If the list hasn't scrolled to the initial item because the initial item was set,\n            // render empty list.\n            //\n            // This is a condition to be evaluated past the probe check, do not merge\n            // with the totalCount check above\n            if (!scrolledToInitialItem) {\n              return buildListState([], topItems, totalCount, gap, sizesValue, firstItemIndex)\n            }\n\n            const minStartIndex = topItemsIndexes.length > 0 ? topItemsIndexes[topItemsIndexes.length - 1] + 1 : 0\n\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex)\n            if (offsetPointRanges.length === 0) {\n              return null\n            }\n\n            const maxIndex = totalCount - 1\n\n            const items = u.tap([] as Item<any>[], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value\n                let offset = point.offset\n                let rangeStartIndex = range.start\n                const size = point.size\n\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset + gap) / (size + gap))\n                  const itemCount = rangeStartIndex - range.start\n                  offset += itemCount * size + itemCount * gap\n                }\n\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size\n                  rangeStartIndex = minStartIndex\n                }\n\n                const endIndex = Math.min(range.end, maxIndex)\n\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break\n                  }\n\n                  result.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size + gap\n                }\n              }\n            })\n\n            return buildListState(items, topItems, totalCount, gap, sizesValue, firstItemIndex)\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        u.filter((value) => value !== null),\n        u.distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    )\n\n    u.connect(\n      u.pipe(\n        data,\n        u.filter((data) => data !== undefined),\n        u.map((data) => data!.length)\n      ),\n      totalCount\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((value) => value.topListHeight)\n      ),\n      topListHeight\n    )\n    u.connect(topListHeight, rangeTopListHeight)\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => state.items)\n      ),\n      itemsRendered\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount, data),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].originalIndex === totalCount - 1),\n        u.map(([, totalCount, data]) => [totalCount - 1, data] as [number, unknown[]]),\n        u.distinctUntilChanged(tupleComparator),\n        u.map(([count]) => count)\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.throttleTime(200),\n        u.filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length\n        }),\n        u.map(({ items }) => items[0].index),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          let startIndex = 0\n          let endIndex = items.length - 1\n\n          while (items[startIndex].type === 'group' && startIndex < endIndex) {\n            startIndex++\n          }\n\n          while (items[endIndex].type === 'group' && endIndex > startIndex) {\n            endIndex--\n          }\n\n          return {\n            startIndex: items[startIndex].index,\n            endIndex: items[endIndex].index,\n          } as ListRange\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags }\n  },\n  u.tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem,\n    recalcSystem\n  ),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem, buildListState } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialItemCountSystem = u.system(\n  ([{ sizes, firstItemIndex, data, gap }, { listState }, { didMount }]) => {\n    const initialItemCount = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.withLatestFrom(sizes, firstItemIndex, gap, data),\n        u.map(([[, count], sizes, firstItemIndex, gap, data = []]) => {\n          let includedGroupsCount = 0\n          if (sizes.groupIndices.length > 0) {\n            for (const index of sizes.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break\n              }\n              includedGroupsCount++\n            }\n          }\n          const adjustedCount = count + includedGroupsCount\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data[index] }))\n          return buildListState(items, [], adjustedCount, gap, sizes, firstItemIndex)\n        })\n      ),\n      listState\n    )\n\n    return { initialItemCount }\n  },\n  u.tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { ListRange } from './interfaces'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { ScrollSeekConfiguration } from './interfaces'\n\nexport const scrollSeekSystem = u.system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = u.statefulStream(false)\n    const rangeChanged = u.stream<ListRange>()\n    const scrollSeekConfiguration = u.statefulStream<ScrollSeekConfiguration | undefined | false>(false)\n\n    u.connect(\n      u.pipe(\n        scrollVelocity,\n        u.withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        u.filter(([_, config]) => !!config),\n        u.map(([speed, config, isSeeking, range]) => {\n          const { exit, enter } = config as ScrollSeekConfiguration\n          if (isSeeking) {\n            if (exit(speed, range)) {\n              return false\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true\n            }\n          }\n          return isSeeking\n        }),\n        u.distinctUntilChanged()\n      ),\n      isSeeking\n    )\n\n    u.subscribe(\n      u.pipe(u.combineLatest(isSeeking, scrollVelocity, rangeChanged), u.withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking, velocity, range], config]) => isSeeking && config && config.change && config.change(velocity, range)\n    )\n\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged }\n  },\n  u.tup(stateFlagsSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\n\nexport const topItemCountSystem = u.system(([{ topItemsIndexes }]) => {\n  const topItemCount = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      topItemCount,\n      u.filter((length) => length > 0),\n      u.map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  )\n  return { topItemCount }\n}, u.tup(listStateSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const totalListHeightSystem = u.system(\n  ([{ footerHeight, headerHeight, fixedHeaderHeight, fixedFooterHeight }, { listState }]) => {\n    const totalListHeightChanged = u.stream<number>()\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(footerHeight, fixedFooterHeight, headerHeight, fixedHeaderHeight, listState),\n        u.map(([footerHeight, fixedFooterHeight, headerHeight, fixedHeaderHeight, listState]) => {\n          return footerHeight + fixedFooterHeight + headerHeight + fixedHeaderHeight + listState.offsetBottom + listState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(u.duc(totalListHeight), totalListHeightChanged)\n\n    return { totalListHeight, totalListHeightChanged }\n  },\n  u.tup(domIOSystem, listStateSystem),\n  { singleton: true }\n)\n","export function simpleMemoize<T extends () => any>(func: T): T {\n  let called = false\n  let result: unknown\n\n  return (() => {\n    if (!called) {\n      called = true\n      result = func()\n    }\n    return result\n  }) as T\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { UP, stateFlagsSystem } from './stateFlagsSystem'\nimport { ListItem } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { simpleMemoize } from './utils/simpleMemoize'\nimport { recalcSystem } from './recalcSystem'\n\nconst isMobileSafari = simpleMemoize(() => {\n  return /iP(ad|hone|od).+Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent)\n})\n\ntype UpwardFixState = [number, ListItem<any>[], number, number]\n/**\n * Fixes upward scrolling by calculating and compensation from changed item heights, using scrollBy.\n */\nexport const upwardScrollFixSystem = u.system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, shiftWithOffset, sizes, gap },\n    { log },\n    { recalcInProgress },\n  ]) => {\n    const deviationOffset = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.withLatestFrom(lastJumpDueToItemResize),\n        u.scan(\n          ([, prevItems, prevTotalCount, prevTotalHeight], [{ items, totalCount, bottom, offsetBottom }, lastJumpDueToItemResize]) => {\n            const totalHeight = bottom + offsetBottom\n\n            let newDev = 0\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const atStart = items[0].originalIndex === 0 && prevItems[0].originalIndex === 0\n                if (!atStart) {\n                  newDev = totalHeight - prevTotalHeight\n                  if (newDev !== 0) {\n                    newDev += lastJumpDueToItemResize\n                  }\n                }\n              }\n            }\n\n            return [newDev, items, totalCount, totalHeight] as UpwardFixState\n          },\n          [0, [], 0, 0] as UpwardFixState\n        ),\n        u.filter(([amount]) => amount !== 0),\n        u.withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, isAtBottom, log),\n        u.filter(([, scrollTop, scrollDirection, scrollingInProgress]) => {\n          return !scrollingInProgress && scrollTop !== 0 && scrollDirection === UP\n        }),\n        u.map(([[amount], , , , , log]) => {\n          log('Upward scrolling compensation', { amount }, LogLevel.DEBUG)\n          return amount\n        })\n      )\n    )\n\n    function scrollByWith(offset: number) {\n      if (offset > 0) {\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n        u.publish(deviation, 0)\n      } else {\n        u.publish(deviation, 0)\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n      }\n    }\n\n    u.subscribe(u.pipe(deviationOffset, u.withLatestFrom(deviation, isScrolling)), ([offset, deviationAmount, isScrolling]) => {\n      if (isScrolling && isMobileSafari()) {\n        u.publish(deviation, deviationAmount - offset)\n      } else {\n        scrollByWith(-offset)\n      }\n    })\n\n    // this hack is only necessary for mobile safari which does not support scrollBy while scrolling is in progress.\n    // when the browser stops scrolling, restore the position and reset the glitching\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.statefulStreamFromEmitter(isScrolling, false), deviation, recalcInProgress),\n        u.filter(([is, deviation, recalc]) => !is && !recalc && deviation !== 0),\n        u.map(([_, deviation]) => deviation),\n        u.throttleTime(1)\n      ),\n      scrollByWith\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWithOffset,\n        u.map((offset) => {\n          return { top: -offset }\n        })\n      ),\n      scrollBy\n    )\n\n    u.subscribe(\n      u.pipe(\n        beforeUnshiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([offset, { lastSize }, gap]) => offset * lastSize + offset * gap)\n      ),\n      (offset) => {\n        u.publish(deviation, offset)\n        requestAnimationFrame(() => {\n          u.publish(scrollBy, { top: offset })\n          requestAnimationFrame(() => {\n            u.publish(deviation, 0)\n            u.publish(recalcInProgress, false)\n          })\n        })\n      }\n    )\n\n    return { deviation }\n  },\n  u.tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem, recalcSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const initialScrollTopSystem = u.system(\n  ([{ totalListHeight }, { didMount }, { scrollTo }]) => {\n    const initialScrollTop = u.statefulStream(0)\n\n    u.subscribe(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialScrollTop),\n        u.filter(([, offset]) => offset !== 0),\n        u.map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        u.handleNext(\n          u.pipe(\n            totalListHeight,\n            u.filter((val) => val !== 0)\n          ),\n          () => {\n            setTimeout(() => {\n              u.publish(scrollTo, location)\n            })\n          }\n        )\n      }\n    )\n\n    return {\n      initialScrollTop,\n    }\n  },\n  u.tup(totalListHeightSystem, propsReadySystem, domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const alignToBottomSystem = u.system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = u.statefulStream(false)\n\n    const paddingTopAddition = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        u.filter(([enabled]) => enabled),\n        u.map(([, viewportHeight, totalListHeight]) => {\n          return Math.max(0, viewportHeight - totalListHeight)\n        }),\n        u.distinctUntilChanged()\n      ),\n      0\n    )\n\n    return { alignToBottom, paddingTopAddition }\n  },\n  u.tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { WindowViewportInfo, ScrollContainerState } from './interfaces'\n\nexport const windowScrollerSystem = u.system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = u.stream<ScrollContainerState>()\n  const windowViewportRect = u.stream<WindowViewportInfo>()\n  const windowScrollTo = u.stream<ScrollToOptions>()\n  const useWindowScroll = u.statefulStream(false)\n  const customScrollParent = u.statefulStream<HTMLElement | undefined>(undefined)\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(windowScrollContainerState, windowViewportRect),\n      u.map(([{ viewportHeight, scrollTop: windowScrollTop, scrollHeight }, { offsetTop }]) => {\n        return {\n          scrollTop: Math.max(0, windowScrollTop - offsetTop),\n          scrollHeight,\n          viewportHeight,\n        }\n      })\n    ),\n    scrollContainerState\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTo,\n      u.withLatestFrom(windowViewportRect),\n      u.map(([scrollTo, { offsetTop }]) => {\n        return {\n          ...scrollTo,\n          top: scrollTo.top! + offsetTop,\n        }\n      })\n    ),\n    windowScrollTo\n  )\n\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n\n    // signals\n    windowScrollTo,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { ScrollIntoViewLocation } from './interfaces'\n\nexport const scrollIntoViewSystem = u.system(\n  ([{ sizes, totalCount, gap }, { scrollTop, viewportHeight, headerHeight, scrollingInProgress }, { scrollToIndex }]) => {\n    const scrollIntoView = u.stream<ScrollIntoViewLocation>()\n\n    u.connect(\n      u.pipe(\n        scrollIntoView,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap),\n        u.map(([viewLocation, sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap]) => {\n          const { done, behavior, align, ...rest } = viewLocation\n          let location = null\n          const actualIndex = originalIndexFromLocation(viewLocation, sizes, totalCount - 1)\n\n          const itemTop = offsetOf(actualIndex, sizes.offsetTree, gap) + headerHeight\n          if (itemTop < scrollTop) {\n            location = { ...rest, behavior, align: align ?? 'start' }\n          } else {\n            const itemBottom = itemTop + findMaxKeyValue(sizes.sizeTree, actualIndex)[1]!\n\n            if (itemBottom > scrollTop + viewportHeight) {\n              location = { ...rest, behavior, align: align ?? 'end' }\n            }\n          }\n\n          if (location) {\n            done &&\n              u.handleNext(\n                u.pipe(\n                  scrollingInProgress,\n                  u.skip(1),\n                  u.filter((value) => value === false)\n                ),\n                done\n              )\n          } else {\n            done && done()\n          }\n\n          return location\n        }),\n        u.filter((value) => value !== null)\n      ),\n      scrollToIndex\n    )\n\n    return {\n      scrollIntoView,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { followOutputSystem } from './followOutputSystem'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialItemCountSystem } from './initialItemCountSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { topItemCountSystem } from './topItemCountSystem'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { upwardScrollFixSystem } from './upwardScrollFixSystem'\nimport { initialScrollTopSystem } from './initialScrollTopSystem'\nimport { alignToBottomSystem } from './alignToBottomSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollIntoViewSystem } from './scrollIntoViewSystem'\n\n// workaround the growing list of systems below\n// fix this with 4.1 recursive conditional types\nconst featureGroup1System = u.system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n    }\n  },\n  u.tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem\n  )\n)\n\nexport const listSystem = u.system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n      gap,\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1,\n    log,\n  ]) => {\n    u.connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged)\n    u.connect(\n      u.pipe(\n        featureGroup1.windowViewportRect,\n        u.map((value) => value.visibleHeight)\n      ),\n      domIO.viewportHeight\n    )\n\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      gap,\n      ...followOutput,\n\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      ...log,\n    }\n  },\n  u.tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System,\n    loggerSystem\n  )\n)\n","import { simpleMemoize } from './simpleMemoize'\n\nconst WEBKIT_STICKY = '-webkit-sticky'\nconst STICKY = 'sticky'\n\nexport const positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === 'undefined') {\n    return STICKY\n  }\n  const node = document.createElement('div')\n  node.style.position = WEBKIT_STICKY\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY\n})\n","import { useEffect, useRef, useCallback } from 'react'\nimport { useSizeWithElRef } from './useSize'\nimport { WindowViewportInfo } from '../interfaces'\n\nexport default function useWindowViewportRectRef(callback: (info: WindowViewportInfo) => void, customScrollParent?: HTMLElement) {\n  const viewportInfo = useRef<WindowViewportInfo | null>(null)\n\n  const calculateInfo = useCallback(\n    (element: HTMLElement | null) => {\n      if (element === null || !element.offsetParent) {\n        return\n      }\n      const rect = element.getBoundingClientRect()\n      const visibleWidth = rect.width\n      let visibleHeight: number, offsetTop: number\n\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect()\n        const deltaTop = rect.top - customScrollParentRect.top\n\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop)\n        offsetTop = deltaTop + customScrollParent.scrollTop\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top)\n        offsetTop = rect.top + window.pageYOffset\n      }\n\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth,\n      }\n\n      callback(viewportInfo.current)\n    },\n    [callback, customScrollParent]\n  )\n\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo)\n\n  const scrollAndResizeEventHandler = useCallback(() => {\n    calculateInfo(ref.current)\n  }, [calculateInfo, ref])\n\n  useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener('scroll', scrollAndResizeEventHandler)\n      const observer = new ResizeObserver(scrollAndResizeEventHandler)\n      observer.observe(customScrollParent)\n      return () => {\n        customScrollParent.removeEventListener('scroll', scrollAndResizeEventHandler)\n        observer.unobserve(customScrollParent)\n      }\n    } else {\n      window.addEventListener('scroll', scrollAndResizeEventHandler)\n      window.addEventListener('resize', scrollAndResizeEventHandler)\n      return () => {\n        window.removeEventListener('scroll', scrollAndResizeEventHandler)\n        window.removeEventListener('resize', scrollAndResizeEventHandler)\n      }\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent])\n\n  return callbackRef\n}\n","import * as React from 'react'\n\nexport interface VirtuosoMockContextValue {\n  viewportHeight: number\n  itemHeight: number\n}\n\nexport const VirtuosoMockContext = React.createContext<VirtuosoMockContextValue | undefined>(undefined)\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { ComponentType, createElement, CSSProperties, FC, PropsWithChildren, useContext } from 'react'\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport useScrollTop from './hooks/useScrollTop'\nimport useSize from './hooks/useSize'\nimport { Components, ComputeItemKey, GroupContent, GroupItemContent, ItemContent, ListRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { positionStickyCssValue } from './utils/positionStickyCssValue'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { VirtuosoMockContext } from './utils/context'\nimport { ScrollerProps } from '.'\n\nexport function identity<T>(value: T) {\n  return value\n}\n\nconst listComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, any> | GroupItemContent<any, any>>((index: number) => `Item ${index}`)\n  const context = u.statefulStream<unknown>(null)\n  const groupContent = u.statefulStream<GroupContent>((index: number) => `Group ${index}`)\n  const components = u.statefulStream<Components<any>>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, any>>(identity)\n  const headerFooterTag = u.statefulStream('div')\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof Components<any>>(propName: K, defaultValue: Components<any>[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp('Footer'),\n    HeaderComponent: distinctProp('Header'),\n    TopItemListComponent: distinctProp('TopItemList'),\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    GroupComponent: distinctProp('Group', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nexport function addDeprecatedAlias<T>(prop: u.Stream<T>, message: string) {\n  const alias = u.stream<T>()\n  u.subscribe(alias, () =>\n    console.warn(`react-virtuoso: You are using a deprecated property. ${message}`, 'color: red;', 'color: inherit;', 'color: blue;')\n  )\n  u.connect(alias, prop)\n  return alias\n}\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(propsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    group: addDeprecatedAlias(propsSystem.groupContent, 'Rename the %cgroup%c prop to %cgroupContent.'),\n    topItems: addDeprecatedAlias(listSystem.topItemCount, 'Rename the %ctopItems%c prop to %ctopItemCount.'),\n    itemHeight: addDeprecatedAlias(listSystem.fixedItemHeight, 'Rename the %citemHeight%c prop to %cfixedItemHeight.'),\n    scrollingStateChange: addDeprecatedAlias(listSystem.isScrolling, 'Rename the %cscrollingStateChange%c prop to %cisScrolling.'),\n    adjustForPrependedItems: u.stream<any>(),\n    maxHeightCacheSize: u.stream<any>(),\n    footer: u.stream<any>(),\n    header: u.stream<any>(),\n    HeaderContainer: u.stream<any>(),\n    FooterContainer: u.stream<any>(),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    GroupContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  u.subscribe(deprecatedProps.adjustForPrependedItems, () => {\n    console.warn(\n      `react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.`,\n      'color: red;',\n      'color: inherit;',\n      'color: blue;'\n    )\n  })\n\n  u.subscribe(deprecatedProps.maxHeightCacheSize, () => {\n    console.warn(`react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.`)\n  })\n\n  u.subscribe(deprecatedProps.HeaderContainer, () => {\n    console.warn(\n      `react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.`\n    )\n  })\n\n  u.subscribe(deprecatedProps.FooterContainer, () => {\n    console.warn(\n      `react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.`\n    )\n  })\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(propsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      propsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    u.publish(propsSystem.components, { ...u.getValue(propsSystem.components), ScrollSeekPlaceholder: placeholder })\n    u.publish(listSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.footer, 'Footer', 'footer')\n  deprecateComponentProp(deprecatedProps.header, 'Header', 'header')\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n  deprecateComponentProp(deprecatedProps.emptyComponent, 'EmptyPlaceholder', 'emptyComponent')\n  deprecateComponentProp(deprecatedProps.GroupContainer, 'Group', 'GroupContainer')\n\n  return { ...listSystem, ...propsSystem, ...deprecatedProps }\n}, u.tup(listSystem, listComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => <div style={{ height }}></div>\n\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: 'none' } as const\nconst ITEM_STYLE = { overflowAnchor: 'none' } as const\n\nexport const Items = React.memo(function VirtuosoItems({ showTopList = false }: { showTopList?: boolean }) {\n  const listState = useEmitterValue('listState')\n\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const context = useEmitterValue('context')\n  const groupContent = useEmitterValue('groupContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n  const listGap = usePublisher('gap')\n\n  const { callbackRef } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? u.noop : scrollContainerStateCallback,\n    log,\n    listGap,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      // ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const GroupComponent = useEmitterValue('GroupComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const hasGroups = useEmitterValue('groupIndices').length > 0\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n\n  const containerStyle: CSSProperties = showTopList\n    ? {}\n    : {\n        boxSizing: 'border-box',\n        paddingTop: listState.offsetTop + paddingTopAddition,\n        paddingBottom: listState.offsetBottom,\n        marginTop: deviation,\n      }\n\n  if (!showTopList && listState.totalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  return createElement(\n    ListComponent,\n    {\n      ...contextPropIfNotDomElement(ListComponent, context),\n      ref: callbackRef,\n      style: containerStyle,\n      'data-test-id': showTopList ? 'virtuoso-top-item-list' : 'virtuoso-item-list',\n    },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex!\n      const key = computeItemKey(index + listState.firstItemIndex, item.data, context)\n\n      if (isSeeking) {\n        return createElement(ScrollSeekPlaceholder, {\n          ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || 'item',\n          ...(item.type === 'group' ? {} : { groupIndex: item.groupIndex }),\n        })\n      }\n\n      if (item.type === 'group') {\n        return createElement(\n          GroupComponent,\n          {\n            ...contextPropIfNotDomElement(GroupComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            style: GROUP_STYLE,\n          },\n          groupContent(item.index)\n        )\n      } else {\n        return createElement(\n          ItemComponent,\n          {\n            ...contextPropIfNotDomElement(ItemComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            'data-item-group-index': item.groupIndex,\n            style: ITEM_STYLE,\n          },\n          hasGroups\n            ? (itemContent as GroupItemContent<any, any>)(item.index, item.groupIndex!, item.data, context)\n            : (itemContent as ItemContent<any, any>)(item.index, item.data, context)\n        )\n      }\n    })\n  )\n})\n\nexport const scrollerStyle: CSSProperties = {\n  height: '100%',\n  outline: 'none',\n  overflowY: 'auto',\n  position: 'relative',\n  WebkitOverflowScrolling: 'touch',\n}\n\nexport const viewportStyle: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  top: 0,\n}\n\nconst topItemListStyle: CSSProperties = {\n  width: '100%',\n  position: positionStickyCssValue(),\n  top: 0,\n}\n\nexport function contextPropIfNotDomElement(element: unknown, context: unknown) {\n  if (typeof element === 'string') {\n    return undefined\n  }\n  return { context }\n}\n\nconst Header: FC = React.memo(function VirtuosoHeader() {\n  const Header = useEmitterValue('HeaderComponent')\n  const headerHeight = usePublisher('headerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => headerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Header ? createElement(headerFooterTag, { ref }, createElement(Header, contextPropIfNotDomElement(Header, context))) : null\n})\n\nconst Footer: FC = React.memo(function VirtuosoFooter() {\n  const Footer = useEmitterValue('FooterComponent')\n  const footerHeight = usePublisher('footerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => footerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Footer ? createElement(headerFooterTag, { ref }, createElement(Footer, contextPropIfNotDomElement(Footer, context))) : null\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nexport function buildScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: ComponentType<ScrollerProps> = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('scrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const scrollerRefCallback = useEmitterValue('scrollerRef')\n    const context = useEmitterValue('context')\n\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    )\n\n    useEmitter('scrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef as React.MutableRefObject<HTMLDivElement | null>,\n        style: { ...scrollerStyle, ...style },\n        'data-test-id': 'virtuoso-scroller',\n        'data-virtuoso-scroller': true,\n        tabIndex: 0,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nexport function buildWindowScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('windowScrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const totalListHeight = useEmitterValue('totalListHeight')\n    const deviation = useEmitterValue('deviation')\n    const customScrollParent = useEmitterValue('customScrollParent')\n    const context = useEmitterValue('context')\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      u.noop,\n      customScrollParent\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window\n      return () => {\n        scrollerRef.current = null\n      }\n    }, [scrollerRef, customScrollParent])\n\n    useEmitter('windowScrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        style: { position: 'relative', ...style, ...(totalListHeight !== 0 ? { height: totalListHeight + deviation } : {}) },\n        'data-virtuoso-scroller': true,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const ctx = useContext(VirtuosoMockContext)\n  const viewportHeight = usePublisher('viewportHeight')\n  const fixedItemHeight = usePublisher('fixedItemHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  React.useEffect(() => {\n    if (ctx) {\n      viewportHeight(ctx.viewportHeight)\n      fixedItemHeight(ctx.itemHeight)\n    }\n  }, [ctx, viewportHeight, fixedItemHeight])\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const ctx = useContext(VirtuosoMockContext)\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const fixedItemHeight = usePublisher('fixedItemHeight')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  React.useEffect(() => {\n    if (ctx) {\n      fixedItemHeight(ctx.itemHeight)\n      windowViewportRect({ offsetTop: 0, visibleHeight: ctx.viewportHeight, visibleWidth: 100 })\n    }\n  }, [ctx, windowViewportRect, fixedItemHeight])\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TopItemListContainer: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const TopItemList = useEmitterValue('TopItemListComponent')\n  const headerHeight = useEmitterValue('headerHeight')\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` }\n  const context = useEmitterValue('context')\n  return createElement(TopItemList || 'div', { style, context }, children)\n}\n\nconst ListRoot: FC<ListRootProps> = React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const showTopList = useEmitterValue('topItemsIndexes').length > 0\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <Header />\n        <Items />\n        <Footer />\n      </TheViewport>\n      {showTopList && (\n        <TopItemListContainer>\n          <Items showTopList={true} />\n        </TopItemListContainer>\n      )}\n    </TheScroller>\n  )\n})\n\nexport type ListHandle = RefHandle<typeof List>\n\nexport const {\n  Component: List,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      groupContent: 'groupContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      headerFooterTag: 'headerFooterTag',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n\n      // deprecated\n      item: 'item',\n      group: 'group',\n      topItems: 'topItems',\n      itemHeight: 'itemHeight',\n      scrollingStateChange: 'scrollingStateChange',\n      maxHeightCacheSize: 'maxHeightCacheSize',\n      footer: 'footer',\n      header: 'header',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      GroupContainer: 'GroupContainer',\n      emptyComponent: 'emptyComponent',\n      HeaderContainer: 'HeaderContainer',\n      FooterContainer: 'FooterContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      adjustForPrependedItems: 'adjustForPrependedItems',\n      autoscrollToBottom: 'autoscrollToBottom',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  ListRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import * as u from '@virtuoso.dev/urx'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { domIOSystem } from './domIOSystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { IndexLocation, normalizeIndexLocation } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\n\nexport interface Gap {\n  row: number\n  column: number\n}\n\nexport interface ElementDimensions {\n  width: number\n  height: number\n}\n\nexport interface GridItem {\n  index: number\n}\n\nexport interface GridLayout {\n  top: number\n  bottom: number\n}\n\nexport interface GridState extends GridLayout {\n  items: GridItem[]\n  offsetTop: number\n  offsetBottom: number\n  itemHeight: number\n  itemWidth: number\n}\n\nconst INITIAL_GRID_STATE: GridState = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst PROBE_GRID_STATE: GridState = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst { round, ceil, floor, min, max } = Math\n\nfunction buildItems(startIndex: number, endIndex: number) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => ({ index: i + startIndex } as GridItem))\n}\n\nfunction gapComparator(prev: Gap, next: Gap) {\n  return prev && prev.column === next.column && prev.row === next.row\n}\nexport const gridSystem = u.system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, windowScrollTo, useWindowScroll, customScrollParent, windowScrollContainerState },\n    log,\n  ]) => {\n    const totalCount = u.statefulStream(0)\n    const initialItemCount = u.statefulStream(0)\n    const gridState = u.statefulStream(INITIAL_GRID_STATE)\n    const viewportDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const itemDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const scrollToIndex = u.stream<IndexLocation>()\n    const scrollHeight = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const gap = u.statefulStream<Gap>({ row: 0, column: 0 })\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.map(([, count]) => {\n          return {\n            items: buildItems(0, count - 1),\n            top: 0,\n            bottom: 0,\n            offsetBottom: 0,\n            offsetTop: 0,\n            itemHeight: 0,\n            itemWidth: 0,\n          }\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(\n          u.duc(totalCount),\n          visibleRange,\n          u.duc(gap, gapComparator),\n          u.duc(itemDimensions, (prev, next) => prev && prev.width === next.width && prev.height === next.height)\n        ),\n        u.withLatestFrom(viewportDimensions),\n        u.map(([[totalCount, [startOffset, endOffset], gap, item], viewport]) => {\n          const { row: rowGap, column: columnGap } = gap\n          const { height: itemHeight, width: itemWidth } = item\n          const { width: viewportWidth } = viewport\n\n          if (totalCount === 0 || viewportWidth === 0) {\n            return INITIAL_GRID_STATE\n          }\n\n          if (itemWidth === 0) {\n            return PROBE_GRID_STATE\n          }\n\n          const perRow = itemsPerRow(viewportWidth, itemWidth, columnGap)\n\n          let startIndex = perRow * floor((startOffset + rowGap) / (itemHeight + rowGap))\n          let endIndex = perRow * ceil((endOffset + rowGap) / (itemHeight + rowGap)) - 1\n          endIndex = max(0, min(totalCount - 1, endIndex))\n          startIndex = min(endIndex, max(0, startIndex))\n\n          const items = buildItems(startIndex, endIndex)\n          const { top, bottom } = gridLayout(viewport, gap, item, items)\n          const rowCount = ceil(totalCount / perRow)\n          const totalHeight = rowCount * itemHeight + (rowCount - 1) * rowGap\n          const offsetBottom = totalHeight - bottom\n\n          return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth } as GridState\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        viewportDimensions,\n        u.map(({ height }) => height)\n      ),\n      viewportHeight\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(viewportDimensions, itemDimensions, gridState, gap),\n        u.map(([viewportDimensions, item, { items }, gap]) => {\n          const { top, bottom } = gridLayout(viewportDimensions, gap, item, items)\n\n          return [top, bottom] as [number, number]\n        }),\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].index === totalCount - 1),\n        u.map(([, totalCount]) => totalCount - 1),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0\n        }),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(0),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          }\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    u.connect(rangeChanged, scrollSeek.scrollSeekRangeChanged)\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(viewportDimensions, itemDimensions, totalCount, gap),\n        u.map(([location, viewport, item, totalCount, gap]) => {\n          const normalLocation = normalizeIndexLocation(location) as FlatIndexLocationWithAlign\n          const { align, behavior, offset } = normalLocation\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = totalCount - 1\n          }\n\n          index = max(0, index, min(totalCount - 1, index))\n\n          let top = itemTop(viewport, gap, item, index)\n\n          if (align === 'end') {\n            top = round(top - viewport.height + item.height)\n          } else if (align === 'center') {\n            top = round(top - viewport.height / 2 + item.height / 2)\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        gridState,\n        u.map((gridState) => {\n          return gridState.offsetBottom + gridState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(\n      u.pipe(\n        windowViewportRect,\n        u.map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    )\n\n    return {\n      // input\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      initialItemCount,\n      gap,\n      ...scrollSeek,\n\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      propsReady,\n      ...log,\n    }\n  },\n  u.tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem, loggerSystem)\n)\n\nfunction gridLayout(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, items: GridItem[]): GridLayout {\n  const { height: itemHeight } = item\n  if (itemHeight === undefined || items.length === 0) {\n    return { top: 0, bottom: 0 }\n  }\n\n  const top = itemTop(viewport, gap, item, items[0].index)\n  const bottom = itemTop(viewport, gap, item, items[items.length - 1].index) + itemHeight\n  return { top, bottom }\n}\n\nfunction itemTop(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, index: number) {\n  const perRow = itemsPerRow(viewport.width, item.width, gap.column)\n  const rowCount = floor(index / perRow)\n  const top = rowCount * item.height + max(0, rowCount - 1) * gap.row\n  return top > 0 ? top + gap.row : top\n}\n\nfunction itemsPerRow(viewportWidth: number, itemWidth: number, gap: number) {\n  return max(1, floor((viewportWidth + gap) / (itemWidth + gap)))\n}\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\n\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren } from 'react'\nimport { gridSystem } from './gridSystem'\nimport useSize from './hooks/useSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { GridComponents, GridComputeItemKey, GridItemContent, GridRootProps } from './interfaces'\nimport { addDeprecatedAlias, buildScroller, buildWindowScroller, contextPropIfNotDomElement, identity, viewportStyle } from './List'\nimport { Log, LogLevel } from './loggerSystem'\n\nconst gridComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<GridItemContent<any>>((index) => `Item ${index}`)\n  const components = u.statefulStream<GridComponents>({})\n  const context = u.statefulStream<unknown>(null)\n  const itemClassName = u.statefulStream('virtuoso-grid-item')\n  const listClassName = u.statefulStream('virtuoso-grid-list')\n  const computeItemKey = u.statefulStream<GridComputeItemKey>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof GridComponents>(propName: K, defaultValue: GridComponents[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    scrollerRef,\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder', 'div'),\n  }\n})\n\nconst combinedSystem = u.system(([gridSystem, gridComponentPropsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(gridComponentPropsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(gridComponentPropsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      gridComponentPropsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    u.publish(gridComponentPropsSystem.components, {\n      ...u.getValue(gridComponentPropsSystem.components),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ScrollSeekPlaceholder: placeholder,\n    })\n    u.publish(gridSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n\n  return { ...gridSystem, ...gridComponentPropsSystem, ...deprecatedProps }\n}, u.tup(gridSystem, gridComponentPropsSystem))\n\nconst GridItems: FC = React.memo(function GridItems() {\n  const gridState = useEmitterValue('gridState')\n  const listClassName = useEmitterValue('listClassName')\n  const itemClassName = useEmitterValue('itemClassName')\n  const itemContent = useEmitterValue('itemContent')\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const scrollHeightCallback = usePublisher('scrollHeight')\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder')!\n  const context = useEmitterValue('context')\n  const itemDimensions = usePublisher('itemDimensions')\n  const gridGap = usePublisher('gap')\n  const log = useEmitterValue('log')\n\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement!.parentElement!.scrollHeight\n    scrollHeightCallback(scrollHeight)\n    const firstItem = el.firstChild as HTMLElement\n    if (firstItem) {\n      itemDimensions(firstItem.getBoundingClientRect())\n    }\n    gridGap({\n      row: resolveGapValue('row-gap', getComputedStyle(el).rowGap, log),\n      column: resolveGapValue('column-gap', getComputedStyle(el).columnGap, log),\n    })\n  })\n\n  return createElement(\n    ListComponent,\n    {\n      ref: listRef,\n      className: listClassName,\n      ...contextPropIfNotDomElement(ListComponent, context),\n      style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom },\n    },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index)\n      return isSeeking\n        ? createElement(ScrollSeekPlaceholder, {\n            key,\n            ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n            index: item.index,\n            height: gridState.itemHeight,\n            width: gridState.itemWidth,\n          })\n        : createElement(\n            ItemComponent,\n            { ...contextPropIfNotDomElement(ItemComponent, context), className: itemClassName, 'data-index': item.index, key },\n            itemContent(item.index, context)\n          )\n    })\n  )\n})\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportDimensions = usePublisher('viewportDimensions')\n\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect())\n  })\n\n  return (\n    <div style={viewportStyle} ref={viewportRef}>\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle}>\n      {children}\n    </div>\n  )\n}\n\nconst GridRoot: FC<GridRootProps> = React.memo(function GridRoot({ ...props }) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <GridItems />\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nconst {\n  Component: Grid,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    optional: {\n      context: 'context',\n      totalCount: 'totalCount',\n      overscan: 'overscan',\n      itemContent: 'itemContent',\n      components: 'components',\n      computeItemKey: 'computeItemKey',\n      initialItemCount: 'initialItemCount',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      listClassName: 'listClassName',\n      itemClassName: 'itemClassName',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n\n      // deprecated\n      item: 'item',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      scrollToIndex: 'scrollToIndex',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n    },\n  },\n  GridRoot\n)\n\nexport type foo<T> = T extends React.ForwardRefExoticComponent<React.RefAttributes<infer Handle>> ? Handle : never\n\nexport type GridHandle = RefHandle<typeof Grid>\nexport { Grid }\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n\nfunction resolveGapValue(property: string, value: string | undefined, log: Log) {\n  if (value !== 'normal' && !value?.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value ?? '0', 10)\n}\n","import { systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren, useContext } from 'react'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport { ComputeItemKey, ItemContent, FixedHeaderContent, FixedFooterContent, TableComponents, TableRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { identity, buildScroller, buildWindowScroller, viewportStyle, contextPropIfNotDomElement } from './List'\nimport useSize from './hooks/useSize'\nimport { correctItemSize } from './utils/correctItemSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { VirtuosoMockContext } from './utils/context'\n\nconst tableComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, unknown>>((index: number) => <td>Item ${index}</td>)\n  const context = u.statefulStream<unknown>(null)\n  const fixedHeaderContent = u.statefulStream<FixedHeaderContent>(null)\n  const fixedFooterContent = u.statefulStream<FixedFooterContent>(null)\n  const components = u.statefulStream<TableComponents>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, unknown>>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof TableComponents>(\n    propName: K,\n    defaultValue: TableComponents[K] | null | 'thead' | 'tfoot' | 'table' | 'tbody' | 'tr' | 'div' = null\n  ) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    fixedHeaderContent,\n    fixedFooterContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp('Table', 'table'),\n    TableHeadComponent: distinctProp('TableHead', 'thead'),\n    TableFooterComponent: distinctProp('TableFoot', 'tfoot'),\n    TableBodyComponent: distinctProp('TableBody', 'tbody'),\n    TableRowComponent: distinctProp('TableRow', 'tr'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n    FillerRow: distinctProp('FillerRow'),\n  }\n})\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  return { ...listSystem, ...propsSystem }\n}, u.tup(listSystem, tableComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height }}></td>\n  </tr>\n)\n\nconst DefaultFillerRow = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height: height, padding: 0, border: 0 }}></td>\n  </tr>\n)\n\nexport const Items = React.memo(function VirtuosoItems() {\n  const listState = useEmitterValue('listState')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const { callbackRef, ref } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    scrollContainerStateCallback,\n    log,\n    undefined,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const FillerRow = useEmitterValue('FillerRow') || DefaultFillerRow\n  const TableBodyComponent = useEmitterValue('TableBodyComponent')!\n  const TableRowComponent = useEmitterValue('TableRowComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n  const context = useEmitterValue('context')\n\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation\n  const paddingBottom = listState.offsetBottom\n\n  const paddingTopEl = paddingTop > 0 ? <FillerRow height={paddingTop} key=\"padding-top\" /> : null\n\n  const paddingBottomEl = paddingBottom > 0 ? <FillerRow height={paddingBottom} key=\"padding-bottom\" /> : null\n\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex!\n    const key = computeItemKey(index + firstItemIndex, item.data, context)\n\n    if (isSeeking) {\n      return createElement(ScrollSeekPlaceholder, {\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || 'item',\n      })\n    }\n    return createElement(\n      TableRowComponent,\n      {\n        ...contextPropIfNotDomElement(TableRowComponent, context),\n        key,\n        'data-index': index,\n        'data-known-size': item.size,\n        'data-item-index': item.index,\n        style: { overflowAnchor: 'none' },\n      },\n      itemContent(item.index, item.data, context)\n    )\n  })\n\n  return createElement(\n    TableBodyComponent,\n    { ref: callbackRef, 'data-test-id': 'virtuoso-item-list', ...contextPropIfNotDomElement(TableBodyComponent, context) },\n    [paddingTopEl, ...items, paddingBottomEl]\n  )\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const ctx = useContext(VirtuosoMockContext)\n  const viewportHeight = usePublisher('viewportHeight')\n  const fixedItemHeight = usePublisher('fixedItemHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  React.useEffect(() => {\n    if (ctx) {\n      viewportHeight(ctx.viewportHeight)\n      fixedItemHeight(ctx.itemHeight)\n    }\n  }, [ctx, viewportHeight, fixedItemHeight])\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const ctx = useContext(VirtuosoMockContext)\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const fixedItemHeight = usePublisher('fixedItemHeight')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  React.useEffect(() => {\n    if (ctx) {\n      fixedItemHeight(ctx.itemHeight)\n      windowViewportRect({ offsetTop: 0, visibleHeight: ctx.viewportHeight, visibleWidth: 100 })\n    }\n  }, [ctx, windowViewportRect, fixedItemHeight])\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TableRoot: FC<TableRootProps> = React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const fixedHeaderHeight = usePublisher('fixedHeaderHeight')\n  const fixedFooterHeight = usePublisher('fixedFooterHeight')\n  const fixedHeaderContent = useEmitterValue('fixedHeaderContent')\n  const fixedFooterContent = useEmitterValue('fixedFooterContent')\n  const context = useEmitterValue('context')\n  const theadRef = useSize(u.compose(fixedHeaderHeight, (el) => correctItemSize(el, 'height')))\n  const tfootRef = useSize(u.compose(fixedFooterHeight, (el) => correctItemSize(el, 'height')))\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  const TheTable = useEmitterValue('TableComponent')\n  const TheTHead = useEmitterValue('TableHeadComponent')\n  const TheTFoot = useEmitterValue('TableFooterComponent')\n\n  const theHead = fixedHeaderContent\n    ? React.createElement(\n        TheTHead!,\n        {\n          key: 'TableHead',\n          style: { zIndex: 1, position: 'sticky', top: 0 },\n          ref: theadRef,\n          ...contextPropIfNotDomElement(TheTHead, context),\n        },\n        fixedHeaderContent()\n      )\n    : null\n  const theFoot = fixedFooterContent\n    ? React.createElement(\n        TheTFoot!,\n        {\n          key: 'TableFoot',\n          style: { zIndex: 1, position: 'sticky', bottom: 0 },\n          ref: tfootRef,\n          ...contextPropIfNotDomElement(TheTFoot, context),\n        },\n        fixedFooterContent()\n      )\n    : null\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        {React.createElement(TheTable!, { style: { borderSpacing: 0 }, ...contextPropIfNotDomElement(TheTable, context) }, [\n          theHead,\n          <Items key=\"TableBody\" />,\n          theFoot,\n        ])}\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nexport const {\n  Component: Table,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      fixedHeaderContent: 'fixedHeaderContent',\n      fixedFooterContent: 'fixedFooterContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  TableRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { ReactElement, Ref } from 'react'\n\nimport {\n  Components,\n  ComputeItemKey,\n  FollowOutput,\n  GridComponents,\n  GridComputeItemKey,\n  GridItemContent,\n  GroupContent,\n  GroupItemContent,\n  IndexLocationWithAlign,\n  ItemContent,\n  ListItem,\n  ListRange,\n  ScrollSeekConfiguration,\n  TableComponents,\n  FixedHeaderContent,\n  ScrollIntoViewLocation,\n  ListRootProps,\n  GridRootProps,\n  FlatIndexLocationWithAlign,\n  FlatScrollIntoViewLocation,\n  SizeFunction,\n  FixedFooterContent,\n} from './interfaces'\nimport { List } from './List'\nimport { Grid } from './Grid'\nimport { Table } from './Table'\n\nexport interface VirtuosoProps<D, C> extends ListRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Additional context available in the custom components and content callbacks\n   */\n  context?: C\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in react-window).\n   *\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   *\n   * *The property accepts pixel values.*\n   *\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   *\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set the amount of items to remain fixed at the top of the list.\n   *\n   * For a header that scrolls away when scrolling, check the `components.Header` property.\n   */\n  topItemCount?: number\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   * Pass in an object to achieve additional effects similar to `scrollToIndex`.\n   */\n  initialTopMostItemIndex?: number | IndexLocationWithAlign\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: Components<C>\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: SizeFunction\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Set to customize the wrapper tag for the header and footer components (default is `div`).\n   */\n  headerFooterTag?: string\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the list won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface GroupedVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'totalCount' | 'itemContent'> {\n  /**\n   * Specifies the amount of items in each group (and, actually, how many groups are there).\n   * For example, passing [20, 30] will display 2 groups with 20 and 30 items each.\n   */\n  groupCounts?: number[]\n\n  /**\n   * Specifies how each each group header gets rendered. The callback receives the zero-based index of the group.\n   */\n  groupContent?: GroupContent\n\n  /**\n   * Specifies how each each item gets rendered.\n   */\n  itemContent?: GroupItemContent<D, C>\n}\n\nexport interface TableVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'components' | 'headerFooterTag' | 'topItemCount'> {\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the table.\n   */\n  components?: TableComponents<C>\n  /**\n   * Set the contents of the table header.\n   */\n  fixedHeaderContent?: FixedHeaderContent\n\n  /**\n   * Set the contents of the table footer.\n   */\n  fixedFooterContent?: FixedFooterContent\n\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: SizeFunction\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the table won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface VirtuosoGridProps<C = unknown> extends GridRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: GridItemContent<C>\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: GridComponents<C>\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  context?: C\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: GridComputeItemKey\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | null) => any\n\n  /**\n   * Sets the className for the list DOM element\n   */\n  listClassName?: string\n\n  /**\n   * Sets the grid items' className\n   */\n  itemClassName?: string\n\n  /**\n   * Uses the document scroller rather than wrapping the grid in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the grid won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n}\n\nexport interface VirtuosoHandle {\n  /**\n   * Scrolls the component to the specified item index. See {@link IndexLocationWithAlign} for more options.\n   */\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  /**\n   * Scrolls the item into view if necessary. See [the website example](http://virtuoso.dev/keyboard-navigation/) for an implementation.\n   */\n  scrollIntoView(location: FlatScrollIntoViewLocation): void\n  /**\n   * Scrolls the component to the specified location. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollTo(location: ScrollToOptions): void\n  /**\n   * Scrolls the component with the specified amount. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollBy(location: ScrollToOptions): void\n  /**\n   * Use this with combination with follow output if you have images loading in the list. Listen to the image loading and call the method.\n   */\n  autoscrollToBottom(): void\n}\n\nexport interface GroupedVirtuosoHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollIntoView(location: number | ScrollIntoViewLocation): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n  autoscrollToBottom(): void\n}\n\nexport interface VirtuosoGridHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface TableVirtuosoHandle {\n  scrollIntoView(location: number | FlatScrollIntoViewLocation): void\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport const Virtuoso = List as <ItemData = any, Context = any>(\n  props: VirtuosoProps<ItemData, Context> & { ref?: Ref<VirtuosoHandle> }\n) => ReactElement\n\nexport const GroupedVirtuoso = List as <ItemData = any, Context = any>(\n  props: GroupedVirtuosoProps<ItemData, Context> & { ref?: Ref<GroupedVirtuosoHandle> }\n) => ReactElement\n\nexport const TableVirtuoso = Table as <ItemData = any, Context = any>(\n  props: TableVirtuosoProps<ItemData, Context> & { ref?: Ref<TableVirtuosoHandle> }\n) => ReactElement\n\nexport const VirtuosoGrid = Grid as <Context = any>(props: VirtuosoGridProps<Context> & { ref?: Ref<VirtuosoGridHandle> }) => ReactElement\n"]},"metadata":{},"sourceType":"module"}