{"ast":null,"code":"import { useCallback, useEffect, useRef, useState } from 'react';\nexport var PROGRESS_UPDATE_INTERVAL = 100;\nexport var useAudioController = function () {\n  var _a = useState(false),\n      isPlaying = _a[0],\n      setIsPlaying = _a[1];\n\n  var _b = useState(0),\n      progress = _b[0],\n      setProgress = _b[1];\n\n  var audioRef = useRef(null);\n  var togglePlay = useCallback(function () {\n    setIsPlaying(function (playing) {\n      return !playing;\n    });\n  }, []);\n  var seek = useCallback(function (_a) {\n    var clientX = _a.clientX,\n        currentTarget = _a.currentTarget;\n    if (!audioRef.current) return;\n\n    var _b = currentTarget.getBoundingClientRect(),\n        width = _b.width,\n        x = _b.x;\n\n    var ratio = (clientX - x) / width;\n    if (!isPlaying) setProgress(ratio * 100);\n    audioRef.current.currentTime = ratio * audioRef.current.duration;\n  }, [isPlaying]);\n  useEffect(function () {\n    if (!audioRef.current || !isPlaying) return;\n    var interval = window.setInterval(function () {\n      if (!audioRef.current) return;\n      var _a = audioRef.current,\n          currentTime = _a.currentTime,\n          duration = _a.duration;\n      setProgress(currentTime / duration * 100);\n      if (currentTime === duration) setIsPlaying(false);\n    }, PROGRESS_UPDATE_INTERVAL);\n    audioRef.current.play();\n    return function () {\n      var _a;\n\n      (_a = audioRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n      window.clearInterval(interval);\n    };\n  }, [isPlaying]);\n  return {\n    audioRef: audioRef,\n    isPlaying: isPlaying,\n    progress: progress,\n    seek: seek,\n    togglePlay: togglePlay\n  };\n};","map":{"version":3,"names":["useCallback","useEffect","useRef","useState","PROGRESS_UPDATE_INTERVAL","useAudioController","_a","isPlaying","setIsPlaying","_b","progress","setProgress","audioRef","togglePlay","playing","seek","clientX","currentTarget","current","getBoundingClientRect","width","x","ratio","currentTime","duration","interval","window","setInterval","play","pause","clearInterval"],"sources":["/home/betty/web-app-practice/memory-game/client/node_modules/stream-chat-react/dist/components/Attachment/hooks/useAudioController.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\nexport var PROGRESS_UPDATE_INTERVAL = 100;\nexport var useAudioController = function () {\n    var _a = useState(false), isPlaying = _a[0], setIsPlaying = _a[1];\n    var _b = useState(0), progress = _b[0], setProgress = _b[1];\n    var audioRef = useRef(null);\n    var togglePlay = useCallback(function () {\n        setIsPlaying(function (playing) { return !playing; });\n    }, []);\n    var seek = useCallback(function (_a) {\n        var clientX = _a.clientX, currentTarget = _a.currentTarget;\n        if (!audioRef.current)\n            return;\n        var _b = currentTarget.getBoundingClientRect(), width = _b.width, x = _b.x;\n        var ratio = (clientX - x) / width;\n        if (!isPlaying)\n            setProgress(ratio * 100);\n        audioRef.current.currentTime = ratio * audioRef.current.duration;\n    }, [isPlaying]);\n    useEffect(function () {\n        if (!audioRef.current || !isPlaying)\n            return;\n        var interval = window.setInterval(function () {\n            if (!audioRef.current)\n                return;\n            var _a = audioRef.current, currentTime = _a.currentTime, duration = _a.duration;\n            setProgress((currentTime / duration) * 100);\n            if (currentTime === duration)\n                setIsPlaying(false);\n        }, PROGRESS_UPDATE_INTERVAL);\n        audioRef.current.play();\n        return function () {\n            var _a;\n            (_a = audioRef.current) === null || _a === void 0 ? void 0 : _a.pause();\n            window.clearInterval(interval);\n        };\n    }, [isPlaying]);\n    return {\n        audioRef: audioRef,\n        isPlaying: isPlaying,\n        progress: progress,\n        seek: seek,\n        togglePlay: togglePlay,\n    };\n};\n"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,MAAjC,EAAyCC,QAAzC,QAAyD,OAAzD;AACA,OAAO,IAAIC,wBAAwB,GAAG,GAA/B;AACP,OAAO,IAAIC,kBAAkB,GAAG,YAAY;EACxC,IAAIC,EAAE,GAAGH,QAAQ,CAAC,KAAD,CAAjB;EAAA,IAA0BI,SAAS,GAAGD,EAAE,CAAC,CAAD,CAAxC;EAAA,IAA6CE,YAAY,GAAGF,EAAE,CAAC,CAAD,CAA9D;;EACA,IAAIG,EAAE,GAAGN,QAAQ,CAAC,CAAD,CAAjB;EAAA,IAAsBO,QAAQ,GAAGD,EAAE,CAAC,CAAD,CAAnC;EAAA,IAAwCE,WAAW,GAAGF,EAAE,CAAC,CAAD,CAAxD;;EACA,IAAIG,QAAQ,GAAGV,MAAM,CAAC,IAAD,CAArB;EACA,IAAIW,UAAU,GAAGb,WAAW,CAAC,YAAY;IACrCQ,YAAY,CAAC,UAAUM,OAAV,EAAmB;MAAE,OAAO,CAACA,OAAR;IAAkB,CAAxC,CAAZ;EACH,CAF2B,EAEzB,EAFyB,CAA5B;EAGA,IAAIC,IAAI,GAAGf,WAAW,CAAC,UAAUM,EAAV,EAAc;IACjC,IAAIU,OAAO,GAAGV,EAAE,CAACU,OAAjB;IAAA,IAA0BC,aAAa,GAAGX,EAAE,CAACW,aAA7C;IACA,IAAI,CAACL,QAAQ,CAACM,OAAd,EACI;;IACJ,IAAIT,EAAE,GAAGQ,aAAa,CAACE,qBAAd,EAAT;IAAA,IAAgDC,KAAK,GAAGX,EAAE,CAACW,KAA3D;IAAA,IAAkEC,CAAC,GAAGZ,EAAE,CAACY,CAAzE;;IACA,IAAIC,KAAK,GAAG,CAACN,OAAO,GAAGK,CAAX,IAAgBD,KAA5B;IACA,IAAI,CAACb,SAAL,EACII,WAAW,CAACW,KAAK,GAAG,GAAT,CAAX;IACJV,QAAQ,CAACM,OAAT,CAAiBK,WAAjB,GAA+BD,KAAK,GAAGV,QAAQ,CAACM,OAAT,CAAiBM,QAAxD;EACH,CATqB,EASnB,CAACjB,SAAD,CATmB,CAAtB;EAUAN,SAAS,CAAC,YAAY;IAClB,IAAI,CAACW,QAAQ,CAACM,OAAV,IAAqB,CAACX,SAA1B,EACI;IACJ,IAAIkB,QAAQ,GAAGC,MAAM,CAACC,WAAP,CAAmB,YAAY;MAC1C,IAAI,CAACf,QAAQ,CAACM,OAAd,EACI;MACJ,IAAIZ,EAAE,GAAGM,QAAQ,CAACM,OAAlB;MAAA,IAA2BK,WAAW,GAAGjB,EAAE,CAACiB,WAA5C;MAAA,IAAyDC,QAAQ,GAAGlB,EAAE,CAACkB,QAAvE;MACAb,WAAW,CAAEY,WAAW,GAAGC,QAAf,GAA2B,GAA5B,CAAX;MACA,IAAID,WAAW,KAAKC,QAApB,EACIhB,YAAY,CAAC,KAAD,CAAZ;IACP,CAPc,EAOZJ,wBAPY,CAAf;IAQAQ,QAAQ,CAACM,OAAT,CAAiBU,IAAjB;IACA,OAAO,YAAY;MACf,IAAItB,EAAJ;;MACA,CAACA,EAAE,GAAGM,QAAQ,CAACM,OAAf,MAA4B,IAA5B,IAAoCZ,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACuB,KAAH,EAA7D;MACAH,MAAM,CAACI,aAAP,CAAqBL,QAArB;IACH,CAJD;EAKH,CAjBQ,EAiBN,CAAClB,SAAD,CAjBM,CAAT;EAkBA,OAAO;IACHK,QAAQ,EAAEA,QADP;IAEHL,SAAS,EAAEA,SAFR;IAGHG,QAAQ,EAAEA,QAHP;IAIHK,IAAI,EAAEA,IAJH;IAKHF,UAAU,EAAEA;EALT,CAAP;AAOH,CA1CM"},"metadata":{},"sourceType":"module"}